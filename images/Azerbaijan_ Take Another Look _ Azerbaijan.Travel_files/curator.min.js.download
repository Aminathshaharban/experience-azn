!function(root,factory){"function"==typeof define&&define.amd?define("curator",factory):"object"==typeof exports?module.exports=factory():root.Curator=factory()}(this,function(){!function(window){var Zepto=function(){function type(obj){return null==obj?String(obj):class2type[toString.call(obj)]||"object"}function isFunction(value){return"function"==type(value)}function isWindow(obj){return null!=obj&&obj==obj.window}function isDocument(obj){return null!=obj&&obj.nodeType==obj.DOCUMENT_NODE}function isObject(obj){return"object"==type(obj)}function isPlainObject(obj){return isObject(obj)&&!isWindow(obj)&&Object.getPrototypeOf(obj)==Object.prototype}function likeArray(obj){var length=!!obj&&"length"in obj&&obj.length,type=$.type(obj);return"function"!=type&&!isWindow(obj)&&("array"==type||0===length||"number"==typeof length&&length>0&&length-1 in obj)}function compact(array){return filter.call(array,function(item){return null!=item})}function flatten(array){return array.length>0?$.fn.concat.apply([],array):array}function dasherize(str){return str.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function classRE(name){return name in classCache?classCache[name]:classCache[name]=new RegExp("(^|\\s)"+name+"(\\s|$)")}function maybeAddPx(name,value){return"number"!=typeof value||cssNumber[dasherize(name)]?value:value+"px"}function defaultDisplay(nodeName){var element,display;return elementDisplay[nodeName]||(element=document.createElement(nodeName),document.body.appendChild(element),display=getComputedStyle(element,"").getPropertyValue("display"),element.parentNode.removeChild(element),"none"==display&&(display="block"),elementDisplay[nodeName]=display),elementDisplay[nodeName]}function children(element){return"children"in element?slice.call(element.children):$.map(element.childNodes,function(node){if(1==node.nodeType)return node})}function Z(dom,selector){var i,len=dom?dom.length:0;for(i=0;i<len;i++)this[i]=dom[i];this.length=len,this.selector=selector||""}function extend(target,source,deep){for(key in source)deep&&(isPlainObject(source[key])||isArray(source[key]))?(isPlainObject(source[key])&&!isPlainObject(target[key])&&(target[key]={}),isArray(source[key])&&!isArray(target[key])&&(target[key]=[]),extend(target[key],source[key],deep)):source[key]!==undefined&&(target[key]=source[key])}function filtered(nodes,selector){return null==selector?$(nodes):$(nodes).filter(selector)}function funcArg(context,arg,idx,payload){return isFunction(arg)?arg.call(context,idx,payload):arg}function setAttribute(node,name,value){null==value?node.removeAttribute(name):node.setAttribute(name,value)}function className(node,value){var klass=node.className||"",svg=klass&&klass.baseVal!==undefined;if(value===undefined)return svg?klass.baseVal:klass;svg?klass.baseVal=value:node.className=value}function deserializeValue(value){try{return value?"true"==value||"false"!=value&&("null"==value?null:+value+""==value?+value:/^[\[\{]/.test(value)?$.parseJSON(value):value):value}catch(e){return value}}function traverseNode(node,fun){fun(node);for(var i=0,len=node.childNodes.length;i<len;i++)traverseNode(node.childNodes[i],fun)}var undefined,key,$,classList,camelize,uniq,emptyArray=[],concat=emptyArray.concat,filter=emptyArray.filter,slice=emptyArray.slice,document=window.document,elementDisplay={},classCache={},cssNumber={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},fragmentRE=/^\s*<(\w+|!)[^>]*>/,singleTagRE=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rootNodeRE=/^(?:body|html)$/i,methodAttributes=["val","css","html","text","data","width","height","offset"],adjacencyOperators=["after","prepend","before","append"],table=document.createElement("table"),tableRow=document.createElement("tr"),containers={tr:document.createElement("tbody"),tbody:table,thead:table,tfoot:table,td:tableRow,th:tableRow,"*":document.createElement("div")},simpleSelectorRE=/^[\w-]*$/,class2type={},toString=class2type.toString,zepto={},tempParent=document.createElement("div"),propMap={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},isArray=Array.isArray||function(object){return object instanceof Array};return zepto.matches=function(element,selector){if(!selector||!element||1!==element.nodeType)return!1;var matchesSelector=element.matches||element.webkitMatchesSelector||element.mozMatchesSelector||element.oMatchesSelector||element.matchesSelector;if(matchesSelector)return matchesSelector.call(element,selector);var match,parent=element.parentNode,temp=!parent;return temp&&(parent=tempParent).appendChild(element),match=~zepto.qsa(parent,selector).indexOf(element),temp&&tempParent.removeChild(element),match},camelize=function(str){return str.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():""})},uniq=function(array){return filter.call(array,function(item,idx){return array.indexOf(item)==idx})},zepto.fragment=function(html,name,properties){var dom,nodes,container;return singleTagRE.test(html)&&(dom=$(document.createElement(RegExp.$1))),dom||(html.replace&&(html=html.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")),name===undefined&&(name=fragmentRE.test(html)&&RegExp.$1),name in containers||(name="*"),container=containers[name],container.innerHTML=""+html,dom=$.each(slice.call(container.childNodes),function(){container.removeChild(this)})),isPlainObject(properties)&&(nodes=$(dom),$.each(properties,function(key,value){methodAttributes.indexOf(key)>-1?nodes[key](value):nodes.attr(key,value)})),dom},zepto.Z=function(dom,selector){return new Z(dom,selector)},zepto.isZ=function(object){return object instanceof zepto.Z},zepto.init=function(selector,context){var dom;if(!selector)return zepto.Z();if("string"==typeof selector)if(selector=selector.trim(),"<"==selector[0]&&fragmentRE.test(selector))dom=zepto.fragment(selector,RegExp.$1,context),selector=null;else{if(context!==undefined)return $(context).find(selector);dom=zepto.qsa(document,selector)}else{if(isFunction(selector))return $(document).ready(selector);if(zepto.isZ(selector))return selector;if(isArray(selector))dom=compact(selector);else if(isObject(selector))dom=[selector],selector=null;else if(fragmentRE.test(selector))dom=zepto.fragment(selector.trim(),RegExp.$1,context),selector=null;else{if(context!==undefined)return $(context).find(selector);dom=zepto.qsa(document,selector)}}return zepto.Z(dom,selector)},$=function(selector,context){return zepto.init(selector,context)},$.extend=function(target){var deep,args=slice.call(arguments,1);return"boolean"==typeof target&&(deep=target,target=args.shift()),args.forEach(function(arg){extend(target,arg,deep)}),target},zepto.qsa=function(element,selector){var found,maybeID="#"==selector[0],maybeClass=!maybeID&&"."==selector[0],nameOnly=maybeID||maybeClass?selector.slice(1):selector,isSimple=simpleSelectorRE.test(nameOnly);return element.getElementById&&isSimple&&maybeID?(found=element.getElementById(nameOnly))?[found]:[]:1!==element.nodeType&&9!==element.nodeType&&11!==element.nodeType?[]:slice.call(isSimple&&!maybeID&&element.getElementsByClassName?maybeClass?element.getElementsByClassName(nameOnly):element.getElementsByTagName(selector):element.querySelectorAll(selector))},$.contains=document.documentElement.contains?function(parent,node){return parent!==node&&parent.contains(node)}:function(parent,node){for(;node&&(node=node.parentNode);)if(node===parent)return!0;return!1},$.type=type,$.isFunction=isFunction,$.isWindow=isWindow,$.isArray=isArray,$.isPlainObject=isPlainObject,$.isEmptyObject=function(obj){var name;for(name in obj)return!1;return!0},$.isNumeric=function(val){var num=Number(val),type=typeof val;return null!=val&&"boolean"!=type&&("string"!=type||val.length)&&!isNaN(num)&&isFinite(num)||!1},$.inArray=function(elem,array,i){return emptyArray.indexOf.call(array,elem,i)},$.camelCase=camelize,$.trim=function(str){return null==str?"":String.prototype.trim.call(str)},$.uuid=0,$.support={},$.expr={},$.noop=function(){},$.map=function(elements,callback){var value,i,key,values=[];if(likeArray(elements))for(i=0;i<elements.length;i++)null!=(value=callback(elements[i],i))&&values.push(value);else for(key in elements)null!=(value=callback(elements[key],key))&&values.push(value);return flatten(values)},$.each=function(elements,callback){var i,key;if(likeArray(elements)){for(i=0;i<elements.length;i++)if(callback.call(elements[i],i,elements[i])===!1)return elements}else for(key in elements)if(callback.call(elements[key],key,elements[key])===!1)return elements;return elements},$.grep=function(elements,callback){return filter.call(elements,callback)},window.JSON&&($.parseJSON=JSON.parse),$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),$.fn={constructor:zepto.Z,length:0,forEach:emptyArray.forEach,reduce:emptyArray.reduce,push:emptyArray.push,sort:emptyArray.sort,splice:emptyArray.splice,indexOf:emptyArray.indexOf,concat:function(){var i,value,args=[];for(i=0;i<arguments.length;i++)value=arguments[i],args[i]=zepto.isZ(value)?value.toArray():value;return concat.apply(zepto.isZ(this)?this.toArray():this,args)},map:function(fn){return $($.map(this,function(el,i){return fn.call(el,i,el)}))},slice:function(){return $(slice.apply(this,arguments))},ready:function(callback){if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)setTimeout(function(){callback($)},0);else{var handler=function(){document.removeEventListener("DOMContentLoaded",handler,!1),window.removeEventListener("load",handler,!1),callback($)};document.addEventListener("DOMContentLoaded",handler,!1),window.addEventListener("load",handler,!1)}return this},get:function(idx){return idx===undefined?slice.call(this):this[idx>=0?idx:idx+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(callback){return emptyArray.every.call(this,function(el,idx){return callback.call(el,idx,el)!==!1}),this},filter:function(selector){return isFunction(selector)?this.not(this.not(selector)):$(filter.call(this,function(element){return zepto.matches(element,selector)}))},add:function(selector,context){return $(uniq(this.concat($(selector,context))))},is:function(selector){return"string"==typeof selector?this.length>0&&zepto.matches(this[0],selector):selector&&this.selector==selector.selector},not:function(selector){var nodes=[];if(isFunction(selector)&&selector.call!==undefined)this.each(function(idx){selector.call(this,idx)||nodes.push(this)});else{var excludes="string"==typeof selector?this.filter(selector):likeArray(selector)&&isFunction(selector.item)?slice.call(selector):$(selector);this.forEach(function(el){excludes.indexOf(el)<0&&nodes.push(el)})}return $(nodes)},has:function(selector){return this.filter(function(){return isObject(selector)?$.contains(this,selector):$(this).find(selector).size()})},eq:function(idx){return idx===-1?this.slice(idx):this.slice(idx,+idx+1)},first:function(){var el=this[0];return el&&!isObject(el)?el:$(el)},last:function(){var el=this[this.length-1];return el&&!isObject(el)?el:$(el)},find:function(selector){var $this=this;return selector?"object"==typeof selector?$(selector).filter(function(){var node=this;return emptyArray.some.call($this,function(parent){return $.contains(parent,node)})}):1==this.length?$(zepto.qsa(this[0],selector)):this.map(function(){return zepto.qsa(this,selector)}):$()},closest:function(selector,context){var nodes=[],collection="object"==typeof selector&&$(selector);return this.each(function(_,node){for(;node&&!(collection?collection.indexOf(node)>=0:zepto.matches(node,selector));)node=node!==context&&!isDocument(node)&&node.parentNode;node&&nodes.indexOf(node)<0&&nodes.push(node)}),$(nodes)},parents:function(selector){for(var ancestors=[],nodes=this;nodes.length>0;)nodes=$.map(nodes,function(node){if((node=node.parentNode)&&!isDocument(node)&&ancestors.indexOf(node)<0)return ancestors.push(node),node});return filtered(ancestors,selector)},parent:function(selector){return filtered(uniq(this.pluck("parentNode")),selector)},children:function(selector){return filtered(this.map(function(){return children(this)}),selector)},contents:function(){return this.map(function(){return this.contentDocument||slice.call(this.childNodes)})},siblings:function(selector){return filtered(this.map(function(i,el){return filter.call(children(el.parentNode),function(child){return child!==el})}),selector)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(property){return $.map(this,function(el){return el[property]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=defaultDisplay(this.nodeName))})},replaceWith:function(newContent){return this.before(newContent).remove()},wrap:function(structure){var func=isFunction(structure);if(this[0]&&!func)var dom=$(structure).get(0),clone=dom.parentNode||this.length>1;return this.each(function(index){$(this).wrapAll(func?structure.call(this,index):clone?dom.cloneNode(!0):dom)})},wrapAll:function(structure){if(this[0]){$(this[0]).before(structure=$(structure));for(var children;(children=structure.children()).length;)structure=children.first();$(structure).append(this)}return this},wrapInner:function(structure){var func=isFunction(structure);return this.each(function(index){var self=$(this),contents=self.contents(),dom=func?structure.call(this,index):structure;contents.length?contents.wrapAll(dom):self.append(dom)})},unwrap:function(){return this.parent().each(function(){$(this).replaceWith($(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(setting){return this.each(function(){var el=$(this);(setting===undefined?"none"==el.css("display"):setting)?el.show():el.hide()})},prev:function(selector){return $(this.pluck("previousElementSibling")).filter(selector||"*")},next:function(selector){return $(this.pluck("nextElementSibling")).filter(selector||"*")},html:function(html){return 0 in arguments?this.each(function(idx){var originHtml=this.innerHTML;$(this).empty().append(funcArg(this,html,idx,originHtml))}):0 in this?this[0].innerHTML:null},text:function(text){return 0 in arguments?this.each(function(idx){var newText=funcArg(this,text,idx,this.textContent);this.textContent=null==newText?"":""+newText}):0 in this?this.pluck("textContent").join(""):null},attr:function(name,value){var result;return"string"!=typeof name||1 in arguments?this.each(function(idx){if(1===this.nodeType)if(isObject(name))for(key in name)setAttribute(this,key,name[key]);else setAttribute(this,name,funcArg(this,value,idx,this.getAttribute(name)))}):0 in this&&1==this[0].nodeType&&null!=(result=this[0].getAttribute(name))?result:undefined},removeAttr:function(name){return this.each(function(){1===this.nodeType&&name.split(" ").forEach(function(attribute){setAttribute(this,attribute)},this)})},prop:function(name,value){return name=propMap[name]||name,"string"!=typeof name||1 in arguments?this.each(function(idx){if(isObject(name))for(key in name)this[propMap[key]||key]=name[key];else this[name]=funcArg(this,value,idx,this[name])}):this[0]&&this[0][name]},removeProp:function(name){return name=propMap[name]||name,this.each(function(){delete this[name]})},data:function(name,value){var attrName="data-"+name.replace(/([A-Z])/g,"-$1").toLowerCase(),data=1 in arguments?this.attr(attrName,value):this.attr(attrName);return null!==data?deserializeValue(data):undefined},val:function(value){return 0 in arguments?(null==value&&(value=""),this.each(function(idx){this.value=funcArg(this,value,idx,this.value)})):this[0]&&(this[0].multiple?$(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(coordinates){if(coordinates)return this.each(function(index){var $this=$(this),coords=funcArg(this,coordinates,index,$this.offset()),parentOffset=$this.offsetParent().offset(),props={top:coords.top-parentOffset.top,left:coords.left-parentOffset.left};"static"==$this.css("position")&&(props.position="relative"),$this.css(props)});if(!this.length)return null;if(document.documentElement!==this[0]&&!$.contains(document.documentElement,this[0]))return{top:0,left:0};var obj=this[0].getBoundingClientRect();return{left:obj.left+window.pageXOffset,top:obj.top+window.pageYOffset,width:Math.round(obj.width),height:Math.round(obj.height)}},css:function(property,value){if(arguments.length<2){var element=this[0];if("string"==typeof property){if(!element)return;return element.style[camelize(property)]||getComputedStyle(element,"").getPropertyValue(property)}if(isArray(property)){if(!element)return;var props={},computedStyle=getComputedStyle(element,"");return $.each(property,function(_,prop){props[prop]=element.style[camelize(prop)]||computedStyle.getPropertyValue(prop)}),props}}var css="";if("string"==type(property))value||0===value?css=dasherize(property)+":"+maybeAddPx(property,value):this.each(function(){this.style.removeProperty(dasherize(property))});else for(key in property)property[key]||0===property[key]?css+=dasherize(key)+":"+maybeAddPx(key,property[key])+";":this.each(function(){this.style.removeProperty(dasherize(key))});return this.each(function(){this.style.cssText+=";"+css})},index:function(element){return element?this.indexOf($(element)[0]):this.parent().children().indexOf(this[0])},hasClass:function(name){return!!name&&emptyArray.some.call(this,function(el){return this.test(className(el))},classRE(name))},addClass:function(name){return name?this.each(function(idx){if("className"in this){classList=[];var cls=className(this);funcArg(this,name,idx,cls).split(/\s+/g).forEach(function(klass){$(this).hasClass(klass)||classList.push(klass)},this),classList.length&&className(this,cls+(cls?" ":"")+classList.join(" "))}}):this},removeClass:function(name){return this.each(function(idx){if("className"in this){if(name===undefined)return className(this,"");classList=className(this),funcArg(this,name,idx,classList).split(/\s+/g).forEach(function(klass){classList=classList.replace(classRE(klass)," ")}),className(this,classList.trim())}})},toggleClass:function(name,when){return name?this.each(function(idx){var $this=$(this);funcArg(this,name,idx,className(this)).split(/\s+/g).forEach(function(klass){(when===undefined?!$this.hasClass(klass):when)?$this.addClass(klass):$this.removeClass(klass)})}):this},scrollTop:function(value){if(this.length){var hasScrollTop="scrollTop"in this[0];return value===undefined?hasScrollTop?this[0].scrollTop:this[0].pageYOffset:this.each(hasScrollTop?function(){this.scrollTop=value}:function(){this.scrollTo(this.scrollX,value)})}},scrollLeft:function(value){if(this.length){var hasScrollLeft="scrollLeft"in this[0];return value===undefined?hasScrollLeft?this[0].scrollLeft:this[0].pageXOffset:this.each(hasScrollLeft?function(){this.scrollLeft=value}:function(){this.scrollTo(value,this.scrollY)})}},position:function(){if(this.length){var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rootNodeRE.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();return offset.top-=parseFloat($(elem).css("margin-top"))||0,offset.left-=parseFloat($(elem).css("margin-left"))||0,parentOffset.top+=parseFloat($(offsetParent[0]).css("border-top-width"))||0,parentOffset.left+=parseFloat($(offsetParent[0]).css("border-left-width"))||0,{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}}},offsetParent:function(){return this.map(function(){for(var parent=this.offsetParent||document.body;parent&&!rootNodeRE.test(parent.nodeName)&&"static"==$(parent).css("position");)parent=parent.offsetParent;return parent})}},$.fn.detach=$.fn.remove,["width","height"].forEach(function(dimension){var dimensionProperty=dimension.replace(/./,function(m){return m[0].toUpperCase()});$.fn[dimension]=function(value){var offset,el=this[0];return value===undefined?isWindow(el)?el["inner"+dimensionProperty]:isDocument(el)?el.documentElement["scroll"+dimensionProperty]:(offset=this.offset())&&offset[dimension]:this.each(function(idx){el=$(this),el.css(dimension,funcArg(this,value,idx,el[dimension]()))})}}),adjacencyOperators.forEach(function(operator,operatorIndex){var inside=operatorIndex%2;$.fn[operator]=function(){var argType,parent,nodes=$.map(arguments,function(arg){var arr=[];return argType=type(arg),"array"==argType?(arg.forEach(function(el){return el.nodeType!==undefined?arr.push(el):$.zepto.isZ(el)?arr=arr.concat(el.get()):void(arr=arr.concat(zepto.fragment(el)))}),arr):"object"==argType||null==arg?arg:zepto.fragment(arg)}),copyByClone=this.length>1;return nodes.length<1?this:this.each(function(_,target){parent=inside?target:target.parentNode,target=0==operatorIndex?target.nextSibling:1==operatorIndex?target.firstChild:2==operatorIndex?target:null;var parentInDocument=$.contains(document.documentElement,parent);nodes.forEach(function(node){if(copyByClone)node=node.cloneNode(!0);else if(!parent)return $(node).remove();parent.insertBefore(node,target),parentInDocument&&traverseNode(node,function(el){if(!(null==el.nodeName||"SCRIPT"!==el.nodeName.toUpperCase()||el.type&&"text/javascript"!==el.type||el.src)){var target=el.ownerDocument?el.ownerDocument.defaultView:window;target.eval.call(target,el.innerHTML)}})})})},$.fn[inside?operator+"To":"insert"+(operatorIndex?"Before":"After")]=function(html){return $(html)[operator](this),this}}),zepto.Z.prototype=Z.prototype=$.fn,zepto.uniq=uniq,zepto.deserializeValue=deserializeValue,$.zepto=zepto,$}();window.$crtZepto=Zepto,window.CuratorZepto=Zepto,function($){function zid(element){return element._zid||(element._zid=_zid++)}function findHandlers(element,event,fn,selector){if(event=parse(event),event.ns)var matcher=matcherFor(event.ns);return(handlers[zid(element)]||[]).filter(function(handler){return handler&&(!event.e||handler.e==event.e)&&(!event.ns||matcher.test(handler.ns))&&(!fn||zid(handler.fn)===zid(fn))&&(!selector||handler.sel==selector)})}function parse(event){var parts=(""+event).split(".");return{e:parts[0],ns:parts.slice(1).sort().join(" ")}}function matcherFor(ns){return new RegExp("(?:^| )"+ns.replace(" "," .* ?")+"(?: |$)")}function eventCapture(handler,captureSetting){return handler.del&&!focusinSupported&&handler.e in focus||!!captureSetting}function realEvent(type){return hover[type]||focusinSupported&&focus[type]||type}function add(element,events,fn,data,selector,delegator,capture){var id=zid(element),set=handlers[id]||(handlers[id]=[]);events.split(/\s/).forEach(function(event){if("ready"==event)return $(document).ready(fn);var handler=parse(event);handler.fn=fn,handler.sel=selector,handler.e in hover&&(fn=function(e){var related=e.relatedTarget;if(!related||related!==this&&!$.contains(this,related))return handler.fn.apply(this,arguments)}),handler.del=delegator;var callback=delegator||fn;handler.proxy=function(e){if(e=compatible(e),!e.isImmediatePropagationStopped()){e.data=data;var result=callback.apply(element,e._args==undefined?[e]:[e].concat(e._args));return result===!1&&(e.preventDefault(),e.stopPropagation()),result}},handler.i=set.length,set.push(handler),"addEventListener"in element&&element.addEventListener(realEvent(handler.e),handler.proxy,eventCapture(handler,capture))})}function remove(element,events,fn,selector,capture){var id=zid(element);(events||"").split(/\s/).forEach(function(event){findHandlers(element,event,fn,selector).forEach(function(handler){delete handlers[id][handler.i],"removeEventListener"in element&&element.removeEventListener(realEvent(handler.e),handler.proxy,eventCapture(handler,capture))})})}function compatible(event,source){if(source||!event.isDefaultPrevented){source||(source=event),$.each(eventMethods,function(name,predicate){var sourceMethod=source[name];event[name]=function(){return this[predicate]=returnTrue,sourceMethod&&sourceMethod.apply(source,arguments)},event[predicate]=returnFalse});try{event.timeStamp||(event.timeStamp=Date.now())}catch(ignored){}(source.defaultPrevented!==undefined?source.defaultPrevented:"returnValue"in source?source.returnValue===!1:source.getPreventDefault&&source.getPreventDefault())&&(event.isDefaultPrevented=returnTrue)}return event}function createProxy(event){var key,proxy={originalEvent:event};for(key in event)ignoreProperties.test(key)||event[key]===undefined||(proxy[key]=event[key]);return compatible(proxy,event)}var undefined,_zid=1,slice=Array.prototype.slice,isFunction=$.isFunction,isString=function(obj){return"string"==typeof obj},handlers={},specialEvents={},focusinSupported="onfocusin"in window,focus={focus:"focusin",blur:"focusout"},hover={mouseenter:"mouseover",mouseleave:"mouseout"};specialEvents.click=specialEvents.mousedown=specialEvents.mouseup=specialEvents.mousemove="MouseEvents",$.event={add:add,remove:remove},$.proxy=function(fn,context){var args=2 in arguments&&slice.call(arguments,2);if(isFunction(fn)){var proxyFn=function(){return fn.apply(context,args?args.concat(slice.call(arguments)):arguments)};return proxyFn._zid=zid(fn),proxyFn}if(isString(context))return args?(args.unshift(fn[context],fn),$.proxy.apply(null,args)):$.proxy(fn[context],fn);throw new TypeError("expected function")},$.fn.bind=function(event,data,callback){return this.on(event,data,callback)},$.fn.unbind=function(event,callback){return this.off(event,callback)},$.fn.one=function(event,selector,data,callback){return this.on(event,selector,data,callback,1)};var returnTrue=function(){return!0},returnFalse=function(){return!1},ignoreProperties=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,eventMethods={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};$.fn.delegate=function(selector,event,callback){return this.on(event,selector,callback)},$.fn.undelegate=function(selector,event,callback){return this.off(event,selector,callback)},$.fn.live=function(event,callback){return $(document.body).delegate(this.selector,event,callback),this},$.fn.die=function(event,callback){return $(document.body).undelegate(this.selector,event,callback),this},$.fn.on=function(event,selector,data,callback,one){var autoRemove,delegator,$this=this;return event&&!isString(event)?($.each(event,function(type,fn){$this.on(type,selector,data,fn,one)}),$this):(isString(selector)||isFunction(callback)||callback===!1||(callback=data,data=selector,selector=undefined),callback!==undefined&&data!==!1||(callback=data,data=undefined),callback===!1&&(callback=returnFalse),$this.each(function(_,element){one&&(autoRemove=function(e){return remove(element,e.type,callback),callback.apply(this,arguments)}),selector&&(delegator=function(e){var evt,match=$(e.target).closest(selector,element).get(0);if(match&&match!==element)return evt=$.extend(createProxy(e),{currentTarget:match,liveFired:element}),(autoRemove||callback).apply(match,[evt].concat(slice.call(arguments,1)))}),add(element,event,callback,data,selector,delegator||autoRemove)}))},$.fn.off=function(event,selector,callback){var $this=this;return event&&!isString(event)?($.each(event,function(type,fn){$this.off(type,selector,fn)}),$this):(isString(selector)||isFunction(callback)||callback===!1||(callback=selector,selector=undefined),callback===!1&&(callback=returnFalse),$this.each(function(){remove(this,event,callback,selector)}))},$.fn.trigger=function(event,args){return event=isString(event)||$.isPlainObject(event)?$.Event(event):compatible(event),event._args=args,this.each(function(){event.type in focus&&"function"==typeof this[event.type]?this[event.type]():"dispatchEvent"in this?this.dispatchEvent(event):$(this).triggerHandler(event,args)})},$.fn.triggerHandler=function(event,args){var e,result;return this.each(function(i,element){e=createProxy(isString(event)?$.Event(event):event),e._args=args,e.target=element,$.each(findHandlers(element,event.type||event),function(i,handler){if(result=handler.proxy(e),e.isImmediatePropagationStopped())return!1})}),result},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(event){$.fn[event]=function(callback){return 0 in arguments?this.bind(event,callback):this.trigger(event)}}),$.Event=function(type,props){isString(type)||(props=type,type=props.type);var event=document.createEvent(specialEvents[type]||"Events"),bubbles=!0;if(props)for(var name in props)"bubbles"==name?bubbles=!!props[name]:event[name]=props[name];return event.initEvent(type,bubbles,!0),compatible(event)}}(Zepto),function(){try{getComputedStyle(void 0)}catch(e){var nativeGetComputedStyle=getComputedStyle;window.getComputedStyle=function(element,pseudoElement){try{return nativeGetComputedStyle(element,pseudoElement)}catch(e){return null}}}}(),function($,undefined){function dasherize(str){return str.replace(/([A-Z])/g,"-$1").toLowerCase()}function normalizeEvent(name){return eventPrefix?eventPrefix+name:name.toLowerCase()}var eventPrefix,transform,transitionProperty,transitionDuration,transitionTiming,transitionDelay,animationName,animationDuration,animationTiming,animationDelay,prefix="",vendors={Webkit:"webkit",Moz:"",O:"o"},testEl=document.createElement("div"),supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,cssReset={};void 0===testEl.style.transform&&$.each(vendors,function(vendor,event){if(void 0!==testEl.style[vendor+"TransitionProperty"])return prefix="-"+vendor.toLowerCase()+"-",eventPrefix=event,!1}),transform=prefix+"transform",cssReset[transitionProperty=prefix+"transition-property"]=cssReset[transitionDuration=prefix+"transition-duration"]=cssReset[transitionDelay=prefix+"transition-delay"]=cssReset[transitionTiming=prefix+"transition-timing-function"]=cssReset[animationName=prefix+"animation-name"]=cssReset[animationDuration=prefix+"animation-duration"]=cssReset[animationDelay=prefix+"animation-delay"]=cssReset[animationTiming=prefix+"animation-timing-function"]="",$.fx={off:void 0===eventPrefix&&void 0===testEl.style.transitionProperty,speeds:{_default:400,fast:200,slow:600},cssPrefix:prefix,transitionEnd:normalizeEvent("TransitionEnd"),animationEnd:normalizeEvent("AnimationEnd")},$.fn.animate=function(properties,duration,ease,callback,delay){return $.isFunction(duration)&&(callback=duration,ease=void 0,duration=void 0),$.isFunction(ease)&&(callback=ease,ease=void 0),$.isPlainObject(duration)&&(ease=duration.easing,callback=duration.complete,delay=duration.delay,duration=duration.duration),duration&&(duration=("number"==typeof duration?duration:$.fx.speeds[duration]||$.fx.speeds._default)/1e3),delay&&(delay=parseFloat(delay)/1e3),this.anim(properties,duration,ease,callback,delay)},$.fn.anim=function(properties,duration,ease,callback,delay){var key,cssProperties,wrappedCallback,cssValues={},transforms="",that=this,endEvent=$.fx.transitionEnd,fired=!1;if(void 0===duration&&(duration=$.fx.speeds._default/1e3),void 0===delay&&(delay=0),$.fx.off&&(duration=0),"string"==typeof properties)cssValues[animationName]=properties,cssValues[animationDuration]=duration+"s",cssValues[animationDelay]=delay+"s",cssValues[animationTiming]=ease||"linear",endEvent=$.fx.animationEnd;else{cssProperties=[]
;for(key in properties)supportedTransforms.test(key)?transforms+=key+"("+properties[key]+") ":(cssValues[key]=properties[key],cssProperties.push(dasherize(key)));transforms&&(cssValues[transform]=transforms,cssProperties.push(transform)),duration>0&&"object"==typeof properties&&(cssValues[transitionProperty]=cssProperties.join(", "),cssValues[transitionDuration]=duration+"s",cssValues[transitionDelay]=delay+"s",cssValues[transitionTiming]=ease||"linear")}return wrappedCallback=function(event){if(void 0!==event){if(event.target!==event.currentTarget)return;$(event.target).unbind(endEvent,wrappedCallback)}else $(this).unbind(endEvent,wrappedCallback);fired=!0,$(this).css(cssReset),callback&&callback.call(this)},duration>0&&(this.bind(endEvent,wrappedCallback),setTimeout(function(){fired||wrappedCallback.call(that)},1e3*(duration+delay)+25)),this.size()&&this.get(0).clientLeft,this.css(cssValues),duration<=0&&setTimeout(function(){that.each(function(){wrappedCallback.call(this)})},0),this},testEl=null}(Zepto),function($,undefined){function anim(el,speed,opacity,scale,callback){"function"!=typeof speed||callback||(callback=speed,speed=undefined);var props={opacity:opacity};return scale&&(props.scale=scale,el.css($.fx.cssPrefix+"transform-origin","0 0")),el.animate(props,speed,null,callback)}function hide(el,speed,scale,callback){return anim(el,speed,0,scale,function(){origHide.call($(this)),callback&&callback.call(this)})}var origShow=(window.document,$.fn.show),origHide=$.fn.hide,origToggle=$.fn.toggle;$.fn.show=function(speed,callback){return origShow.call(this),speed===undefined?speed=0:this.css("opacity",0),anim(this,speed,1,"1,1",callback)},$.fn.hide=function(speed,callback){return speed===undefined?origHide.call(this):hide(this,speed,"0,0",callback)},$.fn.toggle=function(speed,callback){return speed===undefined||"boolean"==typeof speed?origToggle.call(this,speed):this.each(function(){var el=$(this);el["none"==el.css("display")?"show":"hide"](speed,callback)})},$.fn.fadeTo=function(speed,opacity,callback){return anim(this,speed,opacity,null,callback)},$.fn.fadeIn=function(speed,callback){var target=this.css("opacity");return target>0?this.css("opacity",0):target=1,origShow.call(this).fadeTo(speed,target,callback)},$.fn.fadeOut=function(speed,callback){return hide(this,speed,null,callback)},$.fn.fadeToggle=function(speed,callback){return this.each(function(){var el=$(this);el[0==el.css("opacity")||"none"==el.css("display")?"fadeIn":"fadeOut"](speed,callback)})}}(Zepto),function($){function getData(node,name){var id=node[exp],store=id&&data[id];if(void 0===name)return store||setData(node);if(store){if(name in store)return store[name];var camelName=camelize(name);if(camelName in store)return store[camelName]}return dataAttr.call($(node),name)}function setData(node,name,value){var id=node[exp]||(node[exp]=++$.uuid),store=data[id]||(data[id]=attributeData(node));return void 0!==name&&(store[camelize(name)]=value),store}function attributeData(node){var store={};return $.each(node.attributes||emptyArray,function(i,attr){0==attr.name.indexOf("data-")&&(store[camelize(attr.name.replace("data-",""))]=$.zepto.deserializeValue(attr.value))}),store}var data={},dataAttr=$.fn.data,camelize=$.camelCase,exp=$.expando="Zepto"+ +new Date,emptyArray=[];$.fn.data=function(name,value){return void 0===value?$.isPlainObject(name)?this.each(function(i,node){$.each(name,function(key,value){setData(node,key,value)})}):0 in this?getData(this[0],name):void 0:this.each(function(){setData(this,name,value)})},$.data=function(elem,name,value){return $(elem).data(name,value)},$.hasData=function(elem){var id=elem[exp],store=id&&data[id];return!!store&&!$.isEmptyObject(store)},$.fn.removeData=function(names){return"string"==typeof names&&(names=names.split(/\s+/)),this.each(function(){var id=this[exp],store=id&&data[id];store&&$.each(names||store,function(key){delete store[names?camelize(this):key]})})},["remove","empty"].forEach(function(methodName){var origFn=$.fn[methodName];$.fn[methodName]=function(){var elements=this.find("*");return"remove"===methodName&&(elements=elements.add(this)),elements.removeData(),origFn.call(this)}})}(Zepto)}(this);var Curator=function(){"use strict";function nanoajax(params,callback){function cb(statusCode,responseText){return function(){called||(callback(void 0===req.status?statusCode:req.status,0===req.status?"Error":req.response||req.responseText||responseText,req),called=!0)}}var headers=params.headers||{},body=params.body,method=params.method||(body?"POST":"GET"),called=!1,req=getRequest(params.cors);req.open(method,params.url,!0);var success=req.onload=cb(200);req.onreadystatechange=function(){4===req.readyState&&success()},req.onerror=cb(null,"Error"),req.ontimeout=cb(null,"Timeout"),req.onabort=cb(null,"Abort"),body&&(setDefault(headers,"X-Requested-With","XMLHttpRequest"),window.FormData&&body instanceof window.FormData||setDefault(headers,"Content-Type","application/x-www-form-urlencoded"));for(var i=0,len=reqfields.length,field=void 0;i<len;i++)field=reqfields[i],void 0!==params[field]&&(req[field]=params[field]);for(var field$1 in headers)req.setRequestHeader(field$1,headers[field$1]);return req.send(body),req}function getRequest(cors){return cors&&window.XDomainRequest&&!/MSIE 1/.test(window.navigator.userAgent)?new window.XDomainRequest:window.XMLHttpRequest?new window.XMLHttpRequest:void 0}function setDefault(obj,key,value){obj[key]=obj[key]||value}function regexSupplant(regex,flags){return flags=flags||"","string"!=typeof regex&&(regex.global&&flags.indexOf("g")<0&&(flags+="g"),regex.ignoreCase&&flags.indexOf("i")<0&&(flags+="i"),regex.multiline&&flags.indexOf("m")<0&&(flags+="m"),regex=regex.source),new RegExp(regex.replace(/#\{(\w+)\}/g,function(match,name){var newRegex=twttr.txt.regexen[name]||"";return"string"!=typeof newRegex&&(newRegex=newRegex.source),newRegex}),flags)}function stringSupplant(str,values){return str.replace(/#\{(\w+)\}/g,function(match,name){return values[name]||""})}function addCharsToCharClass(charClass,start,end){var s=String.fromCharCode(start);return end!==start&&(s+="-"+String.fromCharCode(end)),charClass.push(s),charClass}function listCacheClear(){this.__data__=[],this.size=0}function eq(value,other){return value===other||value!==value&&other!==other}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}function ListCache(entries){var this$1=this,index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this$1.set(entry[0],entry[1])}}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function getRawTag(value){var isOwn=hasOwnProperty$1.call(value,symToStringTag$1),tag=value[symToStringTag$1];try{value[symToStringTag$1]=void 0}catch(e){}var result=nativeObjectToString.call(value);return isOwn?value[symToStringTag$1]=tag:delete value[symToStringTag$1],result}function objectToString(value){return nativeObjectToString$1.call(value)}function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag$1||tag==genTag$1||tag==asyncTag||tag==proxyTag}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function toSource(func){if(null!=func){try{return funcToString$1.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function baseIsNative(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function getValue(object,key){return null==object?void 0:object[key]}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty$2.call(data,key)?data[key]:void 0}function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty$3.call(data,key)}function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED$1:value,this}function Hash(entries){var this$1=this,index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this$1.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}function MapCache(entries){var this$1=this,index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this$1.set(entry[0],entry[1])}}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map$1||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty$4.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function isObjectLike(value){return null!=value&&"object"==typeof value}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag$1}function stubFalse(){return!1}function isIndex(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseUnary(func){return function(value){return func(value)}}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty$5.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto$9)}function overArg(func,transform){return function(arg){return func(transform(arg))}}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty$7.call(object,key)&&"constructor"!=key&&result.push(key);return result}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty$8.call(object,key))&&result.push(key);return result}function keysIn$1(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn$1(source),object)}function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}function stubArray(){return[]}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn$1,getSymbolsIn)}function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty$9.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag$2:return cloneArrayBuffer(object);case boolTag$2:case dateTag$2:return new Ctor(+object);case dataViewTag$3:return cloneDataView(object,isDeep);case float32Tag$2:case float64Tag$2:case int8Tag$2:case int16Tag$2:case int32Tag$2:case uint8Tag$2:case uint8ClampedTag$2:case uint16Tag$2:case uint32Tag$2:return cloneTypedArray(object,isDeep);case mapTag$3:return new Ctor;case numberTag$2:case stringTag$2:return new Ctor(object);case regexpTag$2:return cloneRegExp(object);case setTag$3:return new Ctor;case symbolTag$1:return cloneSymbol(object)}}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function baseIsMap(value){return isObjectLike(value)&&getTag$1(value)==mapTag$4}function baseIsSet(value){return isObjectLike(value)&&getTag$1(value)==setTag$4}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG$1,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG$1;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{var tag=getTag$1(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result),isSet(value)?value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))}):isMap(value)&&value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))});var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys,props=isArr?void 0:keysFunc(value);return arrayEach(props||value,function(subValue,key){props&&(key=subValue,subValue=value[key]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function toLocaleDateStringSupportsLocales(){if(null!==supportsDateStringSupportsLocales)return supportsDateStringSupportsLocales;supportsDateStringSupportsLocales=!1;try{(new Date).toLocaleDateString("i")}catch(e){supportsDateStringSupportsLocales="RangeError"===e.name}return supportsDateStringSupportsLocales}function throttle(callback,delay){function resolvePending(){leadingCall&&(leadingCall=!1,callback()),trailingCall&&proxy()}function timeoutCallback(){requestAnimationFrame$1(resolvePending)}function proxy(){var timeStamp=Date.now();if(leadingCall){if(timeStamp-lastCallTime<trailingTimeout)return;trailingCall=!0}else leadingCall=!0,trailingCall=!1,setTimeout(timeoutCallback,delay);lastCallTime=timeStamp}var leadingCall=!1,trailingCall=!1,lastCallTime=0;return proxy}function toFloat(value){return parseFloat(value)||0}function getBordersSize(styles){for(var arguments$1=arguments,positions=[],_i=1;_i<arguments.length;_i++)positions[_i-1]=arguments$1[_i];return positions.reduce(function(size,position){return size+toFloat(styles["border-"+position+"-width"])},0)}function getPaddings(styles){for(var positions=["top","right","bottom","left"],paddings={},_i=0,positions_1=positions;_i<positions_1.length;_i++){var position=positions_1[_i],value=styles["padding-"+position];paddings[position]=toFloat(value)}return paddings}function getSVGContentRect(target){var bbox=target.getBBox();return createRectInit(0,0,bbox.width,bbox.height)}function getHTMLElementContentRect(target){var clientWidth=target.clientWidth,clientHeight=target.clientHeight;if(!clientWidth&&!clientHeight)return emptyRect;var styles=getWindowOf(target).getComputedStyle(target),paddings=getPaddings(styles),horizPad=paddings.left+paddings.right,vertPad=paddings.top+paddings.bottom,width=toFloat(styles.width),height=toFloat(styles.height);if("border-box"===styles.boxSizing&&(Math.round(width+horizPad)!==clientWidth&&(width-=getBordersSize(styles,"left","right")+horizPad),Math.round(height+vertPad)!==clientHeight&&(height-=getBordersSize(styles,"top","bottom")+vertPad)),!isDocumentElement(target)){var vertScrollbar=Math.round(width+horizPad)-clientWidth,horizScrollbar=Math.round(height+vertPad)-clientHeight;1!==Math.abs(vertScrollbar)&&(width-=vertScrollbar),1!==Math.abs(horizScrollbar)&&(height-=horizScrollbar)}return createRectInit(paddings.left,paddings.top,width,height)}function isDocumentElement(target){return target===getWindowOf(target).document.documentElement}function getContentRect(target){return isBrowser?isSVGGraphicsElement(target)?getSVGContentRect(target):getHTMLElementContentRect(target):emptyRect}function createReadOnlyRect(_a){var x=_a.x,y=_a.y,width=_a.width,height=_a.height,Constr="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,rect=Object.create(Constr.prototype);return defineConfigurable(rect,{x:x,y:y,width:width,height:height,top:y,right:x+width,bottom:height+y,left:x}),rect}function createRectInit(x,y,width,height){return{x:x,y:y,width:width,height:height}}function finallyConstructor(callback){var constructor=this.constructor;return this.then(function(value){return constructor.resolve(callback()).then(function(){return value})},function(reason){return constructor.resolve(callback()).then(function(){return constructor.reject(reason)})})}function isArray$2(x){return Boolean(x&&void 0!==x.length)}function noop(){}function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function Promise$2(fn){if(!(this instanceof Promise$2))throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(fn,this)}function handle(self,deferred){for(;3===self._state;)self=self._value;if(0===self._state)return void self._deferreds.push(deferred);self._handled=!0,Promise$2._immediateFn(function(){var cb=1===self._state?deferred.onFulfilled:deferred.onRejected;if(null===cb)return void(1===self._state?resolve:reject)(deferred.promise,self._value);var ret;try{ret=cb(self._value)}catch(e){return void reject(deferred.promise,e)}resolve(deferred.promise,ret)})}function resolve(self,newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if(newValue instanceof Promise$2)return self._state=3,self._value=newValue,void finale(self);if("function"==typeof then)return void doResolve(bind(then,newValue),self)}self._state=1,self._value=newValue,finale(self)}catch(e){reject(self,e)}}function reject(self,newValue){self._state=2,self._value=newValue,finale(self)}function finale(self){2===self._state&&0===self._deferreds.length&&Promise$2._immediateFn(function(){self._handled||Promise$2._unhandledRejectionFn(self._value)});for(var i=0,len=self._deferreds.length;i<len;i++)handle(self,self._deferreds[i]);self._deferreds=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.promise=promise}function doResolve(fn,self){var done=!1;try{fn(function(value){done||(done=!0,resolve(self,value))},function(reason){done||(done=!0,reject(self,reason))})}catch(ex){if(done)return;done=!0,reject(self,ex)}}function assignMergeValue(object,key,value){(void 0===value||eq(object[key],value))&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag$3)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty$10.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString$2.call(Ctor)==objectCtorString}function safeGet(object,key){if(("constructor"!==key||"function"!=typeof object[key])&&"__proto__"!=key)return object[key]}function toPlainObject(value){return copyObject(value,keysIn$1(value))}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked)return void assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):void 0,isCommon=void 0===newValue;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):isBuff?(isCommon=!1,newValue=cloneBuffer(srcValue,!0)):isTyped?(isCommon=!1,newValue=cloneTypedArray(srcValue,!0)):newValue=[]:isPlainObject(srcValue)||isArguments(srcValue)?(newValue=objValue,isArguments(objValue)?newValue=toPlainObject(objValue):isObject(objValue)&&!isFunction(objValue)||(newValue=initCloneObject(srcValue))):isCommon=!1}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue)}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){if(stack||(stack=new Stack),isObject(srcValue))baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):void 0;void 0===newValue&&(newValue=srcValue),assignMergeValue(object,key,newValue)}},keysIn$1)}function identity(value){return value}function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}function constant(value){return function(){return value}}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}function isNumber(value){return"number"==typeof value||isObjectLike(value)&&baseGetTag(value)==numberTag$3}var reqfields=["responseType","withCredentials","timeout","onprogress"],arrayFill=function(array,value,start,end){if(!Array.isArray(array))throw new TypeError("array is not a Array");var length=array.length;start=parseInt(start,10)||0,end=void 0===end?length:parseInt(end,10)||0;var i,l;for(i=start<0?Math.max(length+start,0):Math.min(start,length),l=end<0?Math.max(length+end,0):Math.min(end,length);i<l;i++)array[i]=value;return array};if(Array.prototype.fill||(Array.prototype.fill=function(value,start,end){return arrayFill(this,value,start,end)}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function keys(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;i<ii;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}var twttr={};twttr.txt={},twttr.txt.regexen={};var HTML_ENTITIES={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};twttr.txt.htmlEscape=function(text){return text&&text.replace(/[&"'><]/g,function(character){return HTML_ENTITIES[character]})},twttr.txt.regexSupplant=regexSupplant,twttr.txt.stringSupplant=stringSupplant,twttr.txt.addCharsToCharClass=addCharsToCharClass
;var unicodeLettersAndMarks=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D/.source,unicodeNumbers=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,hashtagSpecialChars=/_\u200c\u200d\ua67e\u05be\u05f3\u05f4\uff5e\u301c\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u00b7/.source,hashTagSpecialChars2=/\.-/.source;twttr.txt.regexen.hashSigns=/[#]/,twttr.txt.regexen.hashtagAlpha=new RegExp("["+unicodeLettersAndMarks+"]"),twttr.txt.regexen.hashtagAlphaNumeric=new RegExp("["+unicodeLettersAndMarks+unicodeNumbers+hashtagSpecialChars+hashTagSpecialChars2+"]"),twttr.txt.regexen.endHashtagMatch=regexSupplant(/^(?:#{hashSigns}|:\/\/)/),twttr.txt.regexen.hashtagBoundary=new RegExp("(?:^|$|[^&"+unicodeLettersAndMarks+unicodeNumbers+hashtagSpecialChars+"])"),twttr.txt.regexen.validHashtag=regexSupplant(/[#]+(#{hashtagAlphaNumeric}*)/gi);var EventBus=function(){this.listeners={},this.alive=!0};EventBus.prototype.on=function(type,callback,scope){for(var arguments$1=arguments,args=[],numOfArgs=arguments.length,i=0;i<numOfArgs;i++)args.push(arguments$1[i]);args=args.length>3?args.splice(3,args.length-1):[],void 0!==this.listeners[type]?this.listeners[type].push({scope:scope,callback:callback,args:args}):this.listeners[type]=[{scope:scope,callback:callback,args:args}]},EventBus.prototype.off=function(type,callback,scope){var this$1=this;if(void 0!==this.listeners[type]){for(var numOfCallbacks=this.listeners[type].length,newArray=[],i=0;i<numOfCallbacks;i++){var listener=this$1.listeners[type][i];listener.scope===scope&&listener.callback===callback||newArray.push(listener)}this.listeners[type]=newArray}},EventBus.prototype.has=function(type,callback,scope){var this$1=this;if(void 0!==this.listeners[type]){var numOfCallbacks=this.listeners[type].length;if(void 0===callback&&void 0===scope)return numOfCallbacks>0;for(var i=0;i<numOfCallbacks;i++){var listener=this$1.listeners[type][i];if((!scope||listener.scope===scope)&&listener.callback===callback)return!0}}return!1},EventBus.prototype.trigger=function(type){for(var arguments$1=arguments,this$1=this,event={type:type},args=[],i=1;i<arguments.length;i++)args.push(arguments$1[i]);if(args=[event].concat(args),void 0!==this.listeners[type])for(var numOfCallbacks=this.listeners[type].length,i$1=0;i$1<numOfCallbacks;i$1++){var listener=this$1.listeners[type][i$1];if(listener&&listener.callback){var concatArgs=args.concat(listener.args);listener.callback.apply(listener.scope,concatArgs)}}},EventBus.prototype.getEvents=function(){var this$1=this,str="";for(var type in this$1.listeners)for(var numOfCallbacks=this$1.listeners[type].length,i=0;i<numOfCallbacks;i++){var listener=this$1.listeners[type][i];str+=listener.scope&&listener.scope.className?listener.scope.className:"anonymous",str+=" listen for '"+type+"'\n"}return str},EventBus.prototype.destroy=function(){delete this.listeners,this.alive=!1};var Globals={POST_CLICK_ACTION_OPEN_POPUP:"open-popup",POST_CLICK_ACTION_GOTO_SOURCE:"goto-source",POST_CLICK_ACTION_NOTHING:"nothing",NETWORK_RSS:10},base={lang:"en",debug:!1,hidePoweredBy:!1,forceHttps:!1,feed:{id:"",apiEndpoint:"https://api.curator.io",postsPerPage:12,params:{},limit:25,showAds:!0},widget:{autoLoadNew:!1},post:{template:"post-general",showTitles:!0,showShare:!0,showComments:!1,showLikes:!1,autoPlayVideos:!1,clickAction:"open-popup",clickReadMoreAction:"open-popup"},popup:{template:"popup",templateWrapper:"popup-wrapper",autoPlayVideos:!1,deepLink:!1},filter:{template:"filter",showNetworks:!1,showSources:!1,showAll:!1,default:"all",limitPosts:!1,limitPostNumber:0,period:""}},z=null;"undefined"!=typeof $local?z=$local:window.$crtZepto?z=window.$crtZepto:window.Zepto?z=window.Zepto:window.jQuery&&(z=window.jQuery),z||window.alert("Curator requires jQuery or Zepto. \n\nPlease include jQuery in your HTML before the Curator widget script tag.\n\nVisit http://jquery.com/download/ to get the latest version");var z$1=z,config=z$1.extend(!0,{},base,{post:{template:"post-general",animate:!0,maxHeight:0},widget:{template:"widget-waterfall",colWidth:250,colGutter:0,showLoadMore:!0,continuousScroll:!1,postsPerPage:12,animate:!1,progressiveLoad:!1,lazyLoad:!1}}),config$1=z$1.extend(!0,{},base,{post:{template:"post-general",matchHeights:!1,showComments:!1,showLikes:!1,maxHeight:0,minWidth:250},widget:{template:"widget-carousel",autoPlay:!0,autoLoad:!0,infinite:!1,controlsOver:!1,controlsShowOnHover:!1,speed:5e3,duration:700,panesVisible:null,useCss:!0,moveAmount:0,easing:"ease-in-out",progressiveLoad:!1,lazyLoad:!1}}),config$3=z$1.extend(!0,{},base,{post:{template:"post-grid",matchHeights:!1,minWidth:200,imageHeight:"100%"},widget:{template:"widget-grid-carousel",autoPlay:!0,autoLoad:!0,infinite:!1,rows:2,controlsOver:!0,controlsShowOnHover:!1,speed:5e3,duration:700,panesVisible:null,useCss:!0,moveAmount:0,easing:null}});z$1.zepto&&(config$3.widget.easing="ease-in-out");var config$5=z$1.extend(!0,{},base,{post:{template:"post-grid",imageHeight:"100%",minWidth:250},widget:{animate:!1,continuousScroll:!1,continuousScrollOffset:50,rows:3,template:"widget-grid",showLoadMore:!1,loadMoreRows:1},responsive:{480:{widget:{loadMoreRows:4}},768:{widget:{loadMoreRows:2}}}}),config$6=z$1.extend(!0,{},base,{post:{template:"post-general",matchHeights:!1,showComments:!1,showLikes:!1,maxHeight:0,minWidth:2e3},widget:{template:"widget-carousel",autoPlay:!0,autoLoad:!0,infinite:!1,controlsOver:!0,controlsShowOnHover:!0,speed:5e3,duration:700,panesVisible:null,useCss:!0,moveAmount:0,easing:null}});z$1.zepto&&(config$6.widget.easing="ease-in-out");var config$7=z$1.extend(!0,{},base,{post:{template:"post-list",imageWidth:"25%",showComments:!1,showLikes:!1},widget:{template:"widget-list",animate:!1,showLoadMore:!0,continuousScroll:!1,postsPerPage:12}}),arrayProto=Array.prototype,splice=arrayProto.splice;ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol=root.Symbol,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty,nativeObjectToString=objectProto$1.toString,symToStringTag$1=Symbol?Symbol.toStringTag:void 0,objectProto$2=Object.prototype,nativeObjectToString$1=objectProto$2.toString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol?Symbol.toStringTag:void 0,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]",coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}(),funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Map$1=getNative(root,"Map"),nativeCreate=getNative(Object,"create"),HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty,HASH_UNDEFINED$1="__lodash_hash_undefined__";Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,argsTag$1="[object Arguments]",objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty,propertyIsEnumerable=objectProto$7.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$6.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/,MAX_SAFE_INTEGER$1=9007199254740991,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty,objectProto$9=Object.prototype,nativeKeys=overArg(Object.keys,Object),objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty,objectProto$10=Object.prototype,hasOwnProperty$8=objectProto$10.hasOwnProperty,freeExports$2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0,objectProto$11=Object.prototype,propertyIsEnumerable$1=objectProto$11.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)}))}:stubArray,getPrototype=overArg(Object.getPrototypeOf,Object),nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols$1?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,DataView=getNative(root,"DataView"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap$1=getNative(root,"WeakMap"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map$1&&"[object Map]"!=getTag(new Map$1)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap$1&&"[object WeakMap]"!=getTag(new WeakMap$1))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result});var getTag$1=getTag,objectProto$12=Object.prototype,hasOwnProperty$9=objectProto$12.hasOwnProperty,Uint8Array=root.Uint8Array,reFlags=/\w*$/,symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0,boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",objectCreate=Object.create,baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=void 0,result}}(),mapTag$4="[object Map]",nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$4="[object Set]",nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",objectTag="[object Object]",cloneableTags={};cloneableTags[argsTag]=cloneableTags["[object Array]"]=cloneableTags["[object ArrayBuffer]"]=cloneableTags["[object DataView]"]=cloneableTags["[object Boolean]"]=cloneableTags["[object Date]"]=cloneableTags["[object Float32Array]"]=cloneableTags["[object Float64Array]"]=cloneableTags["[object Int8Array]"]=cloneableTags["[object Int16Array]"]=cloneableTags["[object Int32Array]"]=cloneableTags["[object Map]"]=cloneableTags["[object Number]"]=cloneableTags[objectTag]=cloneableTags["[object RegExp]"]=cloneableTags["[object Set]"]=cloneableTags["[object String]"]=cloneableTags["[object Symbol]"]=cloneableTags["[object Uint8Array]"]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags["[object Uint16Array]"]=cloneableTags["[object Uint32Array]"]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag]=cloneableTags["[object WeakMap]"]=!1;for(var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4,defaultColors={widgetBgColor:"transparent",bgColor:"#ffffff",borderColor:"#cccccc",iconColor:"#222222",textColor:"#222222",linkColor:"#999999",dateColor:"#000000"},generalSydney=function(colors){var bgColor=colors.bgColor,textColor=colors.textColor,iconColor=colors.iconColor,linkColor=colors.linkColor,borderColor=colors.borderColor;return{config:{post:{template:"post-general"}},styles:{widget:{backgroundColor:colors.widgetBgColor},post:{backgroundColor:bgColor,borderColor:borderColor,borderWidth:"1px",color:textColor},postText:{color:textColor},postTextLink:{color:linkColor},postName:{color:textColor,textDecoration:"none"},postUsername:{color:textColor},postIcon:{color:iconColor},postComments:{color:textColor},postShareIcons:{color:textColor},postDate:{color:textColor},loadMore:{color:textColor,backgroundColor:bgColor,borderColor:borderColor}}}},generalLondon=function(colors){var bgColor=colors.bgColor,textColor=colors.textColor,iconColor=colors.iconColor,linkColor=colors.linkColor,borderColor=colors.borderColor;return{config:{post:{template:"post-general-london"}},styles:{widget:{backgroundColor:colors.widgetBgColor},post:{backgroundColor:bgColor,borderColor:borderColor,borderWidth:"10px",color:textColor},postText:{color:textColor},postTextLink:{color:linkColor},postName:{color:textColor,textDecoration:"none"},postUsername:{color:textColor},postIcon:{color:iconColor},postComments:{color:textColor},postShareIcons:{color:textColor},postDate:{color:textColor},loadMore:{color:textColor,backgroundColor:bgColor,borderColor:borderColor},postMaxHeightReadMore:{background:"linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, "+bgColor+" 50%)"}}}},generalBerlin=function(colors){var bgColor=colors.bgColor,textColor=colors.textColor,iconColor=colors.iconColor,linkColor=colors.linkColor,borderColor=colors.borderColor;return{config:{post:{template:"post-general-berlin"}},styles:{widget:{backgroundColor:colors.widgetBgColor},post:{backgroundColor:"transparent",borderColor:"transparent",borderWidth:"0px",color:textColor},postText:{color:textColor},postTextLink:{color:linkColor},postName:{color:textColor,textDecoration:"none"},postUsername:{color:textColor},postIcon:{color:iconColor},postComments:{color:textColor},postShareIcons:{color:textColor},postDate:{color:textColor},loadMore:{color:textColor,backgroundColor:bgColor,borderColor:borderColor}}}},gridSydney=function(colors){var bgColor=colors.bgColor,textColor=colors.textColor,linkColor=colors.linkColor,borderColor=colors.borderColor;return{config:{post:{template:"post-grid"}},styles:{gridPost:{},gridPostContent:{backgroundColor:bgColor,color:textColor},gridPostText:{color:textColor},gridPostTextLink:{color:linkColor},gridPostHover:{backgroundColor:bgColor,color:textColor},gridPostHoverLink:{color:linkColor},gridPostIcon:{color:colors.iconColor},gridPostFooter:{backgroundColor:bgColor,borderTopColor:borderColor},loadMore:{color:textColor,backgroundColor:bgColor,borderColor:borderColor},gridPostDate:{color:colors.dateColor}}}},gridNewYork=function(colors){var bgColor=colors.bgColor,textColor=colors.textColor,linkColor=colors.linkColor,borderColor=colors.borderColor;return{config:{post:{template:"post-grid-new-york"}},styles:{gridPost:{padding:"10px",borderRadius:"10px"},gridPostContent:{backgroundColor:bgColor,color:textColor},gridPostText:{color:textColor},gridPostTextLink:{color:linkColor},gridPostHover:{backgroundColor:bgColor,color:textColor},gridPostHoverLink:{color:linkColor},gridPostIcon:{color:colors.iconColor},gridPostFooter:{backgroundColor:bgColor},loadMore:{color:textColor,backgroundColor:bgColor,borderColor:borderColor},gridPostDate:{color:colors.dateColor},cssRules:{".crt-grid-post-new-york .crt-post-footer .crt-post-fullname a,.crt-grid-post-new-york .crt-post-footer .crt-post-username a":{color:textColor}}}}},gridTokyo=function(colors){var bgColor=colors.bgColor,textColor=colors.textColor,linkColor=colors.linkColor,borderColor=colors.borderColor;return{config:{post:{template:"post-grid-tokyo"}},styles:{gridPost:{padding:"10px",borderRadius:"10px"},gridPostContent:{backgroundColor:bgColor,color:textColor},gridPostText:{color:textColor},gridPostTextLink:{color:linkColor},gridPostHover:{backgroundColor:bgColor,color:textColor},gridPostHoverLink:{color:linkColor},gridPostIcon:{color:colors.iconColor},gridPostFooter:{backgroundColor:bgColor},loadMore:{color:textColor,backgroundColor:bgColor,borderColor:borderColor},gridPostDate:{color:colors.dateColor}}}},listSydney=function(colors){var bgColor=colors.bgColor,textColor=colors.textColor,linkColor=colors.linkColor,borderColor=colors.borderColor,widgetBgColor=colors.widgetBgColor,iconColor=colors.iconColor;return{config:{},styles:{gridPost:{padding:"10px",borderRadius:"10px"},gridPostContent:{backgroundColor:bgColor,color:textColor},gridPostText:{color:textColor},gridPostTextLink:{color:linkColor},gridPostHover:{backgroundColor:bgColor,color:textColor},gridPostHoverLink:{color:linkColor},gridPostIcon:{color:iconColor},gridPostFooter:{backgroundColor:bgColor},loadMore:{color:textColor,backgroundColor:bgColor,borderColor:borderColor},cssRules:{".crt-post-content":{backgroundColor:bgColor},".crt-post-text p, .crt-list-post-text-wrap":{color:textColor},".crt-social-icon i":{color:iconColor},".crt-list-post, .crt-post":{borderRadius:"1px",borderColor:borderColor},".crt-post-content a":{color:linkColor},".crt-widget":{backgroundColor:widgetBgColor}}}}},themes={defaultColors:function(widgetTheme){var colors={};for(var key in defaultColors)colors[key]=defaultColors[key];return"berlin"===widgetTheme&&(colors.bgColor="transparent"),"london"===widgetTheme&&(colors.borderColor=colors.bgColor),cloneDeep(colors)},widgetThemes:function(widgetType){return themes.widgetThemeOptions[widgetType]?Object.keys(themes.widgetThemeOptions[widgetType]):(console.error("Unknown Widget Type: "+widgetType),[])},defaultTheme:function(widgetType){var options=themes.widgetThemes(widgetType);return options?options[0]:(console.error("Unknown Widget Type: "+widgetType),"sydney")},typeConfig:function(widgetType){return themes.widgetConfigs[widgetType]?cloneDeep(themes.widgetConfigs[widgetType]):{}},themeConfig:function(widgetType,widgetTheme){if(themes.widgetThemeOptions[widgetType]&&themes.widgetThemeOptions[widgetType][widgetTheme]){return cloneDeep(themes.widgetThemeOptions[widgetType][widgetTheme]({}).config)}return{}},themeStyles:function(widgetType,widgetTheme,colors){if(themes.widgetThemeOptions[widgetType]&&themes.widgetThemeOptions[widgetType][widgetTheme]){return cloneDeep(themes.widgetThemeOptions[widgetType][widgetTheme](colors).styles)}return{}},widgetConfigs:{Waterfall:config,Carousel:config$1,Panel:config$6,Grid:config$5,GridCarousel:config$3,List:config$7},widgetThemeOptions:{Waterfall:{sydney:generalSydney,berlin:generalBerlin,london:generalLondon},Carousel:{sydney:generalSydney,berlin:generalBerlin,london:generalLondon},Panel:{sydney:generalSydney,berlin:generalBerlin,london:generalLondon},Grid:{sydney:gridSydney,"new-york":gridNewYork,tokyo:gridTokyo},GridCarousel:{sydney:gridSydney,"new-york":gridNewYork,tokyo:gridTokyo},List:{sydney:listSydney}}},CommonUtils={postUrl:function(post){return post.url&&""!==post.url&&"''"!==post.url?post.url:post.network_id+""=="1"?"https://twitter.com/"+post.user_screen_name+"/status/"+post.source_identifier:""},center:function(w,h,bound){var s=window.screen,b=bound||{},bH=b.height||s.height,bW=b.width||s.height;return{top:bH?(bH-h)/2:0,left:bW?(bW-w)/2:0}},popup:function(mypage,myname,w,h,scroll){var position=this.center(w,h),settings="height="+h+",width="+w+",top="+position.top+",left="+position.left+",scrollbars="+scroll+",resizable";window.open(mypage,myname,settings)},tinyparser:function(string,obj){return string.replace(/\{\{(.*?)\}\}/g,function(a,b){return obj&&void 0!==obj[b]?encodeURIComponent(obj[b]):""})},debounce:function(func,wait,immediate){function debounced(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;window.clearTimeout(timeout),timeout=window.setTimeout(later,wait),callNow&&func.apply(context,args)}function cancel(){null!==timeout&&window.clearTimeout(timeout),timeout=null}var timeout=null;return debounced.cancel=cancel,debounced},uId:function(){return"_"+Math.random().toString(36).substr(2,9)}},StringUtils={camelize:function(s){return s.replace(/(?:^|[-_])(\w)/g,function(_,c){return c?c.toUpperCase():""})},camelToDash:function(s){return s.replace(/([A-Z])/g,function($1,p1,pos){return(pos>0?"-":"")+$1.toLowerCase()})},twitterLinks:function(s){return s=s.replace(/[@]+[A-Za-z0-9-_]+/g,function(u){var username=u.replace("@","");return StringUtils.url("https://twitter.com/"+username,u)}),s=s.replace(twttr.txt.regexen.validHashtag,function(t){var tag=t.replace("#","%23");return StringUtils.url("https://twitter.com/search?q="+tag,t)})},instagramLinks:function(s){return s=s.replace(/[@]+[A-Za-z0-9-_\.]+/g,function(u){var username=u.replace("@","");return StringUtils.url("https://www.instagram.com/"+username+"/",u)}),s=s.replace(twttr.txt.regexen.validHashtag,function(t){var tag=t.replace("#","");return StringUtils.url("https://www.instagram.com/explore/tags/"+tag+"/",t)})},facebookLinks:function(s){return s=s.replace(/[@]+[A-Za-z0-9-_]+/g,function(u){var username=u.replace("@","");return StringUtils.url("https://www.facebook.com/"+username+"/",u)}),s=s.replace(/[#]+[A-Za-z0-9-_\u00fc\u00c4\u00e4\u00d6\u00f6\u00dc\u00fc\u00df]+/g,function(t){var tag=t.replace("#","%23");return StringUtils.url("https://www.facebook.com/search/top/?q="+tag,t)})},removeScripts:function(s,replace){return replace=replace||"",s=s.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(){return replace})},linksToHref:function(s){return s=s.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+[A-Za-z0-9-_:%&~\?\/=]+/g,function(url){return StringUtils.url(url)})},url:function(s,t){return t=t||s,'<a href="'+s+'" target="_blank">'+t+"</a>"},
forceHttps:function(s){return s?s.replace("http://","https://"):s},youtubeVideoId:function(url){var match=url.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);if(match&&11===match[7].length)return match[7];var match2=url.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/))([^#\&\?]*).*/);return!(!match2||11!==match2[6].length)&&match2[6]},vimeoVideoId:function(url){var match=url.match(/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/);return!!(match&&match.length>=2)&&match[1]},filterHtml:function(html){try{var div=document.createElement("div");div.innerHTML=html;return div.textContent||div.innerText||""}catch(e){return html}},isHtml:function(str){return 0===str.trim().indexOf("<")},nl2br:function(s){return s=s.trim(),s=s.replace(/(?:\r\n|\r|\n)/g,"<br />")},replaceAll:function(str,find,replace){return str.split(find).join(replace)}},SocialFacebook={share:function(post){var obj=post;obj.url=CommonUtils.postUrl(post),obj.cleanText=StringUtils.filterHtml(post.text),0!==obj.url.indexOf("http")&&(obj.url=obj.image);var url2=CommonUtils.tinyparser("https://www.facebook.com/sharer/sharer.php?u={{url}}&d={{cleanText}}",obj);CommonUtils.popup(url2,"twitter","600","430","0")}},SocialTwitter={share:function(post){var obj=post;obj.url=CommonUtils.postUrl(post),obj.cleanText=StringUtils.filterHtml(post.text);var url2=CommonUtils.tinyparser("http://twitter.com/share?url={{url}}&text={{cleanText}}&hashtags={{hashtags}}",obj);CommonUtils.popup(url2,"twitter","600","430","0")}},Logger={debug:!1,log:function(s){window.console&&Logger.debug&&window.console.log(s)},error:function(s){window.console&&window.console.error(s)}},Events={FEED_LOADED:"feed:loaded",FEED_FAILED:"feed:failed",FILTER_CHANGED:"filter:changed",POSTS_LOADED:"posts:loaded",POSTS_FAILED:"posts:failed",POSTS_RENDERED:"posts:rendered",AD_CREATED:"ad:created",POST_CREATED:"post:created",POST_CLICK:"post:click",POST_CLICK_READ_MORE:"post:clickReadMore",POST_IMAGE_LOADED:"post:imageLoaded",POST_IMAGE_FAILED:"post:imageFailed",POST_LAYOUT_CHANGED:"post:layoutChanged",CAROUSEL_CHANGED:"carousel:changed",GRID_HEIGHT_CHANGED:"grid:heightChanged",PANE_HEIGHT_CHANGED:"pane:heightChanged",WIDGET_RESIZE:"widget:resize"},Templates={filter:'<div class="crt-filter"> \n<div class="crt-filter-networks" ref="networks">\n<ul class="crt-networks" ref="networksUl"> \n    <li class="crt-filter-label"><label><%=this._t(\'filter-network\')%>:</label></li>\n</ul>\n</div> \n<div class="crt-filter-sources" ref="sources">\n<ul class="crt-sources" ref="sourcesUl"> \n    <li class="crt-filter-label"><label><%=this._t(\'filter-source\')%>:</label></li>\n</ul>\n</div> \n</div>',popup:' \n<div class="crt-popup <%=this.cssClasses()%>"> \n    <a c-on:click-prevent="onClose" class="crt-close crt-icon-cancel"></a> \n    <a c-on:click-prevent="onPrevious" class="crt-previous crt-icon-left-open"></a> \n    <a c-on:click-prevent="onNext" class="crt-next crt-icon-right-open"></a> \n    <div class="crt-popup-left" ref="left">  \n        <div class="crt-video"> \n            <div class="crt-video-container">\n                <video preload="none" ref="video">\n                <source src="<%=video%>" type="video/mp4">\n                </video>\n                <img src="<%=image%>" alt="Image posted by <%=this.userScreenName()%> to <%=this.networkName()%>" />\n                <a c-on:click-prevent="onPlay" class="crt-play"><i class="crt-play-icon"></i></a> \n            </div> \n        </div> \n        <div class="crt-image"> \n            <img src="<%=image%>" alt="Image posted by <%=this.userScreenName()%> to <%=this.networkName()%>" /> \n        </div> \n        <div class="crt-pagination"><ul></ul></div>\n    </div> \n    <div class="crt-popup-right"> \n        <div class="crt-popup-header"> \n            <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n            <img src="<%=user_image%>" alt="<%=this._t("alt-profile-image",{userName:user_full_name})%>"  /> \n            <div class="crt-post-name"><span><%=user_full_name%></span><br/><a href="<%=this.userUrl()%>" target="_blank"><%=this.userScreenName()%></a></div> \n        </div> \n        <div class="crt-popup-text <%=this.contentTextClasses()%>"> \n            <div class="crt-popup-text-container"> \n                <p class="crt-date"><%=this.dateUrl()%></a></p> \n                <p class="crt-popup-text-title"><%=title%></p> \n                <div class="crt-popup-text-body"><%=this.parseText(text)%></div> \n                \n                <% if (spots_content){ %><div class="crt-popup-post-spots-content"><%=spots_title%><%=spots_content%></div><% } %>\n            </div> \n        </div> \n        <div class="crt-popup-read-more">\n            <a href="<%=url%>" target="_blank" class="crt-button"><%=this._t("go-to-original-post")%></a> \n        </div>\n        <div class="crt-popup-footer">\n            <div class="crt-popup-stats"><span><%=likes%></span> <%=this._t("likes", likes)%> <i class="sep"></i> <span><%=comments%></span> <%=this._t("comments", comments)%></div> \n            <div class="crt-post-share"><span class="ctr-share-hint"></span>\n            <a c-on:click-prevent="onShareFacebookClick" class="crt-share-facebook"><i class="crt-icon-facebook"></i></a>  \n            <a c-on:click-prevent="onShareTwitterClick" class="crt-share-twitter"><i class="crt-icon-twitter"></i></a>\n            </div>\n        </div> \n    </div> \n</div>',"popup-wrapper":'\n<div class="crt-popup-wrapper"> \n    <div class="crt-popup-wrapper-c"> \n        <div class="crt-popup-underlay" ref="underlay" c-on:click-prevent="onUnderlayClick"></div> \n        <div class="crt-popup-container" ref="container"></div> \n    </div> \n</div>',"post-general":' \n<div class="crt-post <%=this.cssClasses()%>" data-post="<%=id%>"> \n    <div class="crt-post-c" ref="postC" c-on:click="onPostClick">\n        <div class="crt-post-content">\n            <div class="crt-image crt-hitarea crt-post-content-image" > \n                <div class="crt-image-c" ref="imageContainer">\n                    <img src="<%= lazyLoad ? "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw" : image %>" ref="image" class="crt-post-image" alt="<%=this._t("alt-image-posted", {userName:user_screen_name, networkName:network_name})%>" />\n                </div>   \n                <span class="crt-play"><i class="crt-play-icon"></i></span> \n                <div class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></div> \n                <video preload="none" playsinline loop muted ref="video">\n                    <source src="<%=video%>" type="video/mp4">\n                </video>\n            </div> \n            <% if (spots_content){ %><div class="crt-post-spots-content"><%=spots_title%><%=spots_content%></div><% } %>\n            <div class="crt-post-header"> \n                <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=this.postHeading ()%></a></div>\n            </div> \n            <div class="crt-post-title"><%=title%></div> \n            <div class="crt-post-text"><%=this.parseText(text)%></div> \n        </div> \n        <div class="crt-comments-likes">\n            <span class="crt-likes"><%=likes%> <span><%=this._t("likes", likes)%></span></span>  <span class="crt-sep"></span> <span class="crt-comments"><%=comments%> <span><%=this._t("comments", comments)%></span></span> \n        </div>\n        <div class="crt-post-footer"> \n            <img class="crt-post-userimage" src="<%=user_image%>" alt="<%=this._t("alt-profile-image",{userName:user_full_name})%>" /> \n            <span class="crt-post-username"><a href="<%=this.userUrl()%>" target="_blank"><%=this.userScreenName()%></a></span>\n            <span class="crt-post-date"><%=this.dateUrl()%></span> \n            <div class="crt-post-share">\n                <span class="crt-share-hint"></span>\n                <a class="crt-share-facebook" c-on:click-prevent="onShareFacebookClick()"><i class="crt-icon-facebook"></i></a>  \n                <a class="crt-share-twitter" c-on:click-prevent="onShareTwitterClick()"><i class="crt-icon-twitter"></i></a>\n            </div>\n        </div> \n        <div class="crt-post-max-height-read-more"><a class="crt-post-read-more-button" c-on:click-prevent="onReadMoreClick"><%=this._t("read-more")%></a></div> \n    </div> \n</div>',"post-general-london":' \n<div class="crt-post crt-post-london crt-post-<%=this.networkIcon()%> <%=this.cssClasses()%>" data-post="<%=id%>"> \n    <div class="crt-post-c" ref="postC" c-on:click="onPostClick">\n        <div class="crt-post-content">\n            <div class="crt-image crt-hitarea crt-post-content-image" > \n                <div class="crt-image-c" ref="imageContainer">\n                    <img src="<%= lazyLoad ? "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw" : image %>" ref="image" class="crt-post-image" alt="<%=this._t("alt-image-posted", {userName:user_screen_name, networkName:network_name})%>" />\n                </div>   \n                <span class="crt-play"><i class="crt-play-icon"></i></span> \n                <div class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></div> \n                <video preload="none" playsinline loop muted ref="video">\n                    <source src="<%=video%>" type="video/mp4">\n                </video>\n            </div> \n            <% if (spots_content){ %><div class="crt-post-spots-content"><%=spots_title%><%=spots_content%></div><% } %>\n            <div class="crt-post-header"> \n                <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=this.postHeading ()%></a></div>\n            </div> \n            <div class="crt-post-title"><%=title%></div> \n            <div class="crt-post-text"><%=this.parseText(text)%></div>\n            <div class="crt-comments-likes">\n                <span class="crt-likes"><%=likes%> <span><%=this._t("likes", likes)%></span></span>  <span class="crt-sep"></span> <span class="crt-comments"><%=comments%> <span><%=this._t("comments", comments)%></span></span> \n            </div>\n        </div>\n        <div class="crt-post-footer"> \n            <img class="crt-post-userimage" src="<%=user_image%>" alt="<%=this._t("alt-profile-image",{userName:user_full_name})%>" /> \n            <span class="crt-post-username"><a href="<%=this.userUrl()%>" target="_blank"><%=this.userScreenName()%></a></span>\n            <span class="crt-post-date"><%=this.dateUrl()%></span> \n            <div class="crt-post-share">\n                <span class="crt-share-hint"></span>\n                <a class="crt-share-facebook" c-on:click-prevent="onShareFacebookClick()"><i class="crt-icon-facebook"></i></a>  \n                <a class="crt-share-twitter" c-on:click-prevent="onShareTwitterClick()"><i class="crt-icon-twitter"></i></a>\n            </div>\n        </div> \n        <div class="crt-post-max-height-read-more"><a class="crt-post-read-more-button" c-on:click-prevent="onReadMoreClick"><%=this._t("read-more")%></a></div> \n    </div> \n</div>',"post-general-berlin":' \n<div class="crt-post crt-post-berlin crt-post-<%=this.networkIcon()%> <%=this.cssClasses()%>" data-post="<%=id%>"> \n    <div class="crt-post-c" ref="postC" c-on:click="onPostClick">\n        <div class="crt-post-content">\n            <div class="crt-image crt-hitarea crt-post-content-image" > \n                <div class="crt-image-c" ref="imageContainer">\n                    <img src="<%= lazyLoad ? "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw" : image %>" ref="image" class="crt-post-image" alt="<%=this._t("alt-image-posted", {userName:user_screen_name, networkName:network_name})%>" />\n                </div>   \n                <span class="crt-play"><i class="crt-play-icon"></i></span> \n                <div class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></div> \n                <video preload="none" playsinline loop muted ref="video">\n                    <source src="<%=video%>" type="video/mp4">\n                </video>\n            </div> \n            <% if (spots_content){ %><div class="crt-post-spots-content"><%=spots_title%><%=spots_content%></div><% } %>\n            <div class="crt-post-header"> \n                <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=this.postHeading ()%></a></div>\n            </div> \n            <div class="crt-post-title"><%=title%></div> \n            <div class="crt-post-text"><%=this.parseText(text)%></div> \n            <div class="crt-comments-likes">\n                <span class="crt-likes"><%=likes%> <span><%=this._t("likes", likes)%></span></span>  <span class="crt-sep"></span> <span class="crt-comments"><%=comments%> <span><%=this._t("comments", comments)%></span></span> \n            </div>\n        </div>\n        <div class="crt-post-footer"> \n            <img class="crt-post-userimage" src="<%=user_image%>" alt="<%=this._t("alt-profile-image",{userName:user_full_name})%>" /> \n            <span class="crt-post-username"><a href="<%=this.userUrl()%>" target="_blank"><%=this.userScreenName()%></a></span>\n            <span class="crt-post-date"><%=this.dateUrl()%></span> \n            <div class="crt-post-share">\n                <span class="crt-share-hint"></span>\n                <a class="crt-share-facebook" c-on:click-prevent="onShareFacebookClick()"><i class="crt-icon-facebook"></i></a>  \n                <a class="crt-share-twitter" c-on:click-prevent="onShareTwitterClick()"><i class="crt-icon-twitter"></i></a>\n            </div>\n        </div> \n        <div class="crt-post-max-height-read-more"><a class="crt-post-read-more-button" c-on:click-prevent="onReadMoreClick"><%=this._t("read-more")%></a></div> \n    </div> \n</div>',"post-grid":'\n<div class="crt-grid-post crt-post-<%=id%> <%=this.cssClasses()%>" data-post="<%=id%>"> \n    <div class="crt-post-c" ref="postC" c-on:click="onPostClick"> \n        <div class="crt-grid-post-content" ref="spacer">\n            <span class="crt-play"><i class="crt-play-icon"></i></span> \n            <span class="crt-social-icon crt-social-icon-normal"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n            <div class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></div> \n            <div class="crt-grid-post-image" style="background-image:url(\'<%=image%>\');"></div> \n            <video preload="none" playsinline loop muted ref="video">\n                <source src="<%=video%>" type="video/mp4">\n            </video>\n            <div class="crt-grid-post-text">\n                <div class="crt-grid-post-text-wrap"> \n                    <div><%=this.parseText(text)%></div> \n                </div>  \n            </div>\n        </div>\n        <div class="crt-post-hover">\n            <div>\n                <div class="crt-post-header"> \n                    <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                    <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=this.postHeading()%></a></div>\n                </div> \n                <div class="crt-post-title"><%=title%></div> \n                <div class="crt-post-text"><%=this.parseText(text)%></div> \n                <div class="crt-post-read-more"><a href="#" class="crt-post-read-more-button"><%=this._t("read-more")%></a></div> \n                <div class="crt-post-footer">\n                    <% if (spots_content){ %><div class="crt-post-spots-content"><%=spots_title%><%=spots_content%></div><% } else { %>\n                    <img class="crt-post-userimage" src="<%=user_image%>" alt="<%=this._t("alt-profile-image",{userName:user_full_name})%>" /> \n                    <span class="crt-post-username"><a href="<%=this.userUrl()%>" target="_blank"><%=this.userScreenName()%></a></span>\n                    <span class="crt-date"><%=this.prettyDate(source_created_at)%></span> \n                    <div class="crt-post-share">\n                        <span class="crt-share-hint"></span>\n                        <a class="crt-share-facebook" c-on:click-prevent="onShareFacebookClick"><i class="crt-icon-facebook"></i></a>  \n                        <a class="crt-share-twitter" c-on:click-prevent="onShareTwitterClick"><i class="crt-icon-twitter"></i></a>\n                    </div>\n                    <% } %>\n                </div> \n            </div>\n        </div> \n    </div>\n</div>',"post-grid-new-york":'\n<div class="crt-grid-post crt-grid-post-new-york crt-post-<%=id%> <%=this.cssClasses()%>" data-post="<%=id%>">\n    <div class="crt-post-c" ref="postC" c-on:click="onPostClick"> \n        <div class="crt-grid-post-content" ref="spacer">\n            <div class="crt-grid-post-image" style="background-image:url(\'<%=image%>\');"></div> \n            <video preload="none" playsinline loop muted ref="video">\n                <source src="<%=video%>" type="video/mp4">\n            </video>\n            <div class="crt-grid-post-text">\n                <div class="crt-grid-post-text-wrap"> \n                    <div><%=this.parseText(text)%></div> \n                </div> \n            </div>\n            <span class="crt-play"><i class="crt-play-icon"></i></span> \n            <span class="crt-social-icon crt-social-icon-normal"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n            <div class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></div> \n            <span class="crt-date"><%=this.prettyDate(source_created_at)%></span> \n            <div class="crt-post-hover">\n                <div class="crt-post-title"><%=title%></div> \n                <div class="crt-post-text"><%=this.parseText(text)%></div> \n                <div class="crt-post-read-more"><button class="crt-post-read-more-button"><%=this._t("read-more")%></button></div> \n            </div> \n        </div>\n        <div class="crt-post-footer">\n            <img class="crt-post-userimage" src="<%=user_image%>" alt="<%=this._t("alt-profile-image",{userName:user_full_name})%>" /> \n            <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=this.postHeading ()%></a></div> \n            <span class="crt-post-username"><a href="<%=this.userUrl()%>" target="_blank"><%=this.userScreenName()%></a></span>\n             \n            <div class="crt-post-share">\n                <span class="crt-share-hint"></span>\n                <a class="crt-share-facebook" c-on:click-prevent="onShareFacebookClick"><i class="crt-icon-facebook"></i></a>  \n                <a class="crt-share-twitter" c-on:click-prevent="onShareTwitterClick"><i class="crt-icon-twitter"></i></a>\n            </div>\n        </div>\n    </div>\n</div>',"post-grid-minimal":'\n<div class="crt-grid-post crt-grid-post-v2 crt-post-<%=id%> <%=this.contentImageClasses()%> <%=this.contentTextClasses()%>" data-post="<%=id%>">\n    <div class="crt-post-c" ref="postC" c-on:click="onPostClick"> \n        <div class="crt-post-content"> \n            <div class="crt-hitarea" > \n                <div class="crt-grid-post-spacer" ref="spacer"></div> \n                <div class="crt-grid-post-image">\n                    <div class="crt-post-content-image" style="background-image:url(\'<%=image%>\');"></div> \n                    <span class="crt-play"><i class="crt-play-icon"></i></span> \n                    <span class="crt-social-icon crt-social-icon-normal"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                    <div class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></div> \n                </div>\n                <video preload="none" playsinline loop muted ref="video">\n                    <source src="<%=video%>" type="video/mp4">\n                </video>\n                <div class="crt-grid-post-text">\n                    <div class="crt-grid-post-text-wrap"> \n                        <div><%=this.parseText(text)%></div> \n                    </div> \n                    <span class="crt-social-icon crt-social-icon-normal"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                </div>\n                <div class="crt-post-hover">\n                    <div>\n                        <div class="crt-post-header"> \n                            <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                            <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=this.postHeading ()%></a></div>\n                        </div> \n                    </div>\n                </div> \n            </div> \n        </div> \n    </div>\n</div>',"post-grid-tokyo":'\n<div class="crt-grid-post crt-grid-post-tokyo crt-post-<%=id%> <%=this.cssClasses()%>" data-post="<%=id%>">\n    <div class="crt-post-c" ref="postC" c-on:click="onPostClick"> \n        <div class="crt-grid-post-content" ref="spacer">\n            <span class="crt-play"><i class="crt-play-icon"></i></span> \n            <div class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></div> \n            <div class="crt-grid-post-image" style="background-image:url(\'<%=image%>\');"></div> \n            <video preload="none" playsinline loop muted ref="video">\n                <source src="<%=video%>" type="video/mp4">\n            </video>\n            <div class="crt-grid-post-text">\n                <div class="crt-grid-post-text-wrap"> \n                    <div><%=this.parseText(text)%></div> \n                </div>  \n            </div>\n        </div>\n        <div class="crt-post-hover">\n            <div>\n                <div class="crt-post-header"> \n                    <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                    <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=user_full_name%></a></div>\n                    <div class="crt-date"><%=this.prettyDate(source_created_at)%></div> \n                    <div class="crt-post-share">\n                        <span class="crt-share-hint"></span>\n                        <a class="crt-share-facebook" c-on:click-prevent="onShareFacebookClick"><i class="crt-icon-facebook"></i></a>  \n                        <a class="crt-share-twitter" c-on:click-prevent="onShareTwitterClick"><i class="crt-icon-twitter"></i></a>\n                    </div>\n                </div>\n                <div class="crt-post-footer"></div> \n            </div>\n        </div> \n    </div>\n</div>',"post-grid-retro":' \n<div class="crt-post-c">\n    <div class="crt-post post<%=id%> <%=this.contentImageClasses()%> <%=this.contentTextClasses()%>"> \n        <div class="crt-post-content"> \n            <div class="crt-hitarea" > \n                <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="spacer" alt="<%=this._t("alt-image-posted", {userName:user_screen_name, networkName:network_name})%>" /> \n                <div class="crt-post-content-image" style="background-image:url(\'<%=image%>\');"></div> \n                <div class="crt-post-text-c"> \n                    <div class="crt-post-text"> \n                        <%=this.parseText(text)%> \n                    </div> \n                </div> \n                <a href="javascript:;" class="crt-play"><i class="crt-play-icon"></i></a> \n                <span class="crt-social-icon crt-social-icon-normal"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                <div class="crt-post-hover">\n                    <div class="crt-post-header"> \n                        <img src="<%=user_image%>" alt="<%=this._t("alt-profile-image",{userName:user_full_name})%>"  /> \n                        <div class="crt-post-name"><span><%=user_full_name%></span><br/><a href="<%=this.userUrl()%>" target="_blank">@<%=user_screen_name%></a></div> \n                    </div> \n                    <div class="crt-post-hover-text"> \n                        <%=this.parseText(text)%> \n                    </div> \n                    <span class="crt-social-icon crt-social-icon-hover"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                </div> \n            </div> \n        </div> \n    </div>\n</div>',"post-list":'\n<div class="crt-list-post crt-post-<%=id%> <%=this.contentImageClasses()%> <%=this.contentTextClasses()%>" data-post="<%=id%>"> \n    <div class="crt-post-c" ref="postC" c-on:click="onPostClick"> \n        <div class="crt-post-content"> \n            <div class="crt-list-post-image" ref="imageCol">\n                <div ref="imageContainer">\n                    <img class="crt-post-content-image" src="<%=image%>" ref="image" alt="<%=this._t("alt-image-posted", {userName:user_screen_name, networkName:network_name})%>" /> \n                    <a href="javascript:;" class="crt-play"><i class="crt-play-icon"></i></a> \n                    <span class="crt-social-icon crt-social-icon-normal"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                    <span class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></span>\n                </div> \n            </div>\n            <div class="crt-list-post-text">\n                <div class="crt-post-header"> \n                    <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=this.postHeading()%></a></div>\n                </div> \n                <div class="crt-list-post-text-wrap"> \n                    <div class="crt-post-title"><%=title%></div> \n                    <div><%=this.parseText(text)%></div> \n                    <div class="crt-comments-likes">\n                        <span class="crt-likes"><%=likes%> <span><%=this._t("likes", likes)%></span></span> <span class="crt-sep"></span> <span class="crt-comments"><%=comments%> <span><%=this._t("comments", comments)%></span></span> \n                    </div>\n                </div> \n                 <div class="crt-post-footer">\n                    <img class="crt-post-userimage" src="<%=user_image%>" alt="<%=this._t("alt-profile-image",{userName:user_full_name})%>" /> \n                    <span class="crt-post-username"><a href="<%=this.userUrl()%>" target="_blank">@<%=user_screen_name%></a></span>\n                    <span class="crt-post-date"><%=this.dateUrl()%></span> \n                    <div class="crt-post-share">\n                        <span class="crt-share-hint"></span>\n                        <a class="crt-share-facebook" c-on:click-prevent="onShareFacebookClick()"><i class="crt-icon-facebook"></i></a>  \n                        <a class="crt-share-twitter" c-on:click-prevent="onShareTwitterClick()"><i class="crt-icon-twitter"></i></a>\n                    </div>\n                </div>  \n            </div>\n        </div> \n    </div>\n</div>',"ad-general":' \n<div class="crt-post crt-ad ctr-ad-<%=slug%>" data-post="<%=slug%>"> \n    <div class="crt-post-c" ref="postC" c-on:click="onPostClick">\n        <div class="crt-post-content">\n            <div class="crt-image crt-hitarea crt-post-content-image" > \n                <div class="crt-image-c" ref="imageContainer">\n                    <img src="<%= lazyLoad ? "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw" : image %>" ref="image" class="crt-post-image" alt="Image posted by to <%=this.networkName()%>" />\n                </div>   \n                <span class="crt-play"><i class="crt-play-icon"></i></span> \n                <div class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></div> \n            </div> \n            <div class="crt-post-header"> \n                <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=title%></a></div>\n            </div> \n            <div class="crt-post-text" ref="text">-</div> \n        </div> \n    </div> \n</div>',"ad-grid":'\n<div class="crt-grid-post crt-grid-ad ctr-ad-<%=slug%>" data-add-slug="<%=slug%>">\n    <div class="crt-post-c" ref="postC" c-on:click="onPostClick"> \n        <div class="crt-grid-post-content" ref="spacer">\n            <span class="crt-social-icon crt-social-icon-normal"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n            <div class="crt-grid-post-image" style="background-image:url(\'<%=image%>\');"></div> \n            <div class="crt-grid-post-text">\n                <div class="crt-grid-post-text-wrap"> \n                    <div><%=this.parseText(text)%></div> \n                </div>  \n            </div>\n        </div>\n        <div class="crt-post-hover">\n            <div>\n                <div class="crt-post-header"> \n                    <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                    <div class="crt-post-fullname"><a href="<%=this.url%>" target="_blank"><%=title%></a></div>\n                </div> \n                <div class="crt-post-text"> \n                    <%=this.parseText(text)%> \n                </div> \n            </div>\n        </div> \n    </div>\n</div>',"widget-panel":'\n<div class="crt-carousel-feed">\n<div class="crt-carousel-stage" ref="stage">\n<div class="crt-carousel-slider" ref="slider">\n\n</div>\n</div>\n\n<button c-on:click-prevent="onPrevClick" type="button" data-role="none" class="crt-panel-prev crt-panel-arrow" aria-label="Previous" role="button" aria-disabled="false">Previous</button>\n<button c-on:click-prevent="onNextClick" type="button" data-role="none" class="crt-panel-next crt-panel-arrow" aria-label="Next" role="button" aria-disabled="false">Next</button>\n\n</div>\n',"widget-carousel":'\n<div class="crt-carousel-feed">\n<div class="crt-carousel-stage" ref="stage">\n<div class="crt-carousel-slider" ref="slider">\n\n</div>\n</div>\n\n<button c-on:click-prevent="onPrevClick" type="button" data-role="none" class="crt-panel-prev crt-panel-arrow" aria-label="Previous" role="button" aria-disabled="false">Previous</button>\n<button c-on:click-prevent="onNextClick" type="button" data-role="none" class="crt-panel-next crt-panel-arrow" aria-label="Next" role="button" aria-disabled="false">Next</button>\n\n</div>\n',"widget-waterfall":'\n<div class="crt-feed-scroll">\n    <div class="crt-feed" ref="feed">\n        <div class="crt-feed-spacer"> -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- </div>\n    </div>\n    <div class="crt-load-more-container" ref="loadMore"><button c-on:click-prevent="onMoreClick" class="crt-load-more"><span><%=this._t("load-more")%></span></button></div>\n</div>\n',"widget-grid":'\n<div>\n<div class="crt-feed-window" ref="feedWindow">\n    <div class="crt-feed" ref="feed"></div>\n</div>\n<div class="crt-load-more-container" ref="loadMore"><button c-on:click-prevent="onMoreClick" class="crt-load-more"><span><%=this._t("load-more")%></span></button></div>\n</div>\n',
"widget-grid-carousel":'\n<div class="crt-grid-carousel-feed">\n<div class="crt-grid-carousel-stage" ref="stage">\n<div class="crt-grid-carousel-slider" ref="slider">\n\n</div>\n</div>\n\n<button c-on:click-prevent="onPrevClick" type="button" data-role="none" class="crt-panel-prev crt-panel-arrow" aria-label="Previous" role="button" aria-disabled="false">Previous</button>\n<button c-on:click-prevent="onNextClick" type="button" data-role="none" class="crt-panel-next crt-panel-arrow" aria-label="Next" role="button" aria-disabled="false">Next</button>\n\n</div>\n',"widget-list":'\n<div class="crt-feed-window">\n    <div class="crt-feed" ref="feed"></div>\n    <div class="crt-load-more-container" ref="loadMore"><button c-on:click-prevent="onMoreClick" class="crt-load-more"><span><%=this._t("load-more")%></span></button></div>\n</div>'},isNumeric=function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},isObject$2=function(obj){return"object"==typeof obj&&null!==obj},isString=function(obj){return"[object String]"===Object.prototype.toString.call(obj)},libTranslate={getTranslationFunction:function(messageObject,options){function getTranslationValue(translationKey){if(messageObject[translationKey])return messageObject[translationKey];var components=translationKey.split(namespaceSplitter),namespace=components[0],key=components[1];return messageObject[namespace]&&messageObject[namespace][key]?messageObject[namespace][key]:null}function getPluralValue(translation,count){if(isObject$2(translation)){var upperCap,keys=Object.keys(translation);if(0===keys.length)return debug&&window.console.log("[Translation] No plural forms found."),null;for(var i=0;i<keys.length;i++)0===keys[i].indexOf("gt")&&(upperCap=parseInt(keys[i].replace("gt",""),10));translation[count]?translation=translation[count]:count>upperCap?translation=translation["gt"+upperCap]:translation.n?translation=translation.n:(debug&&window.console.log('[Translation] No plural forms found for count:"'+count+'" in',translation),translation=translation[Object.keys(translation).reverse()[0]])}return translation}function replacePlaceholders(translation,replacements){return isString(translation)?translation.replace(/\{(\w*)\}/g,function(match,key){return replacements.hasOwnProperty(key)?replacements.hasOwnProperty(key)?replacements[key]:key:(debug&&window.console.log('Could not find replacement "'+key+'" in provided replacements object:',replacements),"{"+key+"}")}):translation}options=isObject$2(options)?options:{};var debug=options.debug,namespaceSplitter=options.namespaceSplitter||"::";return function(translationKey){var replacements=isObject$2(arguments[1])?arguments[1]:isObject$2(arguments[2])?arguments[2]:{},count=isNumeric(arguments[1])?arguments[1]:isNumeric(arguments[2])?arguments[2]:null,translation=getTranslationValue(translationKey);return null!==count&&(replacements.n=replacements.n?replacements.n:count,translation=getPluralValue(translation,count)),translation=replacePlaceholders(translation,replacements),null===translation&&(translation=debug?"@@"+translationKey+"@@":translationKey,debug&&window.console.log('Translation for "'+translationKey+'" not found.')),translation}}},langsData="\nid,en,da,de,it,nl,es,fr,po,ru,sl,fi,pl,ar,zh,jp,pt-br,kr\nload-more,Load more,Hent mere,Mehr anzeigen,Di pi,Laad meer,Cargar ms,Voir plus,Carregar Mais, ,Prikai ve,Lataa lis,, ,,,Carregar mais, \nminutes-ago.1,{n} minute ago,{n} minut siden,Vor einer Minute,Un minuto fa,{n} minuut geleden,Hace un minuto,Il y a {n} minute,Tem um minuto,  ,pred {n} minuto,{n} minuutti sitten,, {n}  ,{n},{n} ,h {n} minuto,{n}  \nminutes-ago.n,{n} minutes ago,{n} minutter siden,Vor {n} Minuten,{n} minuti fa,{n} minuten geleden,Hace {n} minutos,Il y a {n} minutes,Tem {n} minutos,{n}  ,pred {n} minutami,{n} minuuttia sitten,, {n}  ,{n},{n} ,h {n} minutos,{n}  \nhours-ago.1,{n} hour ago,{n} time siden,Vor einer Stunde,Un'ora fa,{n} uur geleden,Hace una hora,Il y a {n} heure,Tem {n} hora,  ,pred {n} uro,{n} tunti sitten,, {n}  ,{n},{n} ,h {n} hora,{n}  \nhours-ago.n,{n} hours ago,{n} timer siden,Vor {n} Stunden,{n} ore fa,{n} uren geleden,Hace {n} horas,Il y a {n} heures,Tem {n} horas,{n}  ,pred {n} urami,{n} tuntia sitten,, {n}  ,{n},{n} ,h {n} horas,{n}  \ndays-ago.1,{n} day ago,{n} dag siden,Vor einem Tag,Un giorno fa,{n} dag geleden,Hace un da,Il y a {n} jour,Faz um dia,  ,pred {n} dnevom,{n} piv sitten,,{n}  ,{n},{n} ,h {n} dia,{n}  \ndays-ago.n,{n} days ago,{n} dage siden,Vor {n} Tagen,{n} giorni fa,{n} dagen geleden,Hace {n} das,Il y a {n} jours,Fazem {n} dias,{n}  ,pred {n} dnevi,{n} piv sitten,,{n}  ,{n},{n} ,h {n} dias,{n}  \nweeks-ago.1,{n} week ago,{n} uge siden,Vor einer Woche,Una settimana fa,{n} week geleden,Hace una semana,Il y a {n} semaine,Faz uma semana,  ,pred {n} tednom,{n} viikko sitten,, {n}  ,{n},{n} ,h {n} semana,{n}  \nweeks-ago.n,{n} weeks ago,{n} uger siden,Vor {n} Wochen,{n} settimane fa,{n} weken geleden,Hace {n} semanas,Il y a {n} semaines,Fazem {n} semanas,{n}  ,pred {n} tedni,{n} viikkoa sitten,, {n}  ,{n},{n} ,h {n} semanas,{n}  \nmonths-ago.1,{n} month ago,{n} mned siden,Vor einem Monat,Un mese fa,{n} maand geleden,Hace un mes,Il y a {n} mois,Tem um ms,  ,pred {n} mesecem,{n} kuukausi sitten,, {n}  ,{n},{n} ,h {n} ms,{n}  \nmonths-ago.n,{n} months ago,{n} mneder siden,Vor {n} Monaten,{n} mesi,{n} maanden geleden,Hace {n} meses,Il y a {n} mois,Tem {n} meses,{n}  ,pred {n} meseci,{n} kuukautta sitten,, {n}  ,{n},{n} ,h {n} meses,{n}  \nyesterday,Yesterday,I gr,Gestern,Ieri,Gisteren,Ayer,Hier,Ontem,,Veraj,Eilen,,,,,Ontem,\njust-now,Just now,Lige nu,Eben,Appena,Nu,Ahora,Il y a un instant,Agora, ,Pravkar,Juuri nyt,,,,,Agora,\nprevious,Previous,Forrige,Zurck,Indietro,Vorige,Anterior,Prcdent,Anterior,,Prejnji,Edellinen,,,,,Anterior,\nnext,Next,Nste,Weiter,Pi,Volgende,Siguiente,Suivant,Prximo,,Naslednji,Seuraava,,,,,Prximo,\ncomments,Comments,Kommentarer,Kommentare,Commenti,Comments,Comentarios,Commentaires,Comentrios,,Komentarji,Kommenttia,,,,,Comentrios,\nlikes,Likes,Synes godt om,Gefllt mir,Mi piace,Likes,Me gusta,J'aime,Curtir,,Veki,Tykkyst,,,,,Curtidas,\nread-more,Read more,Ls mere,Weiterlesen,Di pi,Lees meer,Leer ms,En savoir plus,Leia mais,,Preberi ve,Lue lis,, ,,,Leia mais, \nfilter,Filter,Filter,Filtern,filtrare,Filtreren,filtrar,filtrer,Filtro,,Filter,Suodata,,,,,Filtro,\nall,All,Alle,Alle,Tutti,Alle,Todas,Tout,Todos,,Vsi,Kaikki,,,,,Tudo,\ngo-to-original-post,Go to original post,G til originalt oplsag,Original-Post ansehen,,Ga naar het bericht,Ver publicacin original,Voir la publication,,,,Nyt alkuperinen viesti,,  ,,,Ir para o contedo original,  \nfilter-source,Filter source,Filter kilde,Filtern,Filtrare,Filtreren,Filtrar,Filtrer,Filtro,,Filter,Suodata lhde,,  ,,,Filtro por fonte, \nfilter-network,Filter network,Filter netvrk,Filtern,Filtrare,Filtreren,Filtrar,Filtrer,Filtro,,Filter,Suodata palvelu,,  ,,,Filtro por rede social, \nno-posts,The feed contains no posts,Der er ingen opslag i dette feed,Der Feed enthlt keine Posts,,,,,,,,Sytteess ei ole sislt,,    ,,,Este feed est vazio,  \nalt-image-posted,Image posted by {userName} to {networkName},Billede slet op af {userName} p {networkName},,,,,,,,,{networkName} kuva listty kyttjn {userName} toimesta,,     {userName}   {networkName},{userName}{networkName},,Imagem publicada por {userName} no {networkName},{userName}   {networkName}   \nalt-profile-image,Profile image for {userName},Profilbillede for {userName},,,,,,,,,Kyttjn {userName} profiilikuva,,   {userName},{userName},,Imagem de perfil para {userName},{userName}   \n",langs={},langDataLines=langsData.split("\n"),i=langDataLines.length-1;i>=0;i--)langDataLines[i]||langDataLines.splice(i,1);for(var keys$2=langDataLines[0].split(","),i$1=1;i$1<langDataLines.length;i$1++)for(var langDataCols=langDataLines[i$1].split(","),j=1;j<langDataCols.length;j++)!function(o,key,val){for(var kPath=key.split("."),i=0;i<kPath.length;i++){var k=kPath[i];o[k]||(o[k]={}),i===kPath.length-1?o[k]=val:o=o[k]}}(langs,keys$2[j]+"."+langDataCols[0],langDataCols[j]);var _cache={},currentLang="en",mod={setLang:function(lang){currentLang=lang},t:function t(key,n,lang){lang=lang||currentLang,_cache[lang]||(langs[lang]?_cache[lang]=libTranslate.getTranslationFunction(langs[lang]):(window.console.error("Unsupported language `"+lang+"`"),_cache[lang]=libTranslate.getTranslationFunction(langs.en))),key=key.toLowerCase(),key=key.replace(" ","-");var t=_cache[lang](key,n);return t===key?mod.t(key,n,"en"):t}},supportsDateStringSupportsLocales=null,DateUtils={dateFromString:function(time){var dtstr=time.replace(/\D/g," "),dtcomps=dtstr.split(" ");return dtcomps[1]--,new Date(Date.UTC(dtcomps[0],dtcomps[1],dtcomps[2],dtcomps[3],dtcomps[4],dtcomps[5]))},dateAsDayMonthYear:function(strEpoch){var myDate=new Date(parseInt(strEpoch,10)),day=myDate.getDate()+"",month=myDate.getMonth()+1+"",year=myDate.getFullYear()+"";return day=1===day.length?"0"+day:day,month=1===month.length?"0"+month:month,day+"/"+month+"/"+year},dateAsTimeArray:function(strEpoch){var ampm,myDate=new Date(parseInt(strEpoch,10)),hours=myDate.getHours()+"",mins=myDate.getMinutes()+"";return hours>=12?(ampm="PM",hours>12&&(hours=hours-12+"")):ampm="AM",hours=1===hours.length?"0"+hours:hours,mins=1===mins.length?"0"+mins:mins,[parseInt(hours.charAt(0),10),parseInt(hours.charAt(1),10),parseInt(mins.charAt(0),10),parseInt(mins.charAt(1),10),ampm]},fuzzyDate:function(dateString){var date=Date.parse(dateString+" UTC"),delta=Math.round((new Date-date)/1e3);return delta<30?"Just now":delta<60?delta+" seconds ago":delta<120?"a minute ago.":delta<3600?Math.floor(delta/60)+" minutes ago":1===Math.floor(delta/3600)?"1 hour ago.":delta<86400?Math.floor(delta/3600)+" hours ago":delta<172800?"Yesterday":delta<604800?"This week":delta<1209600?"Last week":delta<2592e3?"This month":date},prettyDate:function(time){var date=DateUtils.dateFromString(time),diff=((new Date).getTime()-date.getTime())/1e3,day_diff=Math.floor(diff/86400);if(isNaN(day_diff)||day_diff<0||day_diff>=31)return toLocaleDateStringSupportsLocales()?date.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):this.shortDate(date);var minute_diff=Math.floor(diff/60),hour_diff=Math.floor(diff/3600),week_diff=Math.ceil(day_diff/7);return 0===day_diff&&(diff<60&&mod.t("just-now")||diff<3600&&mod.t("minutes ago",minute_diff)||diff<86400&&mod.t("hours ago",hour_diff))||1===day_diff&&mod.t("yesterday")||day_diff<7&&mod.t("days-ago",day_diff)||day_diff<31&&mod.t("weeks ago",week_diff)},shortDate:function(date){var year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate(),months=["-","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yearS=year.toString(),monthS=months[month];return day.toString()+" "+monthS+" "+yearS}},helpers={get:function(id,defaultValue){var this$1=this;void 0===defaultValue&&(defaultValue="");var r=defaultValue;if(this.data.data.length>0)for(var i=0,list=this$1.data.data;i<list.length;i+=1){var d=list[i];if(d.name===id)return d.value}return r},networkIcon:function(){return this.data.network_name?this.data.network_name.toLowerCase():""},networkName:function(){return this.data.network_name?this.data.network_name.toLowerCase():""},userUrl:function(){if(this.data.user_url&&""!==this.data.user_url)return this.data.user_url;if(this.data.originator_user_url&&""!==this.data.originator_user_url)return this.data.originator_user_url;if(this.data.userUrl&&""!==this.data.userUrl)return this.data.userUrl;if(this.data.user_screen_name){var netId=this.data.network_id+"";if("1"===netId)return"http://twitter.com/"+this.data.user_screen_name;if("2"===netId)return"http://instagram.com/"+this.data.user_screen_name;if("3"===netId)return"http://facebook.com/"+this.data.user_screen_name}return"#"},userScreenName:function(){return"RSS"===this.data.network_name?this.data.user_screen_name?this.data.user_screen_name:"":this.data.user_screen_name?"@"+this.data.user_screen_name:""},postHeading:function(){return"RSS"===this.data.network_name?this.get("title",""):this.data.user_full_name},parseText:function(s,removeScripts){return void 0===removeScripts&&(removeScripts=!0),removeScripts&&(s=StringUtils.removeScripts(s)),this.data.is_html?s:("Twitter"===this.data.network_name?(s=StringUtils.linksToHref(s),s=StringUtils.twitterLinks(s)):"Instagram"===this.data.network_name?(s=StringUtils.linksToHref(s),s=StringUtils.instagramLinks(s)):"Facebook"===this.data.network_name?(s=StringUtils.linksToHref(s),s=StringUtils.facebookLinks(s)):s=StringUtils.linksToHref(s),StringUtils.nl2br(s))},nl2br:function(s){return StringUtils.nl2br(s)},contentImageClasses:function(){return this.data.image?"crt-post-has-image":"crt-post-content-image-hidden crt-post-no-image"},contentTextClasses:function(){return this.data.text?"crt-post-has-text":"crt-post-content-text-hidden crt-post-no-text"},cssClasses:function(){return this.data._classes?this.data._classes.join(" "):""},fuzzyDate:function(dateString){return DateUtils.fuzzyDate(dateString)},prettyDate:function(time){return DateUtils.prettyDate(time)},dateUrl:function(){var url=this.data.url,created_at=this.data.source_created_at;return url?'<a href="'+url+'" target="_blank">'+helpers.prettyDate(created_at)+"</a>":helpers.prettyDate(created_at)},_t:function(s,n){return mod.t(s,n)},_s:function(s){return"string"==typeof s?StringUtils.removeScripts(s):s}},_rendererTmplCache={},Templating={renderTemplate:function(templateId,data,options){return options&&(data.options=options),Templating.renderDiv(templateId,data)},renderDiv:function(source,data){var tmpl=Templating.render(source,data);return z$1.parseHTML&&(tmpl=z$1.parseHTML(tmpl)),z$1(tmpl).filter("div")},loadTemplate:function(templateId){var source="",$t="";templateId=templateId.trim();try{$t=z$1("script#"+templateId)}catch(e){}if(1===$t.length?source=$t.html():void 0!==Templates[templateId]?source=Templates[templateId]:StringUtils.isHtml(templateId)&&(source=templateId),""===source)throw new Error("Could not find template "+templateId);return source},render:function(templateId,data){var func=_rendererTmplCache[templateId];if(!func){var source=this.loadTemplate(templateId);try{var strComp=source.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',this._s($1),'").replace(/<!=(.+?)!>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('"),strFunc="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+strComp+"');}return p.join('');";func=new Function("obj",strFunc),_rendererTmplCache[templateId]=func}catch(e){throw Logger.error("Template parse error: "+e.message),new Error("Template parse error: "+e.message+" for template: "+templateId)}}try{return helpers.data=data,func.call(helpers,data)}catch(e){throw Logger.error("Template render error: "+e.message+" for template: "+templateId),window.console.log(data),new Error("Template render error: "+e.message+" for template: "+templateId)}}},Control=function(EventBus$$1){function Control(){EventBus$$1.call(this),this.templateId=null,this.$el=null,this.$refs={}}return EventBus$$1&&(Control.__proto__=EventBus$$1),Control.prototype=Object.create(EventBus$$1&&EventBus$$1.prototype),Control.prototype.constructor=Control,Control.prototype.render=function(){var this$1=this,options=this.widget?this.widget.options:{},data=this.json?this.json:{},$el=Templating.renderTemplate(this.templateId,data,options);this.onHandler($el,"c-on:click-prevent","click",!0),this.onHandler($el,"c-on:click","click"),this.onHandler($el,"c-on:blur","blur"),this.onHandler($el,"c-on:change","change"),this.onHandler($el,"c-on:load","load"),this.onHandler($el,"c-on:error","error");for(var refs=$el.find("[ref]"),i=0;i<refs.length;i++){var refEl=refs[i],refName=z$1(refEl).attr("ref");this$1.$refs[refName]=z$1(refEl)}this.$el?this.$el.replaceWith($el):this.$el=$el},Control.prototype._fnName=function(fnSig){return fnSig=fnSig.replace("(",""),fnSig=fnSig.replace(")","")},Control.prototype.onHandler=function($el,selector,action,stopPropagation){var this$1=this;void 0===stopPropagation&&(stopPropagation=!1);var attr=selector;selector=StringUtils.replaceAll(selector,":","\\:");for(var els=$el.find("["+selector+"]"),i=0;i<els.length;i++)!function(i){var el=els[i],fnName=this$1._fnName(z$1(el).attr(attr)),fn=this$1[fnName]?this$1[fnName]:function(){console.error(fnName+"() does not exist ")},handler=function(ev){stopPropagation&&(ev.preventDefault(),ev.stopPropagation()),fn.call(this$1,ev,el)};el.addEventListener(action,handler,!0)}(i)},Control.prototype.testInFrame=function(h){var item=this.$el[0],postRect=item.getBoundingClientRect(),postTop=postRect.y;return postRect.y+postRect.height>0&&postTop<h},Control.prototype.checkRefs=function(refNames){for(var this$1=this,i=0,list=refNames;i<list.length;i+=1){var refName=list[i];if(!this$1.$refs[refName])throw new Error("Curator Widget Error: Missing ref: "+refName)}},Control.prototype.destroy=function(){this.$el&&this.$el.remove(),delete this.$refs,delete this.$el,delete this.templateId,delete this.json,EventBus$$1.prototype.destroy.call(this)},Control}(EventBus),VideoPlayer=function(EventBus$$1){function VideoPlayer(videoElement){EventBus$$1.call(this),this.element=videoElement[0],this._videoPlaying=!1,this._autoPlay=!1,this._alive=!0,this._onPause=this.onPause.bind(this),this._onPlay=this.onPlay.bind(this),this._onData=this.onPlay.bind(this),this._onMetaData=this.onMetaData.bind(this),this.element.addEventListener("loadedmetadata",this._onMetaData),this.element.addEventListener("loadeddata",this._onData),this.element.addEventListener("play",this._onPlay),this.element.addEventListener("pause",this._onPause)}return EventBus$$1&&(VideoPlayer.__proto__=EventBus$$1),VideoPlayer.prototype=Object.create(EventBus$$1&&EventBus$$1.prototype),VideoPlayer.prototype.constructor=VideoPlayer,VideoPlayer.prototype.play=function(){var playPromise=this.element.play();void 0!==playPromise&&playPromise.then(function(){}).catch(function(error,p2){console.error("Video failed to play"),console.log(error),console.log(p2)})},VideoPlayer.prototype.pause=function(){this.element.pause()},VideoPlayer.prototype.playPause=function(){this._videoPlaying?this.pause():this.play()},VideoPlayer.prototype.isPlaying=function(){return this._videoPlaying},VideoPlayer.prototype.setAutoPlay=function(b){this._autoPlay=b},VideoPlayer.prototype.onMetaData=function(){var width=this.element.videoWidth,height=this.element.videoHeight;width===height?z$1(this.element).addClass("aspect-square"):width>height?z$1(this.element).addClass("aspect-landscape"):z$1(this.element).addClass("aspect-portrait")},VideoPlayer.prototype.onData=function(){},VideoPlayer.prototype.onPlay=function(){this._videoPlaying=!0,this.trigger("state:changed",this._videoPlaying)},VideoPlayer.prototype.onPause=function(){this._alive?(this._videoPlaying=!1,this.trigger("state:changed",this._videoPlaying)):(console.log("onPause on destroyed"),console.log(this.element))},VideoPlayer.prototype.destroy=function(){this._alive=!1,this.element.removeEventListener("loadedmetadata",this._onMetaData),this.element.removeEventListener("loadeddata",this._onData),this.element.removeEventListener("play",this._onPlay),this.element.removeEventListener("pause",this._onPause),this._videoPlaying&&this.element.pause(),EventBus$$1.prototype.destroy.call(this)},VideoPlayer}(EventBus),BasePost=function(Control$$1){function BasePost(widget,postJson){if(Control$$1.call(this),this.widget=widget,this.widget.config("forceHttps")&&(postJson.image=StringUtils.forceHttps(postJson.image),postJson.video=StringUtils.forceHttps(postJson.video)),this.json=postJson,this.json._classes=[],this.templateId=this.widget.config("post.template"),!this.json.title){var title=this.getData("title");title&&(this.json.title=title)}if(this.json.title?this.widget.config("post.showTitles")&&this.json._classes.push("crt-post-has-title"):this.json.title="",this.json.image?this.json._classes.push("crt-post-has-image"):(this.json._classes.push("crt-post-content-image-hidden"),this.json._classes.push("crt-post-no-image")),this.json.text?this.json._classes.push("crt-post-has-text"):(this.json._classes.push("crt-post-content-text-hidden"),this.json._classes.push("crt-post-no-text")),this.json.network_name){var networkName=this.json.network_name.toLowerCase();this.json._classes.push("crt-post-"+networkName)}this.setupShopSpots(),this.widget.on(Events.WIDGET_RESIZE,this.onWidgetResize.bind(this))}return Control$$1&&(BasePost.__proto__=Control$$1),BasePost.prototype=Object.create(Control$$1&&Control$$1.prototype),BasePost.prototype.constructor=BasePost,BasePost.prototype.onShareFacebookClick=function(){SocialFacebook.share(this.json),this.widget.track("share:facebook")},BasePost.prototype.onShareTwitterClick=function(){SocialTwitter.share(this.json),this.widget.track("share:twitter")},BasePost.prototype.onPostClick=function(ev){Logger.log("Post->click");var target=z$1(ev.target);target[0]&&target[0].className.indexOf("read-more")>0||(target.is("a")&&"#"!==target.attr("href")&&"javascript:;"!==target.attr("href")?this.widget.track("click:link"):(ev.preventDefault(),this.trigger(Events.POST_CLICK,this,ev)))},BasePost.prototype.onReadMoreClick=function(ev){this.widget.track("click:read-more"),this.trigger(Events.POST_CLICK_READ_MORE,this,this.json,ev)},BasePost.prototype.onWidgetResize=function(){},BasePost.prototype.setupVideo=function(){var this$1=this;"null"!==this.json.video&&this.json.video&&(this.$el.addClass("crt-post-has-video"),this.json.video.indexOf("youtu")===-1&&this.json.video.indexOf("vimeo")===-1&&this.widget.config("post.autoPlayVideos")&&this.$refs.video&&(this.videoPlayer=new VideoPlayer(this.$refs.video),this.videoPlayer.on("state:changed",function(event,playing){this$1.$el.toggleClass("crt-post-video-playing",playing)}),window.setTimeout(function(){this$1.videoPlayer.play()},200)))},BasePost.prototype.setupCarousel=function(){this.json.images&&this.json.images.length>0&&this.$el.addClass("crt-has-image-carousel")},BasePost.prototype.setupCommentsLikes=function(){this.widget.config("post.showComments")&&this.$el.addClass("crt-show-comments"),this.widget.config("post.showLikes")&&this.$el.addClass("crt-show-likes")},BasePost.prototype.setupUserNameImage=function(){this.json.user_image&&"https://cdn.curator.io/0.gif"!==this.json.user_image||this.$el.addClass("crt-hide-user-image"),this.json.user_full_name&&""!==this.json.user_full_name||this.$el.addClass("crt-hide-user-full-name"),this.json.user_screen_name&&""!==this.json.user_screen_name||this.$el.addClass("crt-hide-user-screen-name")},BasePost.prototype.setupShare=function(){0!==this.json.url.indexOf("http")?this.$el.addClass("crt-post-hide-share"):this.widget.config("post.showShare")||this.$el.addClass("crt-post-hide-share")},BasePost.prototype.setupShopSpots=function(){var this$1=this,content="";if(this.json.spots){for(var i=0;i<this.json.spots.length;i++){var label=this$1.json.spots[i].label,url=this$1.json.spots[i].url;""!==label&&(""!==url?(url.indexOf("http")===-1&&(url="http://"+url),content+='<a href="'+url+"\" target='_blank'>"+label+"</a>, "):content+=label+", ")}content=content.replace(/,\s*$/,"")}this.json.spots_title="In this photo: ",this.json.spots_content=content},BasePost.prototype.getData=function(name){var this$1=this;if(this.json.data&&this.json.data.length>0)for(var i=0;i<this.json.data.length;i++){var data=this$1.json.data[i];if(data.name===name)return data.value}},BasePost.prototype.destroy=function(){Control$$1.prototype.destroy.call(this),this.videoPlayer&&(this.videoPlayer.destroy(),this.videoPlayer=null),this.widget.off(Events.WIDGET_RESIZE,this.onWidgetResize.bind(this))},BasePost}(Control),sheetCounter=0,HtmlUtils={checkContainer:function(container){return Logger.log("Curator->checkContainer: "+container),0!==z$1(container).length||(Logger.error("Curator could not find the element "+container+". Please ensure this element existings in your HTML code. Exiting."),!1)},checkPowered:function(jQuerytag){return Logger.log("Curator->checkPowered"),jQuerytag.html().indexOf("Curator")>0||(window.alert("Container is missing Powered by Curator"),!1)},addCSSRule:function(sheet,selector,rules,index){index=index||0,"insertRule"in sheet?sheet.insertRule(selector+"{"+rules+"}",0):"addRule"in sheet&&sheet.addRule(selector,rules)},deleteCSSRules:function(sheet){if(sheet.cssRules)for(var i=sheet.cssRules.length-1;i>-1;i--)sheet.deleteRule(i);else for(var j=0;j<sheet.rules.length;j++)sheet.removeRule(j)},createSheet:function(){var style=document.createElement("style");return style.setAttribute("type","text/css"),style.setAttribute("data-sheet-num",sheetCounter+""),style.appendChild(document.createTextNode("")),document.head.appendChild(style),sheetCounter++,style.sheet},loadCSS:function(){},isTouch:function(){var b=!1;try{b="ontouchstart"in document.documentElement}catch(e){}return b},isVisible:function(el){return"none"!==el.css("display")&&"hidden"!==el.css("visibility")&&el.width()>0}},GeneralPost=function(Base){function GeneralPost(widget,postJson,options){if(Base.call(this,widget,postJson,options),this._lazyLoad=this.widget.config("widget.lazyLoad",!1),this._progressiveLoad=this.widget.config("widget.progressiveLoad",!1),this.json.lazyLoad=this._lazyLoad||this._progressiveLoad,this.setupShopSpots(),this.render(),this.$refs.image.css({opacity:0}),this._maxHeightSet=!1,this._maxHeightValue=0,this.$refs.image[0].addEventListener("load",this.onImageLoaded.bind(this),!0),this.$refs.image[0].addEventListener("error",this.onImageError.bind(this),!0),this.json.image_width>0){var p=this.json.image_height/this.json.image_width*100;this.$refs.imageContainer.addClass("crt-image-responsive").css("padding-bottom",p+"%")}0!==this.json.url.indexOf("http")&&this.$el.find(".crt-post-share").hide(),this.setupUserNameImage(),this.setupVideo(),this.setupCarousel(),this.setupShare(),this.setupCommentsLikes()}return Base&&(GeneralPost.__proto__=Base),GeneralPost.prototype=Object.create(Base&&Base.prototype),GeneralPost.prototype.constructor=GeneralPost,GeneralPost.prototype.onImageLoaded=function(){if(this.alive){if(0===this.$refs.image.attr("src").indexOf("data:image/gif;"));else{this.$refs.image.animate({opacity:1});var img=this.$refs.image[0];if(img&&img.naturalWidth>0){var p=img.naturalHeight/img.naturalWidth*100;this.$refs.imageContainer.addClass("crt-image-responsive").css("padding-bottom",p+"%")}this.setHeight(),this.trigger(Events.POST_IMAGE_LOADED,this),this.widget.trigger(Events.POST_IMAGE_LOADED,this)}}},GeneralPost.prototype.onImageError=function(){this.alive&&(this.$refs.image.hide(),this.setHeight(),this.trigger(Events.POST_IMAGE_FAILED,this),this.widget.trigger(Events.POST_IMAGE_FAILED,this))},GeneralPost.prototype.setHeight=function(){var height=this.$refs.postC.height(),maxHeight=this.widget.config("post.maxHeight",0);maxHeight>0&&height>maxHeight?(this.$el.css({maxHeight:maxHeight}),this.$el.addClass("crt-post-max-height"),this._maxHeightSet=!0,this._maxHeightValue=maxHeight):this._maxHeightSet=!1,this.layout()},GeneralPost.prototype.forceHeight=function(height){this.$el.css({height:height},300)},GeneralPost.prototype.getHeight=function(){return this._maxHeightSet?this._maxHeightValue:this.$refs.postC.height()},GeneralPost.prototype.layout=function(){this.layoutFooter(),this.trigger(Events.POST_LAYOUT_CHANGED,this)},GeneralPost.prototype.layoutFooter=function(){if("sydney"===this.widget.config("theme")){var $footer=this.$el.find(".crt-post-footer"),$userName=$footer.find(".crt-post-username"),$date=$footer.find(".crt-post-date"),$share=$footer.find(".crt-post-share"),$userImage=$footer.find(".crt-post-userimage"),footerWidth=$footer.width();$userName.width()+$date.width()+$share.width()+$userImage.width()+40>footerWidth&&$userName.hide()}},GeneralPost.prototype.loadImage=function(){this.$refs.image.attr("src",this.json.image)},GeneralPost.prototype.destroy=function(){this.$refs.image&&this.$refs.image.length&&(this.$refs.image[0].removeEventListener("load",this.onImageLoaded.bind(this),!0),this.$refs.image[0].removeEventListener("error",this.onImageError.bind(this),!0)),Base.prototype.destroy.call(this)},GeneralPost}(BasePost),BaseAd=function(Control$$1){function BaseAd(widget,postJson){Control$$1.call(this),this.widget=widget,this.json=postJson,this.templateId=this.widget.config("post.template"),this.widget.on(Events.WIDGET_RESIZE,this.onWidgetResize.bind(this))}return Control$$1&&(BaseAd.__proto__=Control$$1),BaseAd.prototype=Object.create(Control$$1&&Control$$1.prototype),BaseAd.prototype.constructor=BaseAd,BaseAd.prototype.onPostClick=function(ev){Logger.log("Post->click");var target=z$1(ev.target);target[0]&&target[0].className.indexOf("read-more")>0||(target.is("a")&&"#"!==target.attr("href")&&"javascript:;"!==target.attr("href")?this.widget.track("click:link"):(ev.preventDefault(),"goto-url"===this.json.click_action&&window.open(this.json.url)))},BaseAd.prototype.onWidgetResize=function(){},BaseAd.prototype.setupCommentsLikes=function(){this.widget.config("post.showComments")&&this.$el.addClass("crt-show-comments"),this.widget.config("post.showLikes")&&this.$el.addClass("crt-show-likes")},BaseAd.prototype.setupUserNameImage=function(){this.json.user_image&&"https://cdn.curator.io/0.gif"!==this.json.user_image||this.$el.addClass("crt-hide-user-image"),this.json.user_full_name&&""!==this.json.user_full_name||this.$el.addClass("crt-hide-user-full-name"),this.json.user_screen_name&&""!==this.json.user_screen_name||this.$el.addClass("crt-hide-user-screen-name")},BaseAd.prototype.setupShare=function(){0!==this.json.url.indexOf("http")?this.$el.addClass("crt-post-hide-share"):this.widget.config("post.showShare")||this.$el.addClass("crt-post-hide-share")},BaseAd.prototype.destroy=function(){Control$$1.prototype.destroy.call(this),this.widget.off(Events.WIDGET_RESIZE,this.onWidgetResize.bind(this))},BaseAd}(Control),Ad=function(Base){function Ad(widget,postJson,options){Base.call(this,widget,postJson,options),this.templateId="ad-general";var lazyLoad=this.widget.config("widget.lazyLoad",!1),progressiveLoad=this.widget.config("widget.progressiveLoad",!1);if(this.json.lazyLoad=lazyLoad||progressiveLoad,this.render(),this.json.is_html){var text=this.json.text,rScript=/<script[\s\S]*?src=['"]([A-Za-z0-9\/:\.]*)['"][\s\S]*?>[\s\S]*?<\/script>/gi,matches=rScript.exec(text);if(matches){var script=matches[0],src=matches[1];text=text.replace(script,"");var g=document.createElement("script"),s=document.getElementsByTagName("script")[0];g.src=src,s.parentNode.insertBefore(g,s)}this.$refs.text.html(this.json.text)}else this.$refs.text.html(this.json.text);if(""===this.json.title&&this.$el.addClass("crt-ad-no-title"),""===this.json.image)this.$el.addClass("crt-ad-no-image");else{if(this.$refs.image[0].addEventListener("load",this.onImageLoaded.bind(this),!0),this.$refs.image[0].addEventListener("error",this.onImageError.bind(this),!0),this.json.image_width>0){
var p=this.json.image_height/this.json.image_width*100;this.$refs.imageContainer.addClass("crt-image-responsive").css("padding-bottom",p+"%")}0!==this.json.url.indexOf("http")&&this.$el.find(".crt-post-share").hide()}this.setupUserNameImage()}return Base&&(Ad.__proto__=Base),Ad.prototype=Object.create(Base&&Base.prototype),Ad.prototype.constructor=Ad,Ad.prototype.onImageLoaded=function(){if(this.alive){if(0===this.$refs.image.attr("src").indexOf("data:image/gif;"));else{this.$refs.image.animate({opacity:1});var img=this.$refs.image[0];if(img&&img.naturalWidth>0){var p=img.naturalHeight/img.naturalWidth*100;this.$refs.imageContainer.addClass("crt-image-responsive").css("padding-bottom",p+"%")}this.setHeight(),this.trigger(Events.POST_IMAGE_LOADED,this),this.widget.trigger(Events.POST_IMAGE_LOADED,this)}}},Ad.prototype.onImageError=function(){this.$refs.image.hide(),this.setHeight(),this.trigger(Events.POST_IMAGE_FAILED,this),this.widget.trigger(Events.POST_IMAGE_FAILED,this)},Ad.prototype.setHeight=function(){var height=this.$refs.postC.height(),maxHeight=this.widget.config("post.maxHeight",0);maxHeight>0&&height>maxHeight&&(this.$el.css({maxHeight:maxHeight}),this.$el.addClass("crt-post-max-height")),this.layout()},Ad.prototype.forceHeight=function(height){this.$el.css({height:height},300)},Ad.prototype.getHeight=function(){return this.$el.hasClass("crt-post-max-height"),this.$refs.postC.height()},Ad.prototype.loadImage=function(){Logger.log("Ad->loadImage"),this.$refs.image.attr("src",this.json.image)},Ad.prototype.layout=function(){this.layoutFooter(),this.trigger(Events.POST_LAYOUT_CHANGED,this)},Ad.prototype.layoutFooter=function(){var $userName=this.$el.find(".crt-post-username"),$date=this.$el.find(".crt-date"),$footer=this.$el.find(".crt-post-footer"),$share=this.$el.find(".crt-post-share"),$userImage=this.$el.find(".crt-post-userimage"),footerWidth=$footer.width();$userName.width()+$date.width()+$share.width()+$userImage.width()+40>footerWidth&&$userName.hide()},Ad.prototype.destroy=function(){this.$refs.image&&this.$refs.image.length&&(this.$refs.image[0].removeEventListener("load",this.onImageLoaded.bind(this),!0),this.$refs.image[0].removeEventListener("error",this.onImageError.bind(this),!0)),Base.prototype.destroy.call(this)},Ad}(BaseAd),networks={1:{id:1,name:"Twitter",slug:"twitter",icon:"crt-icon-twitter"},2:{id:2,name:"Instagram",slug:"instagram",icon:"crt-icon-instagram"},3:{id:3,name:"Facebook",slug:"facebook",icon:"crt-icon-facebook"},4:{id:4,name:"Pinterest",slug:"pinterest",icon:"crt-icon-pinterest"},5:{id:5,name:"Google",slug:"google",icon:"crt-icon-google"},6:{id:6,name:"Vine",slug:"vine",icon:"crt-icon-vine"},7:{id:7,name:"Flickr",slug:"flickr",icon:"crt-icon-flickr"},8:{id:8,name:"YouTube",slug:"youtube",icon:"crt-icon-youtube"},9:{id:9,name:"Tumblr",slug:"tumblr",icon:"crt-icon-tumblr"},10:{id:10,name:"RSS",slug:"rss",icon:"crt-icon-rss"},11:{id:11,name:"LinkedIn",slug:"linkedin",icon:"crt-icon-linkedin"},12:{id:12,name:"Vimeo",slug:"vimeo",icon:"crt-icon-vimeo"},13:{id:13,name:"Diffbot",slug:"difbot",icon:"crt-icon-cog"},14:{id:14,name:"Webo",slug:"webo",icon:"crt-icon-weibo"},15:{id:15,name:"Glassdoor",slug:"glassdoor",icon:"crt-icon-cog"},16:{id:16,name:"Instagram",slug:"instagram",icon:"crt-icon-instagram"},17:{id:17,name:"Yelp",slug:"yelp",icon:"crt-icon-yelp"},18:{id:18,name:"DeviantArt",slug:"deviant-art",icon:"crt-icon-deviantart"},19:{id:19,name:"Behance",slug:"deviant-art",icon:"crt-icon-behance"},20:{id:20,name:"Spotify",slug:"spotify",icon:"crt-icon-spotify"},21:{id:21,name:"Slack",slug:"slack",icon:"crt-icon-slack"},22:{id:22,name:"Giphy",slug:"giphy",icon:"crt-icon-giphy"}},Filter=function(Control$$1){function Filter(widget){Logger.log("Filter->construct"),Control$$1.call(this),this.widget=widget,this.$refs={sources:null,sourcesUl:null,networksUl:null},this.templateId=this.widget.config("filter.template"),this.render(),this.$el.on("click",".crt-filter-networks a",this.onNetworkClick.bind(this)),this.$el.on("click",".crt-filter-sources a",this.onSourceClick.bind(this)),this.widget.on(Events.FEED_LOADED,this.onPostsLoaded.bind(this))}return Control$$1&&(Filter.__proto__=Control$$1),Filter.prototype=Object.create(Control$$1&&Control$$1.prototype),Filter.prototype.constructor=Filter,Filter.prototype.onPostsLoaded=function(event,data){var this$1=this,networks$$1=data.networks,sources=data.sources,hasSelectedNetwork=!1,hasSelectedSource=!1;if(!this.filtersLoaded){if(this.widget.config("filter.showAll")&&(this.$refs.networksUl.append('<li class="active all"><a href="#" data-network="">All</a></li>'),this.$refs.sourcesUl.append('<li class="active all"><a href="#" data-network="">All</a></li>')),this.widget.config("filter.showNetworks"))for(var i=0,list=networks$$1;i<list.length;i+=1){var id=list[i],network=networks[id];if(network){var active="";"all_"+id===this$1.widget.config("filter.default")&&(active="active",hasSelectedNetwork=!0,this$1.widget.trigger(Events.FILTER_CHANGED,this$1),this$1.widget.feed.params.network_id=id,this$1.$el.find(".crt-filter-networks .all").removeClass("active")),this$1.$refs.networksUl.append('<li class="'+active+'"><a href="#" data-network="'+id+'"><i class="'+network.icon+'"></i> '+network.name+"</a></li>")}}else this.$refs.networks.hide();if(this.widget.config("filter.showSources"))for(var i$1=0,list$1=sources;i$1<list$1.length;i$1+=1){var source=list$1[i$1],network$1=networks[source.network_id];if(network$1){var active$1="";source.id===this$1.widget.config("filter.default")&&(active$1="active",hasSelectedSource=!0,this$1.widget.trigger(Events.FILTER_CHANGED,this$1),this$1.widget.feed.params.source_id=source.id,this$1.$el.find(".crt-filter-sources .all").removeClass("active")),this$1.$refs.sourcesUl.append('<li class="'+active$1+'"><a href="#" data-source="'+source.id+'"><i class="'+network$1.icon+'"></i> '+source.name+"</a></li>")}}else this.$refs.sources.hide();this.filtersLoaded=!0,(hasSelectedNetwork||hasSelectedSource)&&this.widget.reload()}},Filter.prototype.onSourceClick=function(ev){ev.preventDefault();var t=z$1(ev.target),sourceId=t.data("source");t.parent().hasClass("active")?(this.$el.find(".crt-filter-sources li").removeClass("active"),sourceId=0):(this.$el.find(".crt-filter-sources li").removeClass("active"),t.parent().addClass("active")),this.widget.trigger(Events.FILTER_CHANGED,this),sourceId?this.widget.feed.params.source_id=sourceId:delete this.widget.feed.params.source_id,this.widget.reload()},Filter.prototype.onNetworkClick=function(ev){ev.preventDefault();var t=z$1(ev.target),networkId=t.data("network");t.parent().hasClass("active")?(this.$el.find(".crt-filter-networks li").removeClass("active"),networkId=0):(this.$el.find(".crt-filter-networks li").removeClass("active"),t.parent().addClass("active")),this.widget.trigger(Events.FILTER_CHANGED,this),networkId?this.widget.feed.params.network_id=networkId:delete this.widget.feed.params.network_id,this.widget.reload()},Filter.prototype.destroy=function(){this.$el.remove()},Filter}(Control),MapShim=function(){function getIndex(arr,key){var result=-1;return arr.some(function(entry,index){return entry[0]===key&&(result=index,!0)}),result}return"undefined"!=typeof Map?Map:function(){function class_1(){this.__entries__=[]}return Object.defineProperty(class_1.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),class_1.prototype.get=function(key){var index=getIndex(this.__entries__,key),entry=this.__entries__[index];return entry&&entry[1]},class_1.prototype.set=function(key,value){var index=getIndex(this.__entries__,key);~index?this.__entries__[index][1]=value:this.__entries__.push([key,value])},class_1.prototype.delete=function(key){var entries=this.__entries__,index=getIndex(entries,key);~index&&entries.splice(index,1)},class_1.prototype.has=function(key){return!!~getIndex(this.__entries__,key)},class_1.prototype.clear=function(){this.__entries__.splice(0)},class_1.prototype.forEach=function(callback,ctx){void 0===ctx&&(ctx=null);for(var _i=0,_a=this.__entries__;_i<_a.length;_i++){var entry=_a[_i];callback.call(ctx,entry[1],entry[0])}},class_1}()}(),isBrowser="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,global$1=function(){return"undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),requestAnimationFrame$1=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame.bind(global$1):function(callback){return setTimeout(function(){return callback(Date.now())},1e3/60)}}(),trailingTimeout=2,REFRESH_DELAY=20,transitionKeys=["top","right","bottom","left","width","height","size","weight"],mutationObserverSupported="undefined"!=typeof MutationObserver,ResizeObserverController=function(){function ResizeObserverController(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=throttle(this.refresh.bind(this),REFRESH_DELAY)}return ResizeObserverController.prototype.addObserver=function(observer){~this.observers_.indexOf(observer)||this.observers_.push(observer),this.connected_||this.connect_()},ResizeObserverController.prototype.removeObserver=function(observer){var observers=this.observers_,index=observers.indexOf(observer);~index&&observers.splice(index,1),!observers.length&&this.connected_&&this.disconnect_()},ResizeObserverController.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ResizeObserverController.prototype.updateObservers_=function(){var activeObservers=this.observers_.filter(function(observer){return observer.gatherActive(),observer.hasActive()});return activeObservers.forEach(function(observer){return observer.broadcastActive()}),activeObservers.length>0},ResizeObserverController.prototype.connect_=function(){isBrowser&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mutationObserverSupported?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ResizeObserverController.prototype.disconnect_=function(){isBrowser&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ResizeObserverController.prototype.onTransitionEnd_=function(_a){var _b=_a.propertyName,propertyName=void 0===_b?"":_b;transitionKeys.some(function(key){return!!~propertyName.indexOf(key)})&&this.refresh()},ResizeObserverController.getInstance=function(){return this.instance_||(this.instance_=new ResizeObserverController),this.instance_},ResizeObserverController.instance_=null,ResizeObserverController}(),defineConfigurable=function(target,props){for(var _i=0,_a=Object.keys(props);_i<_a.length;_i++){var key=_a[_i];Object.defineProperty(target,key,{value:props[key],enumerable:!1,writable:!1,configurable:!0})}return target},getWindowOf=function(target){return target&&target.ownerDocument&&target.ownerDocument.defaultView||global$1},emptyRect=createRectInit(0,0,0,0),isSVGGraphicsElement=function(){return"undefined"!=typeof SVGGraphicsElement?function(target){return target instanceof getWindowOf(target).SVGGraphicsElement}:function(target){return target instanceof getWindowOf(target).SVGElement&&"function"==typeof target.getBBox}}(),ResizeObservation=function(){function ResizeObservation(target){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=target}return ResizeObservation.prototype.isActive=function(){var rect=getContentRect(this.target);return this.contentRect_=rect,rect.width!==this.broadcastWidth||rect.height!==this.broadcastHeight},ResizeObservation.prototype.broadcastRect=function(){var rect=this.contentRect_;return this.broadcastWidth=rect.width,this.broadcastHeight=rect.height,rect},ResizeObservation}(),ResizeObserverEntry=function(){function ResizeObserverEntry(target,rectInit){defineConfigurable(this,{target:target,contentRect:createReadOnlyRect(rectInit)})}return ResizeObserverEntry}(),ResizeObserverSPI=function(){function ResizeObserverSPI(callback,controller,callbackCtx){if(this.activeObservations_=[],this.observations_=new MapShim,"function"!=typeof callback)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=callback,this.controller_=controller,this.callbackCtx_=callbackCtx}return ResizeObserverSPI.prototype.observe=function(target){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(target instanceof getWindowOf(target).Element))throw new TypeError('parameter 1 is not of type "Element".');var observations=this.observations_;observations.has(target)||(observations.set(target,new ResizeObservation(target)),this.controller_.addObserver(this),this.controller_.refresh())}},ResizeObserverSPI.prototype.unobserve=function(target){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(target instanceof getWindowOf(target).Element))throw new TypeError('parameter 1 is not of type "Element".');var observations=this.observations_;observations.has(target)&&(observations.delete(target),observations.size||this.controller_.removeObserver(this))}},ResizeObserverSPI.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},ResizeObserverSPI.prototype.gatherActive=function(){var _this=this;this.clearActive(),this.observations_.forEach(function(observation){observation.isActive()&&_this.activeObservations_.push(observation)})},ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var ctx=this.callbackCtx_,entries=this.activeObservations_.map(function(observation){return new ResizeObserverEntry(observation.target,observation.broadcastRect())});this.callback_.call(ctx,entries,ctx),this.clearActive()}},ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)},ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0},ResizeObserverSPI}(),observers="undefined"!=typeof WeakMap?new WeakMap:new MapShim,ResizeObserver=function(){function ResizeObserver(callback){if(!(this instanceof ResizeObserver))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var controller=ResizeObserverController.getInstance(),observer=new ResizeObserverSPI(callback,controller,this);observers.set(this,observer)}return ResizeObserver}();["observe","unobserve","disconnect"].forEach(function(method){ResizeObserver.prototype[method]=function(){var _a;return(_a=observers.get(this))[method].apply(_a,arguments)}});var index=function(){return void 0!==global$1.ResizeObserver?global$1.ResizeObserver:ResizeObserver}(),Popup=function(Control$$1){function Popup(popupManager,post,widget){var this$1=this;if(Logger.log("Popup->init "),Control$$1.call(this),this.widget=widget,this.widget.config("forceHttps")&&(post.image=StringUtils.forceHttps(post.image),post.video=StringUtils.forceHttps(post.video)),this.popupManager=popupManager,this.json=post,this.json._classes=[],!this.json.title){var title=this.getData("title");title&&(this.json.title=title)}if(this.json.title?this.json._classes.push("crt-popup-has-title"):this.json.title="",this.templateId=this.widget.config("popup.template"),this.setupShopSpots(),this.render(),this.json.image&&this.$el.addClass("has-image"),this.json.url&&this.$el.addClass("crt-has-read-more"),this.json.video)if(this.$el.addClass("has-video"),this.json.video&&this.json.video.indexOf("youtu")>=0){this.$refs.video.remove();var youTubeId=StringUtils.youtubeVideoId(this.json.video),src='<div class="crt-responsive-video"><iframe id="ytplayer" src="https://www.youtube.com/embed/'+youTubeId+'?autoplay=0&rel=0&showinfo" frameborder="0" allowfullscreen></iframe></div>';this.$el.find(".crt-video-container img").remove(),this.$el.find(".crt-video-container a").remove(),this.$el.find(".crt-video-container").append(src)}else if(this.json.video&&this.json.video.indexOf("vimeo")>=0){this.$refs.video.remove();var vimeoId=StringUtils.vimeoVideoId(this.json.video);if(vimeoId){var src$1='<div class="crt-responsive-video"><iframe src="https://player.vimeo.com/video/'+vimeoId+'?color=ffffff&title=0&byline=0&portrait=0" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';this.$el.find(".crt-video-container img").remove(),this.$el.find(".crt-video-container a").remove(),this.$el.find(".crt-video-container").append(src$1)}}else this.videoPlayer=new VideoPlayer(this.$refs.video),this.videoPlayer.on("state:changed",function(event,playing){this$1.$el.toggleClass("video-playing",playing)}),this.widget.config("popup.autoPlayVideos",!1)&&this.videoPlayer.play();if(this.json.images){this.$page=this.$el.find(".crt-pagination ul");for(var i=0;i<this.json.images.length;i++)this$1.$page.append('<li><a href="" data-page="'+i+'"></a></li>');this.$page.find("a").click(this.onPageClick.bind(this)),this.currentImage=0,this.$page.find("li:nth-child("+(this.currentImage+1)+")").addClass("selected")}this.onResize(),this.createHandlers()}return Control$$1&&(Popup.__proto__=Control$$1),Popup.prototype=Object.create(Control$$1&&Control$$1.prototype),Popup.prototype.constructor=Popup,Popup.prototype.setupShopSpots=function(){var this$1=this,content="";if(this.json.spots){for(var i=0;i<this.json.spots.length;i++){var label=this$1.json.spots[i].label,url=this$1.json.spots[i].url;""!==label&&(""!==url?(url.indexOf("http")===-1&&(url="http://"+url),content+='<a href="'+url+"\" target='_blank'>"+label+"</a>, "):content+=label+", ")}content=content.replace(/,\s*$/,"")}this.json.spots_title="In this photo: ",this.json.spots_content=content},Popup.prototype.createHandlers=function(){var this$1=this;this._resize=CommonUtils.debounce(this.onResize.bind(this),100),this.ro=new index(function(entries){entries.length>0&&this$1._resize()}),this.ro.observe(z$1("body")[0])},Popup.prototype.onResize=function(){Logger.log("Popup->onResize");var windowWidth=z$1(window).width(),leftWidth=windowWidth-80;windowWidth>1055?leftWidth=935:windowWidth>910?leftWidth=windowWidth-120:windowWidth>680&&(leftWidth=600),this.$refs.left.css("width",leftWidth)},Popup.prototype.onPageClick=function(ev){ev.preventDefault();var a=z$1(ev.target),page=a.data("page"),image=this.json.images[page];this.$el.find(".crt-image img").attr("src",image.url),this.currentImage=page,this.$page.find("li").removeClass("selected"),this.$page.find("li:nth-child("+(this.currentImage+1)+")").addClass("selected")},Popup.prototype.onShareFacebookClick=function(){return SocialFacebook.share(this.json),this.widget.track("share:facebook"),!1},Popup.prototype.onShareTwitterClick=function(){return SocialTwitter.share(this.json),this.widget.track("share:twitter"),!1},Popup.prototype.onClose=function(){var this$1=this;this.hide(function(){this$1.popupManager.onClose()})},Popup.prototype.onPrevious=function(){this.popupManager.onPrevious()},Popup.prototype.onNext=function(){this.popupManager.onNext()},Popup.prototype.onPlay=function(){Logger.log("Popup->onPlay"),this.videoPlayer.playPause()},Popup.prototype.show=function(){this.$el.fadeIn(function(){})},Popup.prototype.getData=function(name){var this$1=this;if(this.json.data&&this.json.data.length>0)for(var i=0;i<this.json.data.length;i++){var data=this$1.json.data[i];if(data.name===name)return data.value}},Popup.prototype.hide=function(callback){var this$1=this;Logger.log("Popup->hide"),this.videoPlayer&&this.videoPlayer.pause(),this.$el.fadeOut(function(){this$1.destroy(),callback()})},Popup.prototype.destroy=function(){this.ro&&this.ro.disconnect(),this.$el&&this.$el.length&&this.$el.remove(),delete this.videoPlayer,delete this.ro,delete this.$el,Control$$1.prototype.destroy.call(this)},Popup}(Control),PopupManager=function(Control$$1){function PopupManager(widget,feed){Logger.log("PopupManager->init "),Control$$1.call(this),this.widget=widget,this.feed=feed,this.currentPostNum=0,this.templateId=this.widget.config("popup.templateWrapper"),this.render(),z$1("body").append(this.$el)}return Control$$1&&(PopupManager.__proto__=Control$$1),PopupManager.prototype=Object.create(Control$$1&&Control$$1.prototype),PopupManager.prototype.constructor=PopupManager,PopupManager.prototype.showPopup=function(post){var this$1=this;this.popup?this.popup.hide(function(){this$1.popup.destroy(),this$1.showPopup2(post)}):this.showPopup2(post)},PopupManager.prototype.showPopup2=function(post){var this$1=this;if(this.popup=new Popup(this,post,this.widget),this.$refs.container.append(this.popup.$el),this.$el.show(),"block"!==this.$refs.underlay.css("display")&&this.$refs.underlay.fadeIn(),this.popup.show(),z$1("body").addClass("crt-popup-visible"),this.currentPostNum=0,this.feed._posts)for(var i=0;i<this.feed._posts.length;i++)if(post.id===this$1.feed._posts[i].id){this$1.currentPostNum=i,Logger.log("Found post "+i);break}this.addDeepLink(post),this.widget.track("popup:show")},PopupManager.prototype.setPosts=function(posts){},PopupManager.prototype.onClose=function(){this.hide()},PopupManager.prototype.onPrevious=function(){this.currentPostNum-=1,this.currentPostNum=this.currentPostNum>=0?this.currentPostNum:this.feed._posts.length-1,this.showPopup(this.feed._posts[this.currentPostNum])},PopupManager.prototype.onNext=function(){this.currentPostNum+=1,this.currentPostNum=this.currentPostNum<this.feed._posts.length?this.currentPostNum:0,this.showPopup(this.feed._posts[this.currentPostNum])},PopupManager.prototype.onUnderlayClick=function(){var this$1=this;Logger.log("PopupManager->onUnderlayClick"),this.popup&&this.popup.hide(function(){this$1.hide()})},PopupManager.prototype.hide=function(){var this$1=this;Logger.log("PopupManager->hide"),this.widget.track("popup:hide"),z$1("body").removeClass("crt-popup-visible"),this.currentPostNum=0,this.popup.destroy(),this.popup=null,this.$refs.underlay.fadeOut(function(){this$1.$refs.underlay.css({display:"",opacity:""}),this$1.$el.hide()}),this.removeDeepLink()},PopupManager.prototype.removeDeepLink=function(){if(this.widget.config("popup.deepLink")){var hash=window.document.location.hash;if(hash=hash.replace("#",""),hash.indexOf("crt:post:")>-1){var url=window.location.origin+window.location.pathname;window.history&&window.history.replaceState(null,null,url)}}},PopupManager.prototype.addDeepLink=function(post){this.widget.config("popup.deepLink")&&(window.history?window.history.pushState(null,null,"#crt:post:"+post.id):window.document.location.hash="crt:post:"+post.id)},PopupManager.prototype.destroy=function(){this.popup&&(this.popup.destroy(),delete this.popup),this.$el.remove(),delete this.currentPostNum,delete this.widget,delete this.feed,Control$$1.prototype.destroy.call(this)},PopupManager}(Control),setTimeoutFunc=setTimeout;Promise$2.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise$2.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);return handle(this,new Handler(onFulfilled,onRejected,prom)),prom},Promise$2.prototype.finally=finallyConstructor,Promise$2.all=function(arr){return new Promise$2(function(resolve,reject){function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0==--remaining&&resolve(args)}catch(ex){reject(ex)}}if(!isArray$2(arr))return reject(new TypeError("Promise.all accepts an array"));var args=Array.prototype.slice.call(arr);if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise$2.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise$2?value:new Promise$2(function(resolve){resolve(value)})},Promise$2.reject=function(value){return new Promise$2(function(resolve,reject){reject(value)})},Promise$2.race=function(arr){return new Promise$2(function(resolve,reject){if(!isArray$2(arr))return reject(new TypeError("Promise.race accepts an array"));for(var i=0,len=arr.length;i<len;i++)Promise$2.resolve(arr[i]).then(resolve,reject)})},Promise$2._immediateFn="function"==typeof setImmediate&&function(fn){setImmediate(fn)}||function(fn){setTimeoutFunc(fn,0)},Promise$2._unhandledRejectionFn=function(err){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",err)};var serialize=function(obj){return"?"+Object.keys(obj).reduce(function(a,k){return a.push(k+"="+encodeURIComponent(obj[k])),a},[]).join("&")},fixUrl=function(url){var p=window.location.protocol,pp=url.indexOf("://");return pp&&(url=url.substr(pp+3)),p="https:"!==p&&"http:"!==p?"https:":p,url=p+"//"+url},ajax={get:function(url,params,success,fail){return url=fixUrl(url),params&&(url+=serialize(params)),nanoajax({url:url,cors:!0},function(statusCode,responseText){statusCode?success(JSON.parse(responseText),statusCode):fail(statusCode,responseText)})},post:function(url,params,success,fail){return url=fixUrl(url),nanoajax({url:url,cors:!0,body:params,method:"POST"},function(statusCode,responseText){statusCode?success(JSON.parse(responseText),statusCode):fail(statusCode,responseText)})},getPromise:function(url,params,options){return void 0===options&&(options={}),new Promise$2(function(resolve,reject){options.dontChangeProtocol||(url=fixUrl(url)),params&&(url+=serialize(params)),nanoajax({url:url,cors:!0},function(statusCode,responseText){if(statusCode){resolve({success:!0,data:JSON.parse(responseText),statusCode:statusCode})}else resolve({success:!1,text:responseText,statusCode:statusCode})})})}},UriBuilder=function(apiEndpoint){var reg=/(.+?)\:\/\/([0-9A-Za-z.-]*)/,parts=reg.exec(apiEndpoint);this.apiEndpoint=parts[1]+"://"+parts[2]};UriBuilder.prototype.build=function(url,params){var urlPart=CommonUtils.tinyparser(url,params);return this.apiEndpoint+urlPart};var FeedIterator=function(){this.catchCb=function(){}};FeedIterator.prototype.each=function(cb){return this.eachCb=cb,this},FeedIterator.prototype.done=function(cb){return this.doneCb=cb,this},FeedIterator.prototype.catch=function(cb){return this.catchCb=cb,this},FeedIterator.prototype.triggerEach=function(p){this.eachCb(p)},FeedIterator.prototype.triggerDone=function(p){this.doneCb(p)},FeedIterator.prototype.triggerCatch=function(p){this.catchCb(p)};var FeedCursorAds=function(EventBus$$1){function FeedCursorAds(widget){EventBus$$1.call(this),Logger.log("FeedCursorAds->init with options"),this.widget=widget,this.postsLoaded=0,this.postCount=0,this.loading=!1,this.allPostsLoaded=!1,this.pagination={after:null,before:null},this._firstLoad=!0,this._feedCurrentIdx=0,this._feed=[],this._posts=[],this._active=!0,this._showAds=this.widget.config("feed.showAds",!1),this.params=this.widget.config("feed.params")||{},this.params.limit=this.widget.config("feed.limit",25),this.params.hasPoweredBy=this.widget.hasPoweredBy,this.params.version="4.0",this.widget.config("filter.limitPosts",!1)&&(this.params.limitPosts=!0,this.params.limitPostNumber=this.widget.config("filter.limitPostNumber",12),this.params.limitPostPeriod=this.widget.config("filter.period","hours"));var uriBuilder=new UriBuilder(this.widget.config("feed.apiEndpoint"));this.urlFeedPosts=uriBuilder.build("/restricted/feeds/{{feedId}}/posts",{feedId:this.widget.config("feed.id")}),this.urlFeedPost=uriBuilder.build("/restricted/feeds/{{feedId}}/posts",{feedId:this.widget.config("feed.id")})}return EventBus$$1&&(FeedCursorAds.__proto__=EventBus$$1),FeedCursorAds.prototype=Object.create(EventBus$$1&&EventBus$$1.prototype),FeedCursorAds.prototype.constructor=FeedCursorAds,FeedCursorAds.prototype.reset=function(){this._feedCurrentIdx=0,this._feed=[],this._posts=[],this._ads=[],this._firstLoad=!0,this.allPostsLoaded=!1},FeedCursorAds.prototype.afterIterator=function(numPosts){var this$1=this,fi=new FeedIterator,iterate=function(){for(var post=this$1.nextPost(),i=0;post&&i<numPosts;)fi.triggerEach(post),i++,post=this$1.nextPost();fi.triggerDone()};return this.numPostsAfterCurrent()<numPosts?this.load().then(function(){iterate()}).catch(function(e){fi.triggerCatch(e)}):window.setTimeout(function(){iterate()},10),fi},FeedCursorAds.prototype.afterLoop=function(numPosts){var this$1=this;return new Promise$2(function(resolve,reject){this$1.numPostsAfterCurrent()<numPosts?this$1.load().then(function(){resolve(this$1.getXPosts(numPosts))}).catch(function(data){reject(data)}):resolve(this$1.getXPosts(numPosts))})},FeedCursorAds.prototype.loadXPosts=function(numPosts){var this$1=this;return Logger.log("FeedCursorAds->loadXPosts "+numPosts),new Promise$2(function(resolve,reject){this$1.numPostsAfterCurrent()<numPosts?this$1.allPostsLoaded?resolve(this$1.getXPosts(numPosts)):this$1.load().then(function(){resolve(this$1.getXPosts(numPosts))}).catch(function(e){reject(e)}):resolve(this$1.getXPosts(numPosts))})},FeedCursorAds.prototype.nextPost=function(){if(this._feedCurrentIdx<this._feed.length){var post=this._feed[this._feedCurrentIdx];return this._feedCurrentIdx++,post}return null},FeedCursorAds.prototype.getXPosts=function(numPosts){var maxIdx=this._feedCurrentIdx+numPosts;maxIdx>this._feed.length&&(maxIdx=this._feed.length);var posts=this._feed.slice(this._feedCurrentIdx,maxIdx);return this._feedCurrentIdx=maxIdx,posts},FeedCursorAds.prototype.postAtIndex=function(idx){return this._feed[idx]},FeedCursorAds.prototype.numPosts=function(){return this._feed.length},FeedCursorAds.prototype.numPostsAfterCurrent=function(){return this._feed.length-this._feedCurrentIdx},FeedCursorAds.prototype.hasMorePosts=function(){return!this.allPostsLoaded},FeedCursorAds.prototype.isFirstLoad=function(){return this._firstLoad},FeedCursorAds.prototype.load=function(paramsIn){return Logger.log("FeedCursorAds->load "+this.loading),!this.loading&&(this._firstLoad?this.loadFirst(paramsIn):this.loadAfter(paramsIn))},FeedCursorAds.prototype.loadFirst=function(paramsIn){if(Logger.log("FeedCursorAds->loadFirst "+this.loading),this.loading)return!1;this._feed=[],this.postsLoaded=0;var params=z$1.extend({},this.params,paramsIn);return params.limit=this.widget.config("feed.limit",25),this._loadPosts(params,"first-load")},FeedCursorAds.prototype.loadAfter=function(paramsIn){if(Logger.log("FeedCursorAds->loadAfter "+this.loading),this.loading)return!1;var params=z$1.extend({},this.params,paramsIn);return this.pagination&&this.pagination.after&&(params.after=this.pagination.after,delete params.before),this._loadPosts(params,"after")},FeedCursorAds.prototype.loadMore=function(){return this.loadAfter()},FeedCursorAds.prototype.loadOld=function(){return this.loadAfter()},FeedCursorAds.prototype.loadBefore=function(){if(Logger.log("FeedCursorAds->loadBefore "+this.loading),this.loading)return!1;var params=z$1.extend({},this.params);return this.pagination&&this.pagination.before&&(params.before=this.pagination.before,delete params.after),this._loadPosts(params,"before")},FeedCursorAds.prototype.loadNew=function(){return this.loadBefore()},FeedCursorAds.prototype.loadPage=function(page){if(Logger.log("FeedCursorAds->loadPage "+page),this.loading)return!1;var params=z$1.extend({},this.params)
;return params.offset=page*params.limit,delete params.before,delete params.after,this._loadPosts(params,"load-page")},FeedCursorAds.prototype._loadPosts=function(params,position){var this$1=this;return Logger.log("FeedCursorAds->_loadPosts position:"+position),this.loading=!0,new Promise$2(function(resolve,reject){this$1._currentAjaxRequest=ajax.getPromise(this$1.urlFeedPosts,params,{dontChangeProtocol:!0}).then(function(ref){var success=ref.success,data=ref.data,statusCode=ref.statusCode;Logger.log("FeedCursorAds->_loadPosts success"),this$1._active&&(this$1.loading=!1,this$1._firstLoad=!1,success?(this$1.postCount=data.postCount,this$1.postsLoaded+=data.posts.length,this$1.allPostsLoaded=this$1.postsLoaded>=this$1.postCount,this$1._ads=data.ads,this$1.networks=data.networks,"before"===position?(data.posts.length&&(this$1._feed=data.posts.concat(this$1._feed)),data.pagination&&data.pagination.before&&(this$1.pagination.before=data.pagination.before)):"after"===position?(this$1.addPostsAndAdsToEnd(data.posts),data.pagination&&data.pagination.after&&(this$1.pagination.after=data.pagination.after)):"first-load"===position&&(this$1.addPostsAndAdsToEnd(data.posts),data.pagination&&(this$1.pagination.after=data.pagination.after,this$1.pagination.before=data.pagination.before)),this$1.widget.trigger(Events.FEED_LOADED,data,position),this$1.trigger(Events.FEED_LOADED,data,position),this$1.widget.trigger(Events.POSTS_LOADED,data.posts,position),this$1.trigger(Events.POSTS_LOADED,data.posts,position),resolve(data,position)):(this$1.trigger(Events.POSTS_FAILED,data,position),this$1.widget.trigger(Events.POSTS_FAILED,data,position),reject(data,statusCode)))})})},FeedCursorAds.prototype.addPostsAndAdsToEnd=function(posts){var this$1=this;if(Logger.log("FeedCursorAds->addPostsAndAdsToEnd"),this._posts=this._posts.concat(posts),this._showAds&&this._ads.length)if(posts.length)for(var i=0;i<posts.length;i++){for(var post=posts[i],pos=this$1._feed.length+1,iAd=0;iAd<this._ads.length;iAd++){var ad=cloneDeep(this$1._ads[iAd]);ad.type="ad",ad.position_start===pos?this$1._feed.push(ad):ad.position_repeats&&pos%ad.position_repeat_interval===ad.position_start&&this$1._feed.push(ad)}post.type="post",this$1._feed.push(post)}else for(var iAd$1=0;iAd$1<this._ads.length;iAd$1++){var ad$1=this$1._ads[iAd$1];ad$1.type="ad",this$1._feed.push(ad$1)}else this._feed=this._feed.concat(posts)},FeedCursorAds.prototype.loadPost=function(postId){Logger.log("FeedCursorAds->loadPost id:"+postId);var url=this.urlFeedPost+"/"+postId;return new Promise$2(function(resolve,reject){ajax.getPromise(url,{},{dontChangeProtocol:!0}).then(function(ref){var success=ref.success,data=ref.data;Logger.log("FeedCursorAds->loadPost returned "),success?resolve(data):reject()})})},FeedCursorAds.prototype.destroy=function(){Logger.log("FeedCursorAds->destroy"),this._active=!1,delete this.pagination,delete this._ads,delete this._feed,delete this._posts,delete this.widget,EventBus$$1.prototype.destroy.call(this)},FeedCursorAds}(EventBus),Tracker=function(widget){this.widget=widget,this.uriBuilder=new UriBuilder(widget.config("feed.apiEndpoint")),this.urlFeedTack=this.uriBuilder.build("/restricted/feeds/{{feedId}}/track",{feedId:widget.config("feed.id")}),this.urlFeedTack=this.uriBuilder.build("/restricted/feeds/{{feedId}}/track",{feedId:widget.config("feed.id")})};Tracker.prototype.track=function(a){ajax.get(this.urlFeedTack,{a:a},function(data){Logger.log("Tracker->track success"),Logger.log(data)},function(jqXHR,textStatus,errorThrown){Logger.log("Tracker->track fail"),Logger.log(textStatus),Logger.log(errorThrown)})},Tracker.prototype.trackPostAction=function(postId,a){var params={postId:postId,feedId:this.widget.config("feed.id")},url=this.uriBuilder.build("/restricted/feeds/{{feedId}}/posts/{{postId}}/action",params);ajax.get(url,{action:a},function(data){Logger.log("Tracker->track success"),Logger.log(data)},function(jqXHR,textStatus,errorThrown){Logger.log("Tracker->track fail"),Logger.log(textStatus),Logger.log(errorThrown)})};var Browser={getQuery:function(name,defaultValue){void 0===defaultValue&&(defaultValue=null);var query=function(a){if(""===a)return{};for(var b={},i=0;i<a.length;++i){var p=a[i].split("=",2);b[p[0]]=1===p.length?"":decodeURIComponent(p[1].replace(/\+/g," "))}return b}(window.location.search.substr(1).split("&"));return query[name]?query[name]:defaultValue}},BaseWidget=function(Control$$1){function BaseWidget(){Control$$1.call(this),this.id=CommonUtils.uId(),Logger.log("BaseWidget->construct"),this.feed=null,this.$container=null,this._config={},this._responsiveConfig=null,this.autoLoadTimeout=null,this.autoLoading=!1}return Control$$1&&(BaseWidget.__proto__=Control$$1),BaseWidget.prototype=Object.create(Control$$1&&Control$$1.prototype),BaseWidget.prototype.constructor=BaseWidget,BaseWidget.prototype.setOptions=function(options,defaults){return options?("true"===Browser.getQuery("curatorDebug","false")&&(options.debug=!0),this._config=z$1.extend(!0,{},defaults,options),this.config("container")?!!HtmlUtils.checkContainer(this.config("container"))&&(this.$container=z$1(options.container),this.configLoadInline(),this.config("feed.id")||Logger.error("options.feedId missing"),Logger.debug=!!this.config("debug"),Logger.log("Setting language to: "+this.config("lang")),void mod.setLang(this.config("lang"))):(Logger.error("options.container missing"),!1)):(Logger.error("options missing"),!1)},BaseWidget.prototype.init=function(options,defaults){this.setOptions(options,defaults),this.$container.addClass("crt-widget"),HtmlUtils.isTouch()?this.$container.addClass("crt-touch"):this.$container.addClass("crt-no-touch");var theme=this.config("theme","");theme&&this.$container.addClass("crt-widget-theme-"+theme),this.checkPoweredBy(),this.createFeed(),this.createFilter(),this.createPopupManager(),this.createTracker(),this.checkDeepLink();var crtEvent={name:"crt:widget:created",data:{feedId:options.feedId}};return window.postMessage(crtEvent,"*"),!0},BaseWidget.prototype.renderWidget=function(){return this.templateId=this.config("widget.template"),this.render(),this.$el},BaseWidget.prototype.setStyles=function(styles){this.sheet?this.clearStyles():this.sheet=HtmlUtils.createSheet(),this.setStylesGeneral(styles)},BaseWidget.prototype.setStylesGeneral=function(styles){this.addStyle(styles.popup,".crt-popup"),this.addStyle(styles.widget,".crt-widget"),this.addStyle(styles.loadMore,".crt-widget .crt-load-more"),this.addStyle(styles.post,".crt-widget .crt-post"),this.addStyle(styles.postText,".crt-widget .crt-post-text"),this.addStyle(styles.postTextLink,".crt-widget .crt-post-text a"),this.addStyle(styles.postName,".crt-widget .crt-post-fullname a"),this.addStyle(styles.postUsername,".crt-widget .crt-post-username a"),this.addStyle(styles.postIcon,".crt-widget .crt-social-icon i"),this.addStyle(styles.postComments,".crt-widget .crt-comments-likes"),this.addStyle(styles.postShareIcons,".crt-widget .crt-post-footer .crt-post-share a"),this.addStyle(styles.postDate,".crt-widget .crt-post-date a"),this.addStyle(styles.postMaxHeightReadMore,".crt-widget .crt-post.crt-post-max-height .crt-post-max-height-read-more"),this.addStyle(styles.gridPost,".crt-widget .crt-grid-post")},BaseWidget.prototype.setStylesGrid=function(styles){var this$1=this;if(this.addStyle(styles.popup,".crt-popup"),this.addStyle(styles.widget,".crt-widget"),this.addStyle(styles.loadMore,".crt-widget .crt-load-more"),this.addStyle(styles.gridPostIcon,".crt-widget .crt-social-icon i"),this.addStyle(styles.gridPost,".crt-widget .crt-grid-post"),this.addStyle(styles.gridPostContent,".crt-widget .crt-grid-post-content"),this.addStyle(styles.gridPostText,".crt-widget .crt-grid-post .crt-post-text"),this.addStyle(styles.gridPostText,".crt-widget .crt-grid-post .crt-post-title"),this.addStyle(styles.gridPostTextLink,".crt-widget .crt-grid-post .crt-post-text a"),this.addStyle(styles.gridPostHover,".crt-widget .crt-grid-post .crt-post-hover"),this.addStyle(styles.gridPostHoverLink,".crt-widget .crt-grid-post .crt-post-hover a"),this.addStyle(styles.gridPostFooter,".crt-widget .crt-grid-post .crt-post-footer"),this.addStyle(styles.gridPostDate,".crt-widget .crt-date"),styles.cssRules)for(var className in styles.cssRules)styles.cssRules.hasOwnProperty(className)&&this$1.addStyle(styles.cssRules[className],className)},BaseWidget.prototype.clearStyles=function(){HtmlUtils.deleteCSSRules(this.sheet)},BaseWidget.prototype.addStyle=function(stylesObj,className){if(stylesObj){var rules=[];for(var key in stylesObj)if(stylesObj.hasOwnProperty(key)){var ruleName=StringUtils.camelToDash(key),rule=ruleName+": "+stylesObj[key];rules.push(rule)}rules.length>0&&HtmlUtils.addCSSRule(this.sheet,className,rules.join(";"))}},BaseWidget.prototype.updateResponsiveOptions=function(){if(!this._config.responsive)return void(this._responsiveConfig=z$1.extend(!0,{},this._config));var width=z$1(window).width(),keys=Object.keys(this._config.responsive);keys=keys.map(function(x){return parseInt(x)}),keys=keys.sort(function(a,b){return a-b}),keys=keys.reverse();for(var foundKey=null,i=0,list=keys;i<list.length;i+=1){var key=list[i];width<=key&&(foundKey=key)}foundKey||(this.responsiveKey=null,this._responsiveConfig=z$1.extend(!0,{},this._config)),this.responsiveKey!==foundKey&&(this.responsiveKey=foundKey,this._responsiveConfig=z$1.extend(!0,{},this._config,this._config.responsive[foundKey]))},BaseWidget.prototype.configLoadInline=function(){for(var this$1=this,inlineOptions=["lang","debug"],i=0,list=inlineOptions;i<list.length;i+=1){var option=list[i],val=this$1.$container.data("crt-"+option);val&&(this$1._config[option]=val)}this.updateResponsiveOptions()},BaseWidget.prototype.config=function(fullPath,defaultValue){if(defaultValue=void 0===defaultValue?null:defaultValue,this._responsiveConfig||this.updateResponsiveOptions(),fullPath.indexOf(".")>0){for(var path=fullPath.split("."),current=this._responsiveConfig;path.length;){if("object"!=typeof current)return console.log("CONFIG ERROR: "+fullPath),defaultValue||null;current=current[path.shift()]}return void 0===current||null===current?defaultValue:current}var current$1=this._responsiveConfig[fullPath];return void 0===current$1?(console.log("CONFIG ERROR: "+fullPath),defaultValue):current$1},BaseWidget.prototype.createFeed=function(){this.feed=new FeedCursorAds(this),this.feed.on(Events.POSTS_LOADED,this.onPostsLoaded.bind(this)),this.feed.on(Events.POSTS_FAILED,this.onPostsFail.bind(this)),this.feed.on(Events.FEED_LOADED,this.onFeedLoaded.bind(this))},BaseWidget.prototype.createPopupManager=function(){this.popupManager=new PopupManager(this,this.feed)},BaseWidget.prototype.createTracker=function(){this.tracker=new Tracker(this)},BaseWidget.prototype.createFilter=function(){Logger.log("BaseWidget->createFilter"),(this.config("filter.showNetworks")||this.config("filter.showSources"))&&(this.filter=new Filter(this),this.$container.append(this.filter.$el))},BaseWidget.prototype.createPostElements=function(posts){var that=this,postElements=[];return z$1(posts).each(function(){var p=that.createElement(this);postElements.push(p.$el)}),postElements},BaseWidget.prototype.createElement=function(json){return"ad"===json.type?this.createAdElement(json):this.createPostElement(json)},BaseWidget.prototype.createPostElement=function(postJson){var post=new GeneralPost(this,postJson);return post.on(Events.POST_CLICK,this.onPostClick.bind(this)),post.on(Events.POST_CLICK_READ_MORE,this.onPostClickReadMore.bind(this)),post.on(Events.POST_IMAGE_LOADED,this.onPostImageLoaded.bind(this)),post.on(Events.POST_IMAGE_FAILED,this.onPostImageFailed.bind(this)),this.trigger(Events.POST_CREATED,post),post},BaseWidget.prototype.createAdElement=function(adJson){var ad=new Ad(this,adJson);return ad.on(Events.POST_IMAGE_LOADED,this.onPostImageLoaded.bind(this)),ad.on(Events.POST_IMAGE_FAILED,this.onPostImageFailed.bind(this)),this.trigger(Events.AD_CREATED,ad),ad},BaseWidget.prototype.checkDeepLink=function(){var this$1=this;if(this.config("popup.deepLink")){var hash=window.document.location.hash;if(hash=hash.replace("#",""),hash.indexOf("crt:post:")>-1){var postId=hash.substring("crt:post:".length);this.feed.loadPost(postId).then(function(response){this$1.popupManager.showPopup(response.post)})}}},BaseWidget.prototype.onPostsLoaded=function(event,posts){Logger.log("BaseWidget->onPostsLoaded"),Logger.log(event),Logger.log(posts)},BaseWidget.prototype.onPostsFail=function(event,data){Logger.log("BaseWidget->onPostsLoadedFail"),Logger.log(event),Logger.log(data)},BaseWidget.prototype.onPostClick=function(ev,post){Logger.log("BaseWidget->onPostClick"),Logger.log(ev),Logger.log(post),this.trigger(Events.POST_CLICK,post),this.trackPostAction(post.json.id,"click"),this.config("post.clickAction")===Globals.POST_CLICK_ACTION_OPEN_POPUP?this.popupManager.showPopup(post.json):this.config("post.clickAction")===Globals.POST_CLICK_ACTION_GOTO_SOURCE&&""!==post.json.url&&window.open(post.json.url)},BaseWidget.prototype.onPostClickReadMore=function(ev,post){Logger.log("BaseWidget->onPostClickReadMore"),Logger.log(ev),Logger.log(post),this.trigger(Events.POST_CLICK_READ_MORE,post),this.config("post.clickReadMoreAction")===Globals.POST_CLICK_ACTION_OPEN_POPUP?this.popupManager.showPopup(post.json):this.config("post.clickReadMoreAction")===Globals.POST_CLICK_ACTION_GOTO_SOURCE&&window.open(post.json.url)},BaseWidget.prototype.onPostImageLoaded=function(ev,post){},BaseWidget.prototype.onPostImageFailed=function(ev,post){},BaseWidget.prototype.onFeedLoaded=function(ev,response){this.config("hidePoweredBy")&&1===response.account.plan.unbranded?this.$container.addClass("crt-widget-unbranded"):this.$container.addClass("crt-widget-branded")},BaseWidget.prototype.track=function(a){Logger.log("Feed->track "+a),this.tracker.track(a)},BaseWidget.prototype.trackPostAction=function(postId,action){Logger.log("Feed->trackPostAction "+postId+" "+action),this.tracker.trackPostAction(postId,action)},BaseWidget.prototype.getUrl=function(postfix){return this.feedBase=this.config("feed.apiEndpoint")+"/restricted/feed",this.feedBase+postfix},BaseWidget.prototype._t=function(s){return mod.t(s)},BaseWidget.prototype.checkPoweredBy=function(){return this.$container.text().trim().indexOf("Powered by Curator.io")>-1?(this.hasPoweredBy=!0,!0):z$1(".crt-logo").length&&z$1(".crt-logo").text().trim().indexOf("Powered by Curator.io")>-1?(this.hasPoweredBy=!0,!0):z$1(".crt-tag").length&&z$1(".crt-tag").text().trim().indexOf("Powered by Curator.io")>-1?(this.hasPoweredBy=!0,!0):(this.hasPoweredBy=!1,!1)},BaseWidget.prototype.showNoPostsMessage=function(){["curator-admin.test","admin.curator.io","admin-stage.curator.io","superadmin.curator.io","app.curator.io","localhost"].indexOf(window.location.hostname)!==-1&&this.showMessage("The feed contains no posts")},BaseWidget.prototype.showMessage=function(message,type){type=type||"info",this.removeMessage(),this.$message=z$1('<div class="crt-notice crt-notice-'+type+'"><span>'+message+"</span></div>"),this.$el.append(this.$message)},BaseWidget.prototype.removeMessage=function(){this.$message&&this.$message.remove()},BaseWidget.prototype.startAutoLoad=function(){Logger.log("BaseWidget->startAutoLoad"),this.autoLoading=!0,this.autoLoadTimeout=window.setTimeout(this.onAutoLoadFire.bind(this),3e4)},BaseWidget.prototype.stopAutoLoad=function(){Logger.log("BaseWidget->stopAutoLoad"),this.autoLoading=!1,window.clearTimeout(this.autoLoadTimeout)},BaseWidget.prototype.onAutoLoadFire=function(){Logger.log("BaseWidget->onAutoLoadFire"),this.feed.loadBefore(),this.autoLoadTimeout=window.setTimeout(this.onAutoLoadFire.bind(this),3e4)},BaseWidget.prototype.destroy=function(){var this$1=this;if(Logger.log("BaseWidget->destroy"),this.feed&&(this.feed.destroy(),delete this.feed),this.filter&&(this.filter.destroy(),delete this.filter),this.popupManager&&(this.popupManager.destroy(),delete this.popupManager),this.sheet&&(this.clearStyles(),delete this.sheet),this.$container.removeClass("crt-widget"),this.$container.removeClass("crt-widget-unbranded"),this.$container.removeClass("crt-widget-branded"),this.$container.removeClass("crt-no-touch"),this.$container[0].classList)for(var i=0;i<this.$container[0].classList.length;i++){var className=this$1.$container[0].classList[i];0===className.indexOf("crt-widget-theme-")&&this$1.$container.removeClass(className)}delete this.$container,Control$$1.prototype.destroy.call(this)},BaseWidget}(Control),makeArray=function(array,results){return array=Array.prototype.slice.call(array),results?(results.push.apply(results,array),results):array},LayoutWaterfallConfig={colGutter:0,selector:".crt-post-c",animationSpeed:200,animationDuration:300,animationEffect:"fadeInOnAppear",animationQueue:!0,animationComplete:function(){}},LayoutWaterfall=function(widget,element){Logger.log("WaterfallLayout->constructor"),this.element=z$1(element),this.id=CommonUtils.uId(),this.name=this._setName(5),this.gridArr=[],this.gridArrAppend=[],this.gridArrPrepend=[],this.setArr=!1,this.setGrid=!1,this.cols=-1,this.itemCount=0,this.isPrepending=!1,this.appendCount=0,this.resetCount=!0,this.ifCallback=!0,this.box=this.element,this.boxWidth=this.box.width(),this.widget=widget,this._layoutWaterfallConfig=LayoutWaterfallConfig,this.gridArr=makeArray(this.box.find(this._layoutWaterfallConfig.selector)),this.isResizing=!1,this.w=0,this.boxArr=[],this.visible=!1,this.resize(),this.createHandlers(),this.$spacer=this.element.find(".crt-feed-spacer"),this.$spacer.remove()};LayoutWaterfall.prototype.createHandlers=function(){var this$1=this;Logger.log("WaterfallLayout->createHandlers"),this.resizeDebounced=CommonUtils.debounce(function(){this$1.resize()},100),this.ro=new index(function(entries){entries.length>0&&this$1.redraw()}),this.ro.observe(this.element[0]),this.redraw()},LayoutWaterfall.prototype.destroyHandlers=function(){Logger.log("WaterfallLayout->destroyHandlers"),this.ro&&(this.ro.disconnect(),this.ro=null)},LayoutWaterfall.prototype.redraw=function(){this.resizeDebounced()},LayoutWaterfall.prototype._setName=function(length,current){return current=current?current:"",length?this._setName(--length,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+current):current},LayoutWaterfall.prototype._setCols=function(newCols){var this$1=this;Logger.log("WaterfallLayout->_setCols "+newCols);var boxWidth=this.box.width();Logger.log("boxWidth: "+boxWidth),this.cols=newCols,this.cols<1&&(this.cols=1);var configColWidth=this.widget.config("widget.colWidth"),colGutter=this.widget.config("widget.colGutter",0),diff=(boxWidth-this.cols*configColWidth-colGutter)/this.cols,colWidth=(configColWidth+diff)/boxWidth*100;(colWidth<0||colWidth>100)&&(colWidth=100),this.w=colWidth,this.colHeights=new Array(this.cols),this.colHeights.fill(0),this.colItems=new Array(this.cols),this.colItems.fill([]),this.box.find(".galcolumn").remove();for(var i=0;i<this.cols;i++){var div=z$1("<div></div>").addClass("galcolumn").attr("id","item"+i+this$1.name).css({width:colWidth+"%",float:"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this$1.box.append(div)}},LayoutWaterfall.prototype._renderGrid=function(method,arr,count){var this$1=this,items=[],boxes=[],appendCount=this.appendCount,cols=this.cols,name=this.name;arr?(isArray(arr)||(arr=[arr]),boxes=arr,"append"===method&&(appendCount+=count),"prepend"===method&&(this.isPrepending=!0),"renderAfterPrepend"===method&&(appendCount+=count)):(boxes=z$1(this.gridArr),appendCount=z$1(this.gridArr).length);for(var x=0;x<boxes.length;x++){var item=boxes[x],$item=z$1(item);$item.css({zoom:"1",filter:"alpha(opacity=0)",opacity:"0"});for(var shortestCol=0,i=1;i<this.colHeights.length;i++)this$1.colHeights[i]<this$1.colHeights[shortestCol]&&(shortestCol=i);"prepend"===method?(z$1("#item"+shortestCol+name).prepend($item),items.push($item)):(z$1("#item"+shortestCol+name).append($item),items.push($item),appendCount>=cols&&(appendCount-=cols)),this$1.colItems[shortestCol].push($item),this$1.colHeights[shortestCol]+=$item.height()}this.appendCount=appendCount,"append"===method||"prepend"===method?("prepend"===method&&this._updateAfterPrepend(this.gridArr,boxes),this._renderItem(items),this.isPrepending=!1):this._renderItem(this.gridArr)},LayoutWaterfall.prototype._collectItems=function(){var collection=[];return z$1(this.box).find(this._layoutWaterfallConfig.selector).each(function(){collection.push(z$1(this))}),collection},LayoutWaterfall.prototype._renderItem=function(items){var speed=this._layoutWaterfallConfig.animationSpeed,effect=this._layoutWaterfallConfig.animationEffect,duration=this._layoutWaterfallConfig.animationDuration,queue=this._layoutWaterfallConfig.animationQueue,animate=this._layoutWaterfallConfig.animate,complete=this._layoutWaterfallConfig.animationComplete,i=0,t=0;animate!==!0||this.isResizing?(z$1.each(items,function(index$$1,value){z$1(value).css({opacity:"1",filter:"alpha(opacity=100)"})}),this.ifCallback&&complete.call(items)):(queue===!0&&"fadeInOnAppear"===effect?(this.isPrepending&&items.reverse(),z$1.each(items,function(index$$1,value){window.setTimeout(function(){z$1(value).animate({opacity:"1.0"},duration),++t===items.length&&complete.call(void 0,items)},i*speed),i++})):queue===!1&&"fadeInOnAppear"===effect&&(this.isPrepending&&items.reverse(),z$1.each(items,function(index$$1,value){z$1(value).animate({opacity:"1.0"},duration),++t===items.length&&this.ifCallback&&complete.call(void 0,items)})),queue!==!0||effect||z$1.each(items,function(index$$1,value){z$1(value).css({opacity:"1",filter:"alpha(opacity=100)"}),++t===items.length&&this.ifCallback&&complete.call(void 0,items)}))},LayoutWaterfall.prototype._updateAfterPrepend=function(prevItems,newItems){var gridArr=this.gridArr;z$1.each(newItems,function(index$$1,value){gridArr.unshift(value)}),this.gridArr=gridArr},LayoutWaterfall.prototype.resize=function(){Logger.log("WaterfallLayout->resize");var colWidth=this.widget.config("widget.colWidth"),newCols=Math.floor(this.box.width()/colWidth);newCols<1&&(newCols=1),this.cols!==newCols&&(HtmlUtils.isVisible(this.element)||(this.visible=!1),this.visible=!0,this.ifCallback=!1,this.isResizing=!0,this._setCols(newCols),this._renderGrid("append"),this.ifCallback=!0,this.isResizing=!1,this.boxWidth=this.box.width())},LayoutWaterfall.prototype.append=function(items){var gridArr=this.gridArr,gridArrAppend=this.gridArrPrepend;z$1.each(items,function(index$$1,value){gridArr.push(value),gridArrAppend.push(value)}),this._renderGrid("append",items,z$1(items).length)},LayoutWaterfall.prototype.prepend=function(items){this.ifCallback=!1,this._renderGrid("prepend",items,z$1(items).length),this.ifCallback=!0},LayoutWaterfall.prototype.empty=function(){var this$1=this;Logger.log("WaterfallLayout->empty"),this.gridArr=[],this.colHeights=new Array(this.cols),this.colHeights.fill(0),this.colItems=new Array(this.cols),this.colItems.fill([]);for(var i=0;i<this.cols;i++)z$1("#item"+i+this$1.name).empty()},LayoutWaterfall.prototype.destroy=function(){this.destroyHandlers()};var baseFor=function(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}(),objectTag$3="[object Object]",funcProto$2=Function.prototype,objectProto$13=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$10=objectProto$13.hasOwnProperty,objectCtorString=funcToString$2.call(Object),nativeMax=Math.max,baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now,setToString=function(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}(baseSetToString),merge=function(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:void 0,guard=length>2?sources[2]:void 0;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):void 0,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}(function(object,source,srcIndex){baseMerge(object,source,srcIndex)}),Waterfall=function(Widget$$1){function Waterfall(options){Widget$$1.call(this);var config$$1=merge({},config,options);if(config$$1.feed.limit=config$$1.widget.postsPerPage,this._postsVisible=[],this._postsLoadIndex=-1,this._postContainer=[],this.init(config$$1,{})){Logger.log("Waterfall->init"),this._lazyLoad=this.config("widget.lazyLoad",!1),this._progressiveLoad=this.config("widget.progressiveLoad",!1),this.renderWidget();try{this.$container.append(this.$el),this.$container.addClass("crt-widget-waterfall"),this.checkRefs(["feed"]),this.$refs.loadMore.hide(),this.ui=new LayoutWaterfall(this,this.$refs.feed),this.iniListeners(),this.load()}catch(e){throw this.showMessage("Feed failed to load, check browser console for more info","error"),e}}}return Widget$$1&&(Waterfall.__proto__=Widget$$1),Waterfall.prototype=Object.create(Widget$$1&&Widget$$1.prototype),Waterfall.prototype.constructor=Waterfall,Waterfall.prototype.iniListeners=function(){var this$1=this;this.config("widget.continuousScroll")&&z$1(this.$el).scroll(function(){var height=this$1.$el.height(),cHeight=this$1.$refs.feed.height();this$1.$el.scrollTop()>=cHeight-height&&this$1.onMoreClick()}),this.config("widget.autoLoadNew")&&this.startAutoLoad()},Waterfall.prototype.destroyListeners=function(){this.stopAutoLoad()},Waterfall.prototype.onMoreClick=function(){this.log("onMoreClick"),this.load()},Waterfall.prototype.reload=function(){this.log("reload"),this.removePosts(),this.feed.reset(),this.ui.empty(),this.load()},Waterfall.prototype.load=function(){var this$1=this;if(this.log("load"),this.feed.loading)return!1;this._postsLoadIndex=0,this._postsVisible=[],this.removeMessage(),this.feed.loadXPosts(this.config("widget.postsPerPage")).then(function(posts){if(this$1.alive)if(0===this$1.feed.numPosts())this$1.showNoPostsMessage(),this$1.$refs.loadMore.hide();else{this$1.feed.numPosts()>0&&this$1.removeMessage();for(var i=0;i<posts.length;i++){var postElement=this$1.createElement(posts[i]);this$1.ui.append(postElement.$el),this$1._postsVisible.push(postElement)}this$1._progressiveLoad&&this$1._loadNextPostImage(0),this$1.config("widget.showLoadMore")&&this$1._hasMorePostsToShow()?this$1.$refs.loadMore.show():this$1.$refs.loadMore.hide()}}).catch(function(data){data.message?this$1.showMessage(data.message,"error"):this$1.showMessage("Feed failed to load, check browser console for more info","error")})},Waterfall.prototype.loadBefore=function(){this.log("loadBefore"),this.feed.loadBefore()},Waterfall.prototype.loadPage=function(page){var this$1=this;if(this.log("loadPage"),this.feed.loading)return!1;this.removePosts(),this.ui.empty(),this._postsLoadIndex=-1,this.feed.loadPage(page).then(function(response){for(var posts=response.posts,i=0,list=posts;i<list.length;i+=1){var post=list[i],postElement=this$1.createElement(post);this$1.ui.append(postElement.$el),this$1._postsVisible.push(postElement)}this$1._progressiveLoad&&this$1._loadNextPostImage(0)})},Waterfall.prototype.onPostsLoaded=function(event,posts,position){Logger.log("Waterfall->onPostsLoaded "+position)},Waterfall.prototype.onPostImageLoaded=function(){this._progressiveLoad&&this._loadNextPostImage(this._postsLoadIndex+1)},Waterfall.prototype.onPostImageFailed=function(){this._progressiveLoad&&this._loadNextPostImage(this._postsLoadIndex+1)},Waterfall.prototype._loadNextPostImage=function(postToLoad){Logger.log("Waterfall->_loadNextPostImage "+postToLoad),postToLoad<this._postsVisible.length?(this._postsVisible[postToLoad].loadImage(),this._postsLoadIndex=postToLoad):Logger.log("Waterfall->_loadNextPostImage ALL LOADED")},Waterfall.prototype._hasMorePostsToShow=function(){return this.feed.allPostsLoaded===!1},Waterfall.prototype.log=function(s){var className="Waterfall["+this.id+"]";Logger.log(className+"->"+s)},Waterfall.prototype.removePosts=function(){var this$1=this;this.log("removePosts");for(var i=0;i<this._postsVisible.length;i++)this$1._postsVisible[i].destroy();this._postsVisible=[]},Waterfall.prototype.destroy=function(){this.log("destroy"),this.removePosts(),this.destroyListeners(),this.ui&&this.ui.destroy(),this.$container.removeClass("crt-widget-waterfall"),Widget$$1.prototype.destroy.call(this)},Waterfall}(BaseWidget),ListPost=function(Base){function ListPost(widget,postJson){var this$1=this;Base.call(this,widget,postJson),this.render(),this.$refs.image.css({opacity:0}),this.json.image?(this.$refs.image[0].addEventListener("load",this.onImageLoaded.bind(this),!0),this.$refs.image[0].addEventListener("error",this.onImageError.bind(this),!0)):window.setTimeout(function(){this$1.setHeight()},100),0!==this.json.url.indexOf("http")&&this.$el.find(".crt-post-share").hide();var imageWidth=this.widget.config("post.imageWidth");imageWidth&&this.$refs.imageCol.css("width",imageWidth),this.setupVideo(),this.setupCarousel(),this.setupShare(),this.setupCommentsLikes()}return Base&&(ListPost.__proto__=Base),ListPost.prototype=Object.create(Base&&Base.prototype),ListPost.prototype.constructor=ListPost,ListPost.prototype.onImageLoaded=function(){this.$refs.image.animate({opacity:1}),this.setHeight(),this.trigger(Events.POST_IMAGE_LOADED,this),this.widget.trigger(Events.POST_IMAGE_LOADED,this)},ListPost.prototype.onImageError=function(){this.$refs.image.hide(),this.setHeight(),this.trigger(Events.POST_IMAGE_FAILED,this),this.widget.trigger(Events.POST_IMAGE_FAILED,this)},ListPost.prototype.setHeight=function(){this.layout()},ListPost.prototype.getHeight=function(){return this.$el.hasClass("crt-post-max-height")?this.$refs.postC.height():this.$el.find(".crt-post-content").height()+this.$el.find(".crt-post-footer").height()+2},ListPost.prototype.layout=function(){this.layoutFooter(),this.trigger(Events.POST_LAYOUT_CHANGED,this)},ListPost.prototype.layoutFooter=function(){var $userName=this.$el.find(".crt-post-username"),$date=this.$el.find(".crt-date"),$footer=this.$el.find(".crt-post-footer"),$share=this.$el.find(".crt-post-share"),$userImage=this.$el.find(".crt-post-userimage"),footerWidth=$footer.width();$userName.width()+$date.width()+$share.width()+$userImage.width()+40>footerWidth&&$userName.hide()},ListPost}(BasePost),List=function(Widget){function List(options){Widget.call(this),this.loading=!1,this.feed=null,this.$refs={feed:null,loadMore:null},this.posts=[],this.postElements=[];var config=merge({},config$7,options);config.feed.limit=config.widget.postsPerPage,this.init(options,{})&&(this.log("init"),this.templateId=this.config("widget.template"),this.render(),this.$container.append(this.$el),this.$scroller=z$1(window),this.$el.addClass("crt-widget-list"),this.$refs.loadMore.hide(),this.createHandlers(),this.load())}return Widget&&(List.__proto__=Widget),List.prototype=Object.create(Widget&&Widget.prototype),List.prototype.constructor=List,List.prototype.load=function(){var this$1=this;if(this.log("load "+this.feed.loading),!this.feed.loading){var anim=function(post,i){window.setTimeout(function(){post.$el.css({opacity:0}).animate({opacity:1})},100*i)},postsPerPage=this.config("widget.postsPerPage",12);this.feed.afterIterator(postsPerPage).each(function(postJson,idx){var post=this$1.createElement(postJson);this$1.postElements.push(post),
this$1.$refs.feed.append(post.$el),post.layout(),this$1.config("widget.animate")&&(post.$el.css({opacity:0}),anim(post,idx))}).done(function(){this$1.config("widget.showLoadMore")?this$1.feed.allPostsLoaded?this$1.$refs.loadMore.hide():this$1.$refs.loadMore.show():this$1.$refs.loadMore.hide()}).catch(function(data){data.message?this$1.showMessage(data.message,"error"):this$1.showMessage("Feed failed to load, check browser console for more info","error")})}},List.prototype.reload=function(){this.feed.reset(),this.$refs.feed.empty(),this.load()},List.prototype.createHandlers=function(){var this$1=this,id=this.id;this._resize=CommonUtils.debounce(this.updateLayout.bind(this)),this._checkScroll=CommonUtils.debounce(this.checkScroll.bind(this)),z$1(window).on("curatorCssLoaded."+id,this._resize),z$1(document).on("ready."+id,this._resize),this.config("widget.continuousScroll")&&z$1(window).on("scroll."+id,this._checkScroll.bind(this)),this.ro=new index(function(entries){entries.length>0&&this$1._resize()}),this.ro.observe(this.$el[0])},List.prototype.destroyHandlers=function(){var id=this.id;z$1(window).off("curatorCssLoaded."+id),z$1(document).off("ready."+id),z$1(window).off("scroll."+id),this.ro&&(this.ro.disconnect(),this.ro=null)},List.prototype.updateLayout=function(){},List.prototype.checkScroll=function(){this.log("checkScroll");var top=this.$el.offset().top,feedBottom=top+this.$refs.feedWindow.height();if(this.$scroller.scrollTop()+z$1(window).height()-feedBottom>this.config("widget.continuousScrollOffset")&&!this.feed.loading&&!this.feed.allPostsLoaded){var loadMoreRows=this.config("widget.loadMoreRows");this.rowsMax+=loadMoreRows,this.updateLayout()}},List.prototype.onPostsLoaded=function(event,posts){this.log("onPostsLoaded")},List.prototype.onMoreClick=function(){this.load()},List.prototype.createPostElement=function(postJson){var post=new ListPost(this,postJson);return post.on(Events.POST_CLICK,this.onPostClick.bind(this)),post.on(Events.POST_CLICK_READ_MORE,this.onPostClickReadMore.bind(this)),post.on(Events.POST_IMAGE_LOADED,this.onPostImageLoaded.bind(this)),this.trigger(Events.POST_CREATED,post),post},List.prototype.log=function(s){var className="List["+this.id+"]";Logger.log(className+"->"+s)},List.prototype.destroy=function(){this.destroyHandlers(),this.$el.empty().removeClass("crt-widget-list").removeClass("crt-list-col"+this.columnCount).css({height:"",overflow:""}),delete this.loading,Widget.prototype.destroy.call(this)},List.prototype.setStyles=function(styles){this.sheet?this.clearStyles():this.sheet=HtmlUtils.createSheet(),this.setStylesGrid(styles)},List}(BaseWidget),GridPost=function(Base){function GridPost(widget,postJson){if(Base.call(this,widget,postJson),this.$refs={spacer:null,postC:null},this.render(),this.widget.config("post.imageHeight","100%")){var imageHeight=this.widget.config("post.imageHeight","100%");this.$refs.spacer.css("padding-bottom",imageHeight)}this.setupVideo(),this.setupCarousel(),this.setupShare()}return Base&&(GridPost.__proto__=Base),GridPost.prototype=Object.create(Base&&Base.prototype),GridPost.prototype.constructor=GridPost,GridPost.prototype.getHeight=function(){var h=this.$el.height(),marginBottom=parseInt(this.$el.css("margin-bottom")),marginTop=parseInt(this.$el.css("margin-top")),paddingBottom=z$1.zepto?0:parseInt(this.$el.css("padding-bottom")),paddingTop=z$1.zepto?0:parseInt(this.$el.css("padding-top"));return h+=marginTop,h+=marginBottom,h+=paddingTop,h+=paddingBottom},GridPost.prototype.showAnim=function(i){var this$1=this;this.$el.css({opacity:0}),window.setTimeout(function(){this$1.$el.animate({opacity:1})},100*i)},GridPost.prototype.rafTick=function(){if(this.reqCount%50==0){var h=this.rafContainer.offsetHeight,visible=this.testInFrame(h);visible&&!this.videoPlayer.isPlaying()?this.videoPlayer.play():!visible&&this.videoPlayer.isPlaying()&&this.videoPlayer.pause()}this.reqCount++,this.raf=window.requestAnimationFrame(this.rafTick.bind(this))},GridPost.prototype.layout=function(){this.layoutFooter(),this.trigger(Events.POST_LAYOUT_CHANGED,this)},GridPost.prototype.onWidgetResize=function(){this.layoutFooter()},GridPost.prototype.layoutFooter=function(){if(!this.$el.hasClass("crt-grid-post-new-york")){var $userName=this.$el.find(".crt-post-username"),$date=this.$el.find(".crt-date"),$footer=this.$el.find(".crt-post-footer"),$share=this.$el.find(".crt-post-share"),$userImage=this.$el.find(".crt-post-userimage"),footerWidth=$footer.width();$userName.width()+$date.width()+$share.width()+$userImage.width()+40>footerWidth&&$userName.hide()}},GridPost}(BasePost),GridAd=function(Base){function GridAd(widget,postJson){if(Base.call(this,widget,postJson),this.$refs={spacer:null,postC:null},this.templateId="ad-grid",this.render(),this.widget.config("post.imageHeight","100%")){var imageHeight=this.widget.config("post.imageHeight","100%");this.$refs.spacer.css("padding-bottom",imageHeight)}}return Base&&(GridAd.__proto__=Base),GridAd.prototype=Object.create(Base&&Base.prototype),GridAd.prototype.constructor=GridAd,GridAd.prototype.getHeight=function(){var h=this.$el.height(),marginBottom=parseInt(this.$el.css("margin-bottom")),marginTop=parseInt(this.$el.css("margin-top")),paddingBottom=z$1.zepto?0:parseInt(this.$el.css("padding-bottom")),paddingTop=z$1.zepto?0:parseInt(this.$el.css("padding-top"));return h+=marginTop,h+=marginBottom,h+=paddingTop,h+=paddingBottom},GridAd.prototype.showAnim=function(i){var this$1=this;this.$el.css({opacity:0}),window.setTimeout(function(){this$1.$el.animate({opacity:1})},100*i)},GridAd.prototype.rafTick=function(){if(this.reqCount%50==0){var h=this.rafContainer.offsetHeight,visible=this.testInFrame(h);visible&&!this.videoPlayer.isPlaying()?this.videoPlayer.play():!visible&&this.videoPlayer.isPlaying()&&this.videoPlayer.pause()}this.reqCount++,this.raf=window.requestAnimationFrame(this.rafTick.bind(this))},GridAd.prototype.layout=function(){this.layoutFooter(),this.trigger(Events.POST_LAYOUT_CHANGED,this)},GridAd.prototype.onWidgetResize=function(){this.layoutFooter()},GridAd.prototype.layoutFooter=function(){if(!this.$el.hasClass("crt-grid-post-new-york")){var $userName=this.$el.find(".crt-post-username"),$date=this.$el.find(".crt-date"),$footer=this.$el.find(".crt-post-footer"),$share=this.$el.find(".crt-post-share"),$userImage=this.$el.find(".crt-post-userimage"),footerWidth=$footer.width();$userName.width()+$date.width()+$share.width()+$userImage.width()+40>footerWidth&&$userName.hide()}},GridAd}(BaseAd),Grid=function(Widget){function Grid(options){Widget.call(this),this._loading=!1,this.columnCount=0,this.rowCount=0,this._postsRendered=[],this.allLoaded=!1,this.$refs={feedWindow:null,loadMore:null};var config=merge({},config$5,options);config.minWidth<100&&(config.minWidth=100),config.feed.postsPerPage=25,this.init(config,{})&&(this.log("init"),this.templateId=this.config("widget.template"),this.render(),this.$container.append(this.$el),this.$scroller=z$1(window),this.$container.addClass("crt-grid"),this.$container.addClass("crt-widget-grid"),this.config("widget.showLoadMore")?this.$refs.feedWindow.css({position:"relative"}):this.$refs.loadMore.hide(),this.rowCount=this.config("widget.rows"),this.createHandlers())}return Widget&&(Grid.__proto__=Widget),Grid.prototype=Object.create(Widget&&Widget.prototype),Grid.prototype.constructor=Grid,Grid.prototype.createHandlers=function(){var this$1=this,id=this.id;this._resize=CommonUtils.debounce(this.resize,100),this.ro=new index(function(entries){entries.length>0&&this$1._resize()}),this.ro.observe(this.$container[0]),z$1(window).on("curatorCssLoaded."+id,this._resize.bind(this)),this.config("widget.continuousScroll")&&z$1(window).on("scroll."+id,CommonUtils.debounce(function(){this$1.checkScroll()},100)),this.config("widget.autoLoadNew")&&this.startAutoLoad()},Grid.prototype.destroyHandlers=function(){this.log("destroyHandlers");var id=this.id;this._resize.cancel(),this._resize=null,z$1(window).off("curatorCssLoaded."+id),z$1(document).off("ready."+id),z$1(window).off("scroll."+id),this.ro&&this.ro.disconnect(),this.stopAutoLoad()},Grid.prototype.reload=function(){Logger.log("Grid->reload"),this.$refs.feed.find(".crt-grid-post").remove(),this.rowCount=this.config("widget.rows"),this._postsRendered=[],this.allLoaded=!1,this.feed.reset(),this.renderRows()},Grid.prototype.loadBefore=function(){Logger.log("Grid->loadBefore"),this.feed.loadBefore()},Grid.prototype.resize=function(){this.log("resize"),this.updateResponsiveOptions(),this.renderRows(),this.trigger(Events.WIDGET_RESIZE)},Grid.prototype.renderRows=function(){this.log("renderRows");var cols=Math.floor(this.$container.width()/this.config("post.minWidth"));cols=cols<1?1:cols,this._loading||(this.$container.removeClass("crt-grid-col"+this.columnCount),this.columnCount=cols,this.$container.addClass("crt-grid-col"+this.columnCount),this.feed.isFirstLoad()?this._loadPosts(cols):this.feed.hasMorePosts()||this._postsRendered.length<this.feed.numPosts()?this._loadPosts(cols):this.updateHeight(!0))},Grid.prototype._loadPosts=function(cols){var this$1=this;this.log("_loadPosts "+cols),this._loading=!0;var postsNeeded=cols*this.rowCount,postsToLoad=postsNeeded-this._postsRendered.length;this.feed.loadXPosts(postsToLoad).then(function(posts){for(var i=0;i<posts.length;i++){var post=this$1.createElement(posts[i]);this$1.$refs.feed.append(post.$el),post.layout(),post.showAnim(i),this$1._postsRendered.push(post)}this$1._loading=!1,this$1.updateHeightTimeout=window.setTimeout(function(){this$1.updateHeight(!0)},10)}).catch(function(data){data.message?this$1.showMessage(data.message,"error"):this$1.showMessage("Feed failed to load, check browser console for more info","error")})},Grid.prototype.createPostElement=function(postJson){var post=new GridPost(this,postJson);return post.on(Events.POST_CLICK,this.onPostClick.bind(this)),post.on(Events.POST_CLICK_READ_MORE,this.onPostClickReadMore.bind(this)),post.on(Events.POST_IMAGE_LOADED,this.onPostImageLoaded.bind(this)),this.trigger(Events.POST_CREATED,post),post},Grid.prototype.createAdElement=function(adJson){var ad=new GridAd(this,adJson);return this.trigger(Events.AD_CREATED,ad),ad},Grid.prototype.updateHeight=function(){if(this.log("updateHeight"),this.alive){var maxRows=Math.ceil(this.feed.numPosts()/this.columnCount),rows=this.rowCount<maxRows?this.rowCount:maxRows,post=this._postsRendered[0];if(post){var postHeight=post.getHeight();this.$refs.feedWindow.css({overflow:"hidden"});var scrollTopOrig=this.$scroller.scrollTop();this.$refs.feedWindow.height(rows*postHeight);this.$scroller.scrollTop()>scrollTopOrig+100&&this.$scroller.scrollTop(scrollTopOrig)}this.config("widget.showLoadMore")&&this._hasMorePostsToShow(rows)?this.$refs.loadMore.show():this.$refs.loadMore.hide(),this.trigger(Events.GRID_HEIGHT_CHANGED,this)}},Grid.prototype.checkScroll=function(){this.log("checkScroll");var top=this.$container.offset().top,feedBottom=top+this.$refs.feedWindow.height();this.$scroller.scrollTop()+z$1(window).height()-feedBottom>this.config("widget.continuousScrollOffset")&&(this.feed.loading||this.feed.allPostsLoaded||(this.rowCount+=this.config("widget.loadMoreRows"),this.renderRows()))},Grid.prototype.onMoreClick=function(){this.log("onMoreClick");var loadMoreRows=this.config("widget.loadMoreRows");this.rowCount+=loadMoreRows,this.renderRows()},Grid.prototype.setStyles=function(styles){this.sheet?this.clearStyles():this.sheet=HtmlUtils.createSheet(),this.setStylesGrid(styles)},Grid.prototype.log=function(s){var className="Grid["+this.id+"]";Logger.log(className+"->"+s)},Grid.prototype._hasMorePostsToShow=function(rows){var postsVisible=this.columnCount*rows;return this.feed.allPostsLoaded===!1||postsVisible<this.feed.numPosts()},Grid.prototype.destroy=function(){this.log("destroy"),this.destroyHandlers(),this.$container.removeClass("crt-widget-grid").removeClass("crt-grid").removeClass("crt-grid-col"+this.columnCount).css({height:"",overflow:""}),window.clearTimeout(this.updateHeightTimeout),delete this._postsRendered,delete this._loading,delete this.allLoaded,Widget.prototype.destroy.call(this)},Grid}(BaseWidget),numberTag$3="[object Number]",LayoutCarouselDynamic=function(EventBus$$1){function LayoutCarouselDynamic(widget,$viewport,$stage,$slider){EventBus$$1.call(this),this.log("construct"),this.id=CommonUtils.uId(),this.widget=widget,this._currentPane=0,this._moving=!1,this.autoPlayTimeout=null,this.PANES_VISIBLE=0,this.PANES_LENGTH=0,this.PANE_WIDTH=0,this.paneCache={},this.currentPanes=[],this.parentWidth=0,this.$viewport=$viewport,this.$stage=$stage,this.$slider=$slider,this.$parent=this.$viewport.parent().parent(),z$1.zepto||(this.$slider[0].crtTransformX=0),this.widget.config("post.matchHeights")&&this.$viewport.addClass("crt-match-heights"),this.widget.config("widget.controlsOver")?this.$viewport.addClass("crt-controls-over"):this.$viewport.addClass("crt-controls-outside"),this.widget.config("widget.controlsShowOnHover")&&this.$viewport.addClass("crt-controls-show-on-hover"),this.controlsHideShow(),this.createHandlers()}return EventBus$$1&&(LayoutCarouselDynamic.__proto__=EventBus$$1),LayoutCarouselDynamic.prototype=Object.create(EventBus$$1&&EventBus$$1.prototype),LayoutCarouselDynamic.prototype.constructor=LayoutCarouselDynamic,LayoutCarouselDynamic.prototype.createHandlers=function(){var this$1=this;this._resize=CommonUtils.debounce(function(){this$1.log("_resize"),this$1.updateLayout()},100),this.ro=new index(function(entries){entries.length>0&&this$1._resize()}),this.ro.observe(this.$viewport[0])},LayoutCarouselDynamic.prototype.destroyHandlers=function(){this.ro&&(this.log("ResizeObserver disconnect"),this.ro.disconnect(),this.ro=null)},LayoutCarouselDynamic.prototype.currentPane=function(){return this._currentPane},LayoutCarouselDynamic.prototype.setPanesLength=function(panesLength,reset,startPane){this.log("setPanesLength "+panesLength),startPane=startPane||0;var firstLoad=0===this.PANES_LENGTH;if(this.PANES_LENGTH=panesLength,firstLoad||reset){this.calcSizes(),this.paneCache={},this._currentPane=startPane,this.updatePanes();var x=this.getX();this.$slider.width(this.PANE_WIDTH*(3*this.PANES_VISIBLE)),this.setSliderX(x),this.updateHeight(),this.widget.config("widget.autoPlay")&&this.autoPlayStart(),this.controlsHideShow()}},LayoutCarouselDynamic.prototype.calcSizes=function(){if(this.log("calcSizes"),this.VIEWPORT_WIDTH=this.$viewport.width(),Logger.log("VIEWPORT_WIDTH = "+this.VIEWPORT_WIDTH),!isNaN(this.VIEWPORT_WIDTH)&&this.VIEWPORT_WIDTH>0){var panesVisible=this.widget.config("widget.panesVisible");if(isNumber(panesVisible)&&panesVisible>0)this.PANES_VISIBLE=panesVisible,this.PANE_WIDTH=this.VIEWPORT_WIDTH/this.PANES_VISIBLE;else{var minWidth=this.widget.config("post.minWidth");this.PANES_VISIBLE=this.VIEWPORT_WIDTH<minWidth?1:Math.floor(this.VIEWPORT_WIDTH/minWidth),this.PANE_WIDTH=this.VIEWPORT_WIDTH/this.PANES_VISIBLE}}},LayoutCarouselDynamic.prototype.updatePanes=function(){var this$1=this;this.log("updatePanes");for(var i=0;i<this.currentPanes.length;i++){this$1.currentPanes[i].$el.detach()}this.currentPanes=[];for(var panes=this.createPanes(),j=0;j<panes.length;j++){var pane$1=panes[j];this$1.$slider.append(pane$1.$el)}this.currentPanes=panes},LayoutCarouselDynamic.prototype.createPanes=function(){var this$1=this,panes=[];if(this.PANES_VISIBLE<this.PANES_LENGTH)for(var start=this._currentPane-this.PANES_VISIBLE,counter=0;counter<3*this.PANES_VISIBLE;counter++){var postObject=this$1.getPane(start+counter);z$1(postObject.$el).css({width:this$1.PANE_WIDTH+"px"}),panes.push(postObject)}else for(var counter$1=0;counter$1<this.PANES_LENGTH;counter$1++){var postObject$1=this$1.getPane(counter$1);z$1(postObject$1.$el).css({width:this$1.PANE_WIDTH+"px"}),panes.push(postObject$1)}return panes},LayoutCarouselDynamic.prototype.getPane=function(paneIndex){var pane=null;return this.paneCache["idx"+paneIndex]?pane=this.paneCache["idx"+paneIndex]:(pane=this.widget.createPane(paneIndex),pane.on(Events.PANE_HEIGHT_CHANGED,this.onPaneHeightChanged.bind(this)),this.paneCache["idx"+paneIndex]=pane),pane.paneIndex="idx"+paneIndex,pane},LayoutCarouselDynamic.prototype.resize=function(){var this$1=this;this.log("resize");var oldPanesVisible=this.PANES_VISIBLE,parentWidth=this.$parent.width();if(parentWidth=parentWidth<50?50:parentWidth,this.$viewport.css("max-width",parentWidth),this.parentWidth=parentWidth,this.calcSizes(),this.$slider.width(this.PANE_WIDTH*(3*this.PANES_VISIBLE)),oldPanesVisible!==this.PANES_VISIBLE)this.updatePanes();else for(var i=0;i<this.currentPanes.length;i++)this$1.currentPanes[i].$el.css({width:this$1.PANE_WIDTH+"px"});var x=this.getX();this.$slider.width(this.PANE_WIDTH*(3*this.PANES_VISIBLE)),this.setSliderX(x)},LayoutCarouselDynamic.prototype.updateLayout=function(){this.log("updateLayout"),this.alive&&(this.resize(),this.move(0,!0),this.controlsHideShow(),this.widget.config("widget.autoPlay")&&this.autoPlayStart())},LayoutCarouselDynamic.prototype.move=function(moveAmt,noAnimate){this.log("move currentPane:"+this._currentPane+" moveAmt:"+moveAmt);var previousPost=this._currentPane,newPane=this._currentPane+moveAmt;if(this._moving=!0,this.widget.config("widget.infinite")?newPane<0?newPane=this.PANES_LENGTH+newPane:newPane>this.PANES_LENGTH&&(newPane-=this.PANES_LENGTH):(newPane<0?newPane=0:newPane>this.PANES_LENGTH-this.PANES_VISIBLE&&(newPane=this.PANES_LENGTH-this.PANES_VISIBLE),moveAmt=newPane-previousPost),this._currentPane=newPane,moveAmt){var x=0-this.PANES_VISIBLE*this.PANE_WIDTH-moveAmt*this.PANE_WIDTH;if(this.parentWidth>1e3&&this.currentPanes.length<7&&(x=0),noAnimate)this.$slider.removeClass("crt-animate-transform"),this.setSliderX(x),this.moveComplete();else{var options={duration:this.widget.config("widget.duration"),complete:this.moveComplete.bind(this)};z$1.zepto&&(options.easing=this.widget.config("widget.easing","ease-in-out")),z$1.zepto?(this.$slider.addClass("crt-animate-transform"),this.$slider.animate({transform:"translate3d("+x+"px, 0px, 0px)"},options)):(options.step=function(now,fx){"crtTransformX"===fx.prop&&(z$1(this).css("-webkit-transform","translate3d("+now+"px, 0px, 0px)"),z$1(this).css("-moz-transform","translate3d("+now+"px, 0px, 0px)"),z$1(this).css("transform","translate3d("+now+"px, 0px, 0px)"))},this.$slider.addClass("crt-animate-transform"),this.$slider.animate({crtTransformX:x},options))}}else this._moving=!1},LayoutCarouselDynamic.prototype.moveComplete=function(){var this$1=this;if(this.alive){this.updatePanes();var x=0-this.PANES_VISIBLE*this.PANE_WIDTH;this.parentWidth>1e3&&this.currentPanes.length<7&&(x=0),this.setSliderX(x),this.trigger(Events.CAROUSEL_CHANGED,this,this._currentPane),this.widget.config("widget.autoPlay")&&this.autoPlayStart(),this.moveCompleteTO=window.setTimeout(function(){this$1.log("moveComplete TO"),this$1.updateHeight(),this$1._moving=!1},20)}},LayoutCarouselDynamic.prototype.updateHeight=function(){this.log("updateHeight");var paneMaxHeight=this.getMaxHeight();this.$stage.height()!==paneMaxHeight&&this.$stage.animate({height:paneMaxHeight},300),this.widget.config("post.matchHeights")&&this.setPaneHeights()},LayoutCarouselDynamic.prototype.setPaneHeights=function(){var this$1=this;if(this.log("setPaneHeights "),this.widget.config("post.matchHeights"))for(var paneMaxHeight=this.getMaxHeight(),i=0,list=this$1.currentPanes;i<list.length;i+=1){var pane=list[i];pane.forceHeight(paneMaxHeight)}},LayoutCarouselDynamic.prototype.getMaxHeight=function(){for(var this$1=this,paneMaxHeight=0,min=this.canRotate()?this.PANES_VISIBLE:0,max=min+this.PANES_VISIBLE,i=min;i<max;i++)if(this$1.currentPanes[i]){var h=this$1.currentPanes[i].getHeight();h>paneMaxHeight&&(paneMaxHeight=h)}return paneMaxHeight},LayoutCarouselDynamic.prototype.getX=function(){return this.canRotate()?0-this.PANES_VISIBLE*this.PANE_WIDTH:0},LayoutCarouselDynamic.prototype.canRotate=function(){return this.PANES_VISIBLE<this.PANES_LENGTH},LayoutCarouselDynamic.prototype.autoPlayStart=function(){var this$1=this;window.clearTimeout(this.autoPlayTimeout),this.canRotate()&&(this.autoPlayTimeout=window.setTimeout(function(){this$1.next()},this.widget.config("widget.speed")))},LayoutCarouselDynamic.prototype.controlsHideShow=function(){this.canRotate()?this.$viewport.removeClass("crt-hide-controls"):this.$viewport.addClass("crt-hide-controls")},LayoutCarouselDynamic.prototype.next=function(){if(!this._moving){var moveAmt=this.widget.config("widget.moveAmount"),move=moveAmt?moveAmt:this.PANES_VISIBLE;this.move(move,!1)}},LayoutCarouselDynamic.prototype.prev=function(){if(!this._moving){var moveAmt=this.widget.config("widget.moveAmount"),move=moveAmt?moveAmt:this.PANES_VISIBLE;this.move(0-move,!1)}},LayoutCarouselDynamic.prototype.debug=function(){for(var this$1=this,paneMaxHeight=0,i=0;i<this.currentPanes.length;i++){var h=this$1.currentPanes[i].getHeight();h>paneMaxHeight&&(paneMaxHeight=h)}return paneMaxHeight},LayoutCarouselDynamic.prototype.setSliderX=function(x){this.$slider.css({transform:"translate3d("+x+"px, 0px, 0px)"}),z$1.zepto||(this.$slider[0].crtTransformX=x)},LayoutCarouselDynamic.prototype.onPaneHeightChanged=function(){var this$1=this;this._moving||(window.clearTimeout(this.postLayoutChangedTO),this.postLayoutChangedTO=window.setTimeout(function(){this$1.updateHeight()},100))},LayoutCarouselDynamic.prototype.reset=function(){window.clearTimeout(this.autoPlayTimeout),window.clearTimeout(this.postLayoutChangedTO),window.clearTimeout(this.moveCompleteTO),this.$slider.empty(),this.setSliderX(0),this.PANES_LENGTH=0,this._currentPane=0,this.paneCache={},this.currentPanes=[]},LayoutCarouselDynamic.prototype.log=function(s){var className="LayoutCarousel["+this.id+"]";Logger.log(className+"->"+s)},LayoutCarouselDynamic.prototype.destroy=function(){var this$1=this;this.log("destroy "),EventBus$$1.prototype.destroy.call(this),this.destroyHandlers(),window.clearTimeout(this.autoPlayTimeout),window.clearTimeout(this.postLayoutChangedTO),window.clearTimeout(this.moveCompleteTO);for(var paneId in this$1.paneCache)this$1.paneCache.hasOwnProperty(paneId)&&this$1.paneCache[paneId].destroy();this.$stage.removeClass("crt-match-heights"),this.widget.$container.removeClass("crt-controls-over"),this.widget.$container.removeClass("crt-controls-show-on-hover"),this.paneCache=null,this.currentPanes=null,delete this.$viewport,delete this.$stage,delete this.$slider,delete this.$parent},LayoutCarouselDynamic}(EventBus),LayoutCarouselPane=function(Control$$1){function LayoutCarouselPane(paneIndex){Control$$1.call(this),this.paneIndex=paneIndex,this.posts=[],this.$el=z$1('<div class="crt-carousel-pane"><div class="crt-pane-index">'+this.paneIndex+"</div> </div>")}return Control$$1&&(LayoutCarouselPane.__proto__=Control$$1),LayoutCarouselPane.prototype=Object.create(Control$$1&&Control$$1.prototype),LayoutCarouselPane.prototype.constructor=LayoutCarouselPane,LayoutCarouselPane.prototype.addPost=function(post){post.on(Events.POST_LAYOUT_CHANGED,this.onPostLayoutChanged.bind(this)),post.on(Events.POST_IMAGE_LOADED,this.onPostImageLoaded.bind(this)),post.on(Events.POST_IMAGE_FAILED,this.onPostImageFailed.bind(this)),this.$el.append(post.$el),this.posts.push(post)},LayoutCarouselPane.prototype.onPostImageLoaded=function(){this.trigger(Events.POST_IMAGE_LOADED)},LayoutCarouselPane.prototype.onPostImageFailed=function(){this.trigger(Events.POST_IMAGE_FAILED)},LayoutCarouselPane.prototype.onPostLayoutChanged=function(){this.trigger(Events.PANE_HEIGHT_CHANGED)},LayoutCarouselPane.prototype.getHeight=function(){for(var this$1=this,height=0,i=0,list=this$1.posts;i<list.length;i+=1){height+=list[i].getHeight()}return height},LayoutCarouselPane.prototype.forceHeight=function(height){for(var this$1=this,i=0,list=this$1.posts;i<list.length;i+=1){list[i].forceHeight(height)}return this.$el.height()},LayoutCarouselPane.prototype.loadImage=function(){for(var this$1=this,i=0;i<this.posts.length;i++)this$1.posts[i].loadImage()},LayoutCarouselPane.prototype.destroy=function(){for(var this$1=this,i=0,list=this$1.posts;i<list.length;i+=1){list[i].destroy()}Control$$1.prototype.destroy.call(this)},LayoutCarouselPane}(Control),GridCarousel=function(Widget){function GridCarousel(options){var this$1=this;Widget.call(this),options.feed.limit=50,this.init(options,config$3)&&(Logger.log("GridCarousel->init with options:"),this.templateId=this.config("widget.template"),this.render(),this.$el.appendTo(this.$container),this.$container.addClass("crt-widget-grid-carousel"),this.carousel=new LayoutCarouselDynamic(this,this.$el,this.$refs.stage,this.$refs.slider,this.options),this.carousel.on(Events.CAROUSEL_CHANGED,this.onCarouselChange.bind(this)),this.feed.load().catch(function(data){data.message?this$1.showMessage(data.message,"error"):this$1.showMessage("Feed failed to load, check browser console for more info","error")}),this.createHandlers())}return Widget&&(GridCarousel.__proto__=Widget),GridCarousel.prototype=Object.create(Widget&&Widget.prototype),GridCarousel.prototype.constructor=GridCarousel,GridCarousel.prototype.createHandlers=function(){var this$1=this;this._resize=CommonUtils.debounce(function(){this$1.resize()},100),this.ro=new index(function(entries){entries.length>0&&this$1._resize()}),this.ro.observe(this.$container[0])},GridCarousel.prototype.destroyHandlers=function(){this._resize.cancel(),this._resize=null,this.ro&&this.ro.disconnect()},GridCarousel.prototype.reload=function(){Logger.log("GridCarousel->reload"),this.posts=[],this.carousel.reset(),this.feed.reset(),this.feed.load()},GridCarousel.prototype.loadBefore=function(){Logger.log("GridCarousel->loadBefore"),this.feed.loadBefore()},GridCarousel.prototype.resize=function(){this.trigger(Events.WIDGET_RESIZE)},GridCarousel.prototype.loadMorePosts=function(){Logger.log("GridCarousel->loadMorePosts"),this.feed.postCount>this.feed.numPosts()&&this.feed.loadMore()},GridCarousel.prototype.createPane=function(paneIndex){for(var this$1=this,numPosts=this.feed.numPosts(),pane=new LayoutCarouselPane,rows=this.config("widget.rows"),c=0;c<rows;c++){var cX=paneIndex*rows+c;cX<0?cX=numPosts+cX:cX>numPosts-1&&(cX%=numPosts);var postJson=this$1.feed.postAtIndex(cX);postJson&&pane.addPost(this$1.createElement(postJson))}return pane},GridCarousel.prototype.createPostElement=function(postJson){var post=new GridPost(this,postJson);return post.on(Events.POST_CLICK,this.onPostClick.bind(this)),post.on(Events.POST_CLICK_READ_MORE,this.onPostClickReadMore.bind(this)),post.on(Events.POST_IMAGE_LOADED,this.onPostImageLoaded.bind(this)),this.trigger(Events.POST_CREATED,post),post},GridCarousel.prototype.createAdElement=function(adJson){var ad=new GridAd(this,adJson);return this.trigger(Events.AD_CREATED,ad),ad},GridCarousel.prototype.onPostsLoaded=function(event,posts){if(Logger.log("GridCarousel->onPostsLoaded"),this.loading=!1,0!==posts.length){var rows=this.config("widget.rows"),paneCount=Math.floor(this.feed.numPosts()/rows);this.carousel.setPanesLength(paneCount)}},GridCarousel.prototype.onCarouselChange=function(event,carouselLayout,currentPane){if(Logger.log("GridCarousel->onCarouselChange currentPane: "+currentPane),this.config("widget.autoLoad")){var pos=this.feed.numPosts()-2*this.carousel.PANES_VISIBLE;currentPane*this.config("widget.rows")>=pos&&this.loadMorePosts()}},GridCarousel.prototype.onPrevClick=function(){this.carousel.prev()},GridCarousel.prototype.onNextClick=function(){this.carousel.next()},GridCarousel.prototype.setStyles=function(styles){this.sheet?this.clearStyles():this.sheet=HtmlUtils.createSheet(),this.setStylesGrid(styles)},GridCarousel.prototype.destroy=function(){this.destroyHandlers(),this.carousel.destroy(),delete this.carousel,this.$container.removeClass("crt-widget-grid-carousel"),Widget.prototype.destroy.call(this)},GridCarousel}(BaseWidget),LayoutCarouselBase=function(EventBus$$1){function LayoutCarouselBase(widget,$viewport,$stage,$slider){EventBus$$1.call(this),this.log("construct"),this.id=CommonUtils.uId(),this.widget=widget,this.$viewport=$viewport,this.$stage=$stage,this.$slider=$slider,this._currentPane=0,this._moving=!1,this.autoPlayTimeout=null,this.PANES_VISIBLE=0,this.PANES_LENGTH=0,this.PANE_WIDTH=0,this.paneCache={},this.renderMode="static",this.$viewport=$viewport,this.$stage=$stage,this.$slider=$slider,z$1.zepto||(this.$slider[0].crtTransformX=0),this.widget.config("post.matchHeights")&&this.$viewport.addClass("crt-match-heights"),this.widget.config("widget.controlsOver")?this.$viewport.addClass("crt-controls-over"):this.$viewport.addClass("crt-controls-outside"),this.widget.config("widget.controlsShowOnHover")&&this.$viewport.addClass("crt-controls-show-on-hover")}return EventBus$$1&&(LayoutCarouselBase.__proto__=EventBus$$1),LayoutCarouselBase.prototype=Object.create(EventBus$$1&&EventBus$$1.prototype),LayoutCarouselBase.prototype.constructor=LayoutCarouselBase,LayoutCarouselBase.prototype.createHandlers=function(){var this$1=this;this._resize=CommonUtils.debounce(function(){this$1.updateLayout()},100),this.ro=new index(function(entries){entries.length>0&&(this$1.log("ResizeObserver trigger"),this$1._resize())}),this.ro.observe(this.$viewport[0])},LayoutCarouselBase.prototype.destroyHandlers=function(){this.ro&&(this.log("ResizeObserver disconnect"),this.ro.disconnect(),this.ro=null)},LayoutCarouselBase.prototype.currentPane=function(){return this._currentPane},LayoutCarouselBase.prototype.setPanesLength=function(panesLength,reset,startPane){"static"===this.renderMode?this.setPanesLengthStatic(panesLength,reset,startPane):this.setPanesLengthDynamic(panesLength,reset,startPane)},LayoutCarouselBase.prototype.setPanesLengthStatic=function(panesLength,reset,startPane){this.log("setPanesLengthStatic "+panesLength),startPane=startPane||0;var firstLoad=0===this.PANES_LENGTH;if(this.PANES_LENGTH=panesLength,firstLoad||reset){this.calcSizes(),this.paneCache={},this._currentPane=startPane,this.updatePanes();var x=this.getX();this.$slider.width(this.PANE_WIDTH*(3*this.PANES_VISIBLE)),this.setSliderX(x),this.updateHeight(),this.widget.config("widget.autoPlay")&&this.autoPlayStart(),this.controlsHideShow()}},LayoutCarouselBase.prototype.setPanesLengthDynamic=function(panesLength,reset,startPane){this.log("setPanesLengthDynamic "+panesLength),startPane=startPane||0;var firstLoad=0===this.PANES_LENGTH;if(this.PANES_LENGTH=panesLength,firstLoad||reset){this.calcSizes(),this.paneCache={},this._currentPane=startPane,this.updatePanes();var x=this.getX();this.$slider.width(this.PANE_WIDTH*(3*this.PANES_VISIBLE)),this.setSliderX(x),this.updateHeight(),this.widget.config("widget.autoPlay")&&this.autoPlayStart(),this.controlsHideShow()}},LayoutCarouselBase.prototype.calcSizes=function(){if(this.log("calcSizes"),this.VIEWPORT_WIDTH=this.$viewport.width(),Logger.log("VIEWPORT_WIDTH = "+this.VIEWPORT_WIDTH),this.widget.config("widget.panesVisible"))this.PANES_VISIBLE=this.widget.config("widget.panesVisible")(),this.PANE_WIDTH=this.VIEWPORT_WIDTH/this.PANES_VISIBLE;else{var minWidth=this.widget.config("post.minWidth");this.PANES_VISIBLE=this.VIEWPORT_WIDTH<minWidth?1:Math.floor(this.VIEWPORT_WIDTH/minWidth),this.PANE_WIDTH=this.VIEWPORT_WIDTH/this.PANES_VISIBLE}},LayoutCarouselBase.prototype.updatePanes=function(){var this$1=this;this.log("updatePanes");var panes=this.getPanes();this.$slider.empty();for(var currentIds=[],i=0,list=panes;i<list.length;i+=1){var pane=list[i];this$1.$slider.append(pane.$el),currentIds.push(pane.paneIndex)}this._currentPanes=panes},LayoutCarouselBase.prototype.getPanes=function(){var this$1=this,panes=[];if(this.PANES_VISIBLE<this.PANES_LENGTH)for(var start=this._currentPane-this.PANES_VISIBLE,counter=0;counter<3*this.PANES_VISIBLE;counter++){var postObject=this$1.getPane(start+counter);z$1(postObject.$el).css({width:this$1.PANE_WIDTH+"px"}),panes.push(postObject)}else for(var counter$1=0;counter$1<this.PANES_LENGTH;counter$1++){
var postObject$1=this$1.getPane(counter$1);z$1(postObject$1.$el).css({width:this$1.PANE_WIDTH+"px"}),panes.push(postObject$1)}return panes},LayoutCarouselBase.prototype.getPane=function(paneIndex){var pane=null;return this.paneCache["idx"+paneIndex]?pane=this.paneCache["idx"+paneIndex]:(pane=this.createPane(paneIndex),this.paneCache["idx"+paneIndex]=pane),pane.paneIndex="idx"+paneIndex,pane},LayoutCarouselBase.prototype.createPane=function(paneIndex){var pane=this.widget.createPane(paneIndex);return pane.on(Events.PANE_HEIGHT_CHANGED,this.onPaneHeightChanged.bind(this)),pane},LayoutCarouselBase.prototype.resize=function(){var this$1=this,oldPanesVisible=this.PANES_VISIBLE;if(this.calcSizes(),this.$slider.width(this.PANE_WIDTH*(3*this.PANES_VISIBLE)),oldPanesVisible!==this.PANES_VISIBLE)this.updatePanes();else for(var i=0;i<this._currentPanes.length;i++)this$1._currentPanes[i].$el.css({width:this$1.PANE_WIDTH+"px"});var x=this.getX();this.$slider.width(this.PANE_WIDTH*(3*this.PANES_VISIBLE)),this.setSliderX(x)},LayoutCarouselBase.prototype.updateLayout=function(){this.resize(),this.move(0,!0),this.controlsHideShow(),this.widget.config("widget.autoPlay")&&this.autoPlayStart()},LayoutCarouselBase.prototype.getX=function(){return this.canRotate()?0-this.PANES_VISIBLE*this.PANE_WIDTH:0},LayoutCarouselBase.prototype.canRotate=function(){return this.PANES_VISIBLE<this.PANES_LENGTH},LayoutCarouselBase.prototype.autoPlayStart=function(){var this$1=this;window.clearTimeout(this.autoPlayTimeout),this.canRotate()&&(this.autoPlayTimeout=window.setTimeout(function(){this$1.next()},this.widget.config("widget.speed")))},LayoutCarouselBase.prototype.controlsHideShow=function(){this.canRotate()?this.$viewport.removeClass("crt-hide-controls"):this.$viewport.addClass("crt-hide-controls")},LayoutCarouselBase.prototype.next=function(){if(!this._moving){var moveAmt=this.widget.config("widget.moveAmount"),move=moveAmt?moveAmt:this.PANES_VISIBLE;this.move(move,!1)}},LayoutCarouselBase.prototype.prev=function(){if(!this._moving){var moveAmt=this.widget.config("widget.moveAmount"),move=moveAmt?moveAmt:this.PANES_VISIBLE;this.move(0-move,!1)}},LayoutCarouselBase.prototype.move=function(moveAmt,noAnimate){this.log("move currentPane:"+this._currentPane+" moveAmt:"+moveAmt);var previousPost=this._currentPane,newPane=this._currentPane+moveAmt;if(this._moving=!0,this.widget.config("widget.infinite")?newPane<0?newPane=this.PANES_LENGTH+newPane:newPane>this.PANES_LENGTH&&(newPane-=this.PANES_LENGTH):(newPane<0?newPane=0:newPane>this.PANES_LENGTH-this.PANES_VISIBLE&&(newPane=this.PANES_LENGTH-this.PANES_VISIBLE),moveAmt=newPane-previousPost),this._currentPane=newPane,moveAmt){var x=0-this.PANES_VISIBLE*this.PANE_WIDTH-moveAmt*this.PANE_WIDTH;this.moveToX(x,noAnimate)}else this._moving=!1},LayoutCarouselBase.prototype.moveToX=function(x,noAnimate){if(noAnimate)this.$slider.removeClass("crt-animate-transform"),this.setSliderX(x),this.moveComplete();else{var options={duration:this.widget.config("widget.duration"),complete:this.moveComplete.bind(this)};z$1.zepto&&(options.easing=this.widget.config("widget.easing","ease-in-out")),z$1.zepto?(this.$slider.addClass("crt-animate-transform"),this.$slider.animate({transform:"translate3d("+x+"px, 0px, 0px)"},options)):(options.step=function(now,fx){"crtTransformX"===fx.prop&&(z$1(this).css("-webkit-transform","translate3d("+now+"px, 0px, 0px)"),z$1(this).css("-moz-transform","translate3d("+now+"px, 0px, 0px)"),z$1(this).css("transform","translate3d("+now+"px, 0px, 0px)"))},this.$slider.addClass("crt-animate-transform"),this.$slider.animate({crtTransformX:x},options))}},LayoutCarouselBase.prototype.moveComplete=function(){var this$1=this;if(this.log("moveComplete"),this.alive){this._moving=!1,this.updatePanes();var x=0-this.PANES_VISIBLE*this.PANE_WIDTH;this.setSliderX(x),this.trigger(Events.CAROUSEL_CHANGED,this,this._currentPane),this.widget.config("widget.autoPlay")&&this.autoPlayStart(),this.moveCompleteTO=window.setTimeout(function(){this$1.log("moveComplete TO"),this$1.updateHeight()},50)}},LayoutCarouselBase.prototype.updateHeight=function(){this.log("updateHeight");var paneMaxHeight=this.getMaxHeight();this.$stage.height()!==paneMaxHeight&&this.$stage.animate({height:paneMaxHeight},300),this.widget.config("post.matchHeights")&&this.setPaneHeights()},LayoutCarouselBase.prototype.setPaneHeights=function(){var this$1=this;if(this.log("setPaneHeights "),this.widget.config("post.matchHeights"))for(var paneMaxHeight=this.getMaxHeight(),i=0,list=this$1._currentPanes;i<list.length;i+=1){var pane=list[i];pane.forceHeight(paneMaxHeight)}},LayoutCarouselBase.prototype.getMaxHeightForPanes=function(panes,fromPane,toPane){this.log("getMaxHeightForPanes "+fromPane+":"+toPane);for(var paneMaxHeight=0,i=fromPane;i<toPane;i++)if(panes[i]){var h=panes[i].getHeight();h>paneMaxHeight&&(paneMaxHeight=h)}return paneMaxHeight},LayoutCarouselBase.prototype.setSliderX=function(x){this.$slider.css({transform:"translate3d("+x+"px, 0px, 0px)"}),z$1.zepto||(this.$slider[0].crtTransformX=x)},LayoutCarouselBase.prototype.onPaneHeightChanged=function(){var this$1=this;window.clearTimeout(this.postLayoutChangedTO),this.postLayoutChangedTO=window.setTimeout(function(){this$1.updateHeight()},100)},LayoutCarouselBase.prototype.reset=function(){window.clearTimeout(this.autoPlayTimeout),window.clearTimeout(this.postLayoutChangedTO),window.clearTimeout(this.moveCompleteTO),this.$slider.empty(),this.setSliderX(0),this.PANES_LENGTH=0,this._currentPane=0,this._currentPanes=[]},LayoutCarouselBase.prototype.log=function(s){var className="LayoutCarousel["+this.id+"]";Logger.log(className+"->"+s)},LayoutCarouselBase.prototype.destroy=function(){var this$1=this;this.log("destroy "),EventBus$$1.prototype.destroy.call(this),this.destroyHandlers(),window.clearTimeout(this.autoPlayTimeout),window.clearTimeout(this.postLayoutChangedTO),window.clearTimeout(this.moveCompleteTO);for(var paneId in this$1.paneCache)this$1.paneCache.hasOwnProperty(paneId)&&this$1.paneCache[paneId].destroy();this.$stage.removeClass("crt-match-heights"),this.widget.$container.removeClass("crt-controls-over"),this.widget.$container.removeClass("crt-controls-show-on-hover"),this.paneCache=null,this._currentPanes=null,delete this.$viewport,delete this.$stage,delete this.$slider},LayoutCarouselBase}(EventBus),LayoutCarouselStatic=function(LayoutCarouselBase$$1){function LayoutCarouselStatic(widget,$viewport,$stage,$slider){LayoutCarouselBase$$1.call(this,widget,$viewport,$stage,$slider),this.log("construct"),this._currentPane=0,this._currentPanes=[],this._moving=!1,this.autoPlayTimeout=null,this.PANES_VISIBLE=0,this.PANES_LENGTH=0,this.PANE_WIDTH=0,this.controlsHideShow(),this.createHandlers()}return LayoutCarouselBase$$1&&(LayoutCarouselStatic.__proto__=LayoutCarouselBase$$1),LayoutCarouselStatic.prototype=Object.create(LayoutCarouselBase$$1&&LayoutCarouselBase$$1.prototype),LayoutCarouselStatic.prototype.constructor=LayoutCarouselStatic,LayoutCarouselStatic.prototype.currentPane=function(){return this._currentPane},LayoutCarouselStatic.prototype.setPanesLength=function(panesLength,reset,startPane){this.log("setPanesLength "+panesLength),startPane=startPane||0;var firstLoad=0===this.PANES_LENGTH;if(this.PANES_LENGTH=panesLength,this.renderPanes(),firstLoad||reset){this.calcSizes(),this._currentPane=startPane;var x=this.getX();this.$slider.width(this.PANES_LENGTH*this.PANE_WIDTH),this.setSliderX(x),this.updateHeight(),this.widget.config("widget.autoPlay")&&this.autoPlayStart(),this.controlsHideShow()}},LayoutCarouselStatic.prototype.calcSizes=function(){if(this.log("calcSizes"),this.VIEWPORT_WIDTH=this.$viewport.width(),Logger.log("VIEWPORT_WIDTH = "+this.VIEWPORT_WIDTH),this.widget.config("widget.panesVisible"))this.PANES_VISIBLE=this.widget.config("widget.panesVisible")(),this.PANE_WIDTH=this.VIEWPORT_WIDTH/this.PANES_VISIBLE;else{var minWidth=this.widget.config("post.minWidth");this.PANES_VISIBLE=this.VIEWPORT_WIDTH<minWidth?1:Math.floor(this.VIEWPORT_WIDTH/minWidth),this.PANE_WIDTH=this.VIEWPORT_WIDTH/this.PANES_VISIBLE}},LayoutCarouselStatic.prototype.renderPanes=function(){var this$1=this;if(this.log("renderPanes"),!(this._currentPanes.length>=this.PANES_LENGTH))for(var min=this._currentPanes.length,counter=min;counter<this.PANES_LENGTH;counter++){var pane=this$1.createPane(counter);pane.$el.css({width:this$1.PANE_WIDTH+"px"}),this$1.$slider.append(pane.$el),this$1._currentPanes.push(pane)}},LayoutCarouselStatic.prototype.resize=function(){var this$1=this;this.calcSizes(),this.$slider.width(this.PANES_LENGTH*this.PANE_WIDTH);for(var i=0;i<this._currentPanes.length;i++)this$1._currentPanes[i].$el.css({width:this$1.PANE_WIDTH+"px"});var x=this.getX();this.setSliderX(x)},LayoutCarouselStatic.prototype.updateLayout=function(){this.resize(),this.move(0,!0),this.controlsHideShow(),this.widget.config("widget.autoPlay")&&this.autoPlayStart()},LayoutCarouselStatic.prototype.getX=function(){return 0-this._currentPane*this.PANE_WIDTH},LayoutCarouselStatic.prototype.canRotate=function(){return this.PANES_VISIBLE<this.PANES_LENGTH},LayoutCarouselStatic.prototype.autoPlayStart=function(){var this$1=this;window.clearTimeout(this.autoPlayTimeout),this.canRotate()&&(this.autoPlayTimeout=window.setTimeout(function(){this$1.next()},this.widget.config("widget.speed")))},LayoutCarouselStatic.prototype.move=function(moveAmt,noAnimate){this.log("move currentPane:"+this._currentPane+" moveAmt:"+moveAmt);var newPane=this._currentPane+moveAmt;if(this._moving=!0,this.widget.config("widget.infinite")?newPane<0?newPane=this.PANES_LENGTH+newPane:newPane>this.PANES_LENGTH&&(newPane-=this.PANES_LENGTH):newPane<0?newPane=0:newPane>this.PANES_LENGTH-this.PANES_VISIBLE&&(newPane=this.PANES_LENGTH-this.PANES_VISIBLE),this._currentPane=newPane,moveAmt){var x=this.getX();this.moveToX(x,noAnimate)}else this._moving=!1},LayoutCarouselStatic.prototype.moveComplete=function(){var this$1=this;this.log("moveComplete"),this.alive&&(this._moving=!1,this.trigger(Events.CAROUSEL_CHANGED,this,this._currentPane),this.widget.config("widget.autoPlay")&&this.autoPlayStart(),this.moveCompleteTO=window.setTimeout(function(){this$1.log("moveComplete TO"),this$1.updateHeight()},50))},LayoutCarouselStatic.prototype.getMaxHeight=function(){var min=this._currentPane,max=min+this.PANES_VISIBLE;return this.getMaxHeightForPanes(this._currentPanes,min,max)},LayoutCarouselStatic.prototype.reset=function(){window.clearTimeout(this.autoPlayTimeout),window.clearTimeout(this.moveCompleteTO),this.$slider.empty(),this.setSliderX(0),this.PANES_LENGTH=0,this._currentPane=0,this._currentPanes=[]},LayoutCarouselStatic.prototype.log=function(s){var className="LayoutCarouselStatic["+this.id+"]";Logger.log(className+"->"+s)},LayoutCarouselStatic.prototype.destroy=function(){this.log("destroy"),LayoutCarouselBase$$1.prototype.destroy.call(this)},LayoutCarouselStatic}(LayoutCarouselBase),Carousel=function(Widget){function Carousel(options){var this$1=this;if(Widget.call(this),options.feed.limit=50,this.init(options,config$1)){Logger.log("Carousel->init"),this._lazyLoad=this.config("widget.lazyLoad",!1),this._progressiveLoad=this.config("widget.progressiveLoad",!1),this.allLoaded=!1,this.templateId=this.config("widget.template"),this._panesVisible=[],this._postsLoadIndex=0,this.$refs={stage:null,slider:null},this.render(),this.$el.appendTo(this.$container),this.$container.addClass("crt-widget-carousel");var renderMode=this.config("widget.renderMode","dynamic");this.carousel="static"===renderMode?new LayoutCarouselStatic(this,this.$el,this.$refs.stage,this.$refs.slider):new LayoutCarouselDynamic(this,this.$el,this.$refs.stage,this.$refs.slider),this.carousel.on(Events.CAROUSEL_CHANGED,this.onCarouselChange.bind(this)),this.feed.load().catch(function(data){data.message?this$1.showMessage(data.message,"error"):this$1.showMessage("Feed failed to load, check browser console for more info","error")})}}return Widget&&(Carousel.__proto__=Widget),Carousel.prototype=Object.create(Widget&&Widget.prototype),Carousel.prototype.constructor=Carousel,Carousel.prototype.reload=function(){Logger.log("Carousel->reload"),this.posts=[],this.allLoaded=!1,this.carousel.reset(),this.feed.reset(),this.feed.load()},Carousel.prototype.loadMorePosts=function(){Logger.log("Carousel->loadMorePosts"),this.feed.postCount>this.feed.numPosts()&&this.feed.loadMore()},Carousel.prototype.createPane=function(paneIndex){Logger.log("Carousel->createPane "+paneIndex);var postToLoad=paneIndex;paneIndex<0?postToLoad=this.feed.numPosts()+paneIndex:paneIndex>this.feed.numPosts()-1&&(postToLoad=paneIndex%this.feed.numPosts());var pane=new LayoutCarouselPane(paneIndex),postJson=this.feed.postAtIndex(postToLoad);return pane.addPost(this.createElement(postJson)),this._progressiveLoad&&pane.loadImage(),this._panesVisible.push(pane),pane},Carousel.prototype.onPostsLoaded=function(event,posts){Logger.log("Carousel->onPostsLoaded"),0===posts.length?this.allLoaded=!0:this.carousel.setPanesLength(this.feed.numPosts())},Carousel.prototype.onCarouselChange=function(event,carouselLayout,currentPane){if(Logger.log("Carousel->onCarouselChange currentPane: "+currentPane),this.config("widget.autoLoad")){currentPane>=this.feed.numPosts()-2*this.carousel.PANES_VISIBLE&&this.loadMorePosts()}},Carousel.prototype.onPrevClick=function(){this.carousel.prev()},Carousel.prototype.onNextClick=function(){this.carousel.next()},Carousel.prototype.onDebugClick=function(){this.carousel.debug()},Carousel.prototype.destroy=function(){this.carousel.destroy(),delete this.carousel,this.$container.removeClass("crt-widget-carousel"),this.$container.removeClass("crt-carousel"),delete this.allLoaded,Widget.prototype.destroy.call(this)},Carousel}(BaseWidget),AutoloadWorker=function(fn){this.autoLoading=!0,this.onAutoLoadFire=fn};AutoloadWorker.prototype.start=function(){this.autoLoading=!0,this.setTimeout()},AutoloadWorker.prototype.setTimeout=function(){this.autoLoadTimeout=window.setTimeout(this._onAutoLoadFire.bind(this),3e4)},AutoloadWorker.prototype.stop=function(){this.autoLoading=!1,window.clearTimeout(this.autoLoadTimeout)},AutoloadWorker.prototype._onAutoLoadFire=function(){this.onAutoLoadFire(),this.setTimeout()},AutoloadWorker.prototype.destroy=function(){this.autoLoading&&this.stop()};var Panel=function(Widget){function Panel(options){var this$1=this;Widget.call(this),this.allLoaded=!1,this.$refs={stage:null,slider:null};var config=merge({},config$6,options);config.feed.limit=50,this.init(config,{})&&(Logger.log("Panel->init"),this.renderWidget(),this.$el.appendTo(this.$container),this.$container.addClass("crt-widget-carousel"),this.$container.addClass("crt-widget-panel"),this.config("post.fixedHeight")&&this.$container.addClass("crt-panel-fixed-height"),this.carousel=new LayoutCarouselDynamic(this,this.$el,this.$refs.stage,this.$refs.slider,this.options),this.carousel.on(Events.CAROUSEL_CHANGED,this.onCarouselChange.bind(this)),this.feed.load().catch(function(data){data.message?this$1.showMessage(data.message,"error"):this$1.showMessage("Feed failed to load, check browser console for more info","error")}),this.config("widget.autoLoadNew")&&(this.autoLoadWorker=new AutoloadWorker(function(){this$1.feed.loadBefore()}),this.autoLoadWorker.start()))}return Widget&&(Panel.__proto__=Widget),Panel.prototype=Object.create(Widget&&Widget.prototype),Panel.prototype.constructor=Panel,Panel.prototype.reload=function(){this.feed.reset(),this.feed.load(),this.reset()},Panel.prototype.reset=function(){var currentPane=this.carousel.currentPane();this.carousel.setPanesLength(this.feed.numPosts(),!0,currentPane)},Panel.prototype.loadMorePosts=function(){Logger.log("Panel->loadMorePosts"),this.feed.postCount>this.feed.numPosts()&&this.feed.loadMore()},Panel.prototype.createPane=function(paneIndex){Logger.log("Panel->createPane "+paneIndex);var postToLoad=paneIndex;paneIndex<0?postToLoad=this.feed.numPosts()+paneIndex:paneIndex>this.feed.numPosts()-1&&(postToLoad=paneIndex%this.feed.numPosts());var pane=new LayoutCarouselPane(paneIndex),postJson=this.feed.postAtIndex(postToLoad);return pane.addPost(this.createElement(postJson)),pane},Panel.prototype.onPostsLoaded=function(event,posts,position){if(Logger.log("Panel->onPostsLoaded"),0===posts.length)this.allLoaded=!0;else if("before"===position){var currentPane=this.carousel.currentPane();currentPane+=posts.length,this.carousel.setPanesLength(this.feed.numPosts(),!0,currentPane)}else this.carousel.setPanesLength(this.feed.numPosts())},Panel.prototype.onCarouselChange=function(event,carouselLayout,currentPane){if(Logger.log("Panel->onCarouselChange currentPane: "+currentPane),this.config("widget.autoLoad")){currentPane>=this.feed.numPosts()-2*this.carousel.PANES_VISIBLE&&this.loadMorePosts()}},Panel.prototype.onPrevClick=function(){this.carousel.prev()},Panel.prototype.onNextClick=function(){this.carousel.next()},Panel.prototype.destroy=function(){this.autoLoadWorker&&this.autoLoadWorker.destroy(),this.carousel.destroy(),delete this.carousel,this.$container.removeClass("crt-widget-carousel"),this.$container.removeClass("crt-widget-panel"),delete this.allLoaded,Widget.prototype.destroy.call(this)},Panel}(BaseWidget),template$19='\n<div class="example-panel">\n    <a class="panel-close" c-on:click="onCloseClick">-</a>\n    <div class="example-panel-body">\n        <table>\n        <tr>\n            <td>Background</td>\n            <td>\n            <a href="#" class="bg" c-on:click="onBGClick" data-bg="#000000">Black</a> |\n            <a href="#" class="bg" c-on:click="onBGClick" data-bg="#FFFFFF">White</a> |\n            <a href="#" class="bg" c-on:click="onBGClick" data-bg="#EFEFEF">Grey BG</a>\n        </td>\n        </tr>\n        <tr>\n            <td>-</td>\n        </tr>\n        <tr>\n            <td>Widget: </td>\n            <td><a href="#" class="create" c-on:click="createWidget">Create</a> |\n                <a href="#" class="destroy" c-on:click="destroyWidget">Destroy</a> |\n                <a href="#" class="destroy" c-on:click="resetWidget">Reset</a></td>\n        </tr>\n        <tr>\n            <td>Feed ID</td>\n            <td><input id="feedId" c-on:blur="onFeedBlur"></td>\n                </tr>\n                <tr>\n                <td>API</td>\n                <td>\n                <select id="api" c-on:change="onApiChange">\n                <option>https://api.curator.io</option>\n            <option>http://curator-api.local</option>\n            <option>http://curator-api.test</option>\n            </select>\n            </td>\n        </tr>\n        <tr>\n            <td>Type: </td>\n            <td>\n            <select id="type" c-on:change="onTypeChange">\n                <option>Waterfall</option>\n                <option>Carousel</option>\n                <option>Grid</option>\n                <option>GridCarousel</option>\n                <option>Panel</option>\n                <option>List</option>\n                </select>\n                </td>\n                </tr>\n                <tr>\n                <td>Theme: </td>\n            <td>\n            <select id="theme" c-on:change="onThemeChange">\n                </select>\n                </td>\n                </tr>\n                <tr id="tr-options">\n                <td>Options: </td>\n            <td><textarea id="options" c-on:blur="onOptionsBlur"></textarea></td>\n        </tr>\n        <tr id="tr-styles">\n            <td>Styles: </td>\n            <td><textarea id="styles" c-on:blur="onStylesBlur"></textarea></td>\n        </tr>\n        </table>\n    </div>\n</div>',DevPanel=function(Control$$1){function DevPanel(){Control$$1.call(this),this.config={},this.templateId=template$19,this.render({templateId:template$19}),z$1("body").append(this.$el);try{this.config=JSON.parse(window.localStorage.getItem("config"))}catch(e){window.console.log("ERROR IN JSON: config"),window.console.log(e)}try{var styles=window.localStorage.getItem("styles");this.styles=JSON.parse(styles)}catch(e){window.console.log("ERROR IN JSON: styles"),window.console.log(e)}this.config||(this.config={feed:{}});var feedId="0DE3D84D-E173-4522-8B21-EE9AF2D7";if(window.URLSearchParams){var urlParams=new window.URLSearchParams(window.location.search);feedId=urlParams.get("feed_id")?urlParams.get("feed_id"):feedId}this.config.feed||(this.config.feed={}),this.config.feed.apiEndpoint||(this.config.feed.apiEndpoint="https://api.curator.io"),this.config.feed.id||(this.config.feed.id=feedId),this.config.type||(this.config.type="Waterfall"),this.config.widgetTheme||(this.config.widgetTheme="sydney"),this.updateThemesOptions(this.config.type),this.updateOptions(),this.updateStyles(),this.createWidget(),z$1("#tr-styles").hide()}return Control$$1&&(DevPanel.__proto__=Control$$1),DevPanel.prototype=Object.create(Control$$1&&Control$$1.prototype),DevPanel.prototype.constructor=DevPanel,DevPanel.prototype.createConfig=function(widgetType,widgetTheme,reset){widgetType===this.config.type&&reset!==!0||(this.config=themes.typeConfig(widgetType),this.config.feed||(this.config.feed={}),this.config.feed.id=z$1("#feedId").val(),this.config.feed.apiEndpoint=z$1("#api").val()),this.config.type=widgetType,this.config.theme=widgetTheme;var themeConfig=themes.themeConfig(widgetType,widgetTheme),themeStyles=themes.themeStyles(widgetType,widgetTheme,{});this.config=z$1.extend(!0,{},this.config,themeConfig),this.styles=themeStyles},DevPanel.prototype.onApiChange=function(ev){this.config.feed.apiEndpoint=z$1(ev.target).val(),this.updateOptions(),this.createWidget()},DevPanel.prototype.onTypeChange=function(ev){var widgetType=z$1(ev.target).val(),widgetTheme=themes.defaultTheme(widgetType);this.updateThemesOptions(widgetType),this.createConfig(widgetType,widgetTheme),this.updateOptions(),this.updateStyles(),this.createWidget()},DevPanel.prototype.onThemeChange=function(ev){var widgetTheme=z$1(ev.target).val();this.createConfig(this.config.type,widgetTheme),this.updateOptions(),this.updateStyles(),this.createWidget()},DevPanel.prototype.onFeedBlur=function(ev){this.config.feed.id=z$1(ev.target).val(),this.updateOptions(),this.createWidget()},DevPanel.prototype.onOptionsBlur=function(ev){var options=z$1("#options").val();try{this.config=JSON.parse(options),window.localStorage.setItem("config",options),this.createWidget()}catch(e){console.log("ERROR!!!!"),console.log(e)}},DevPanel.prototype.onStylesBlur=function(ev){var styles="{}";try{styles=z$1("#styles").val(),console.log(styles),this.styles=JSON.parse(styles)}catch(e){console.log("ERROR!!!!"),console.log(e.message),this.styles={}}try{window.localStorage.setItem("styles",styles)}catch(e){console.log(e)}this.createWidget()},DevPanel.prototype.onBGClick=function(ev){z$1("body").css("background-color",z$1(ev.target).data("bg"))},DevPanel.prototype.onCloseClick=function(ev){this.$el.toggleClass("hidden")},DevPanel.prototype.destroyWidget=function(){window.widget&&window.widget.destroy(),window.widget=null},DevPanel.prototype.createWidget=function(){this.destroyWidget();var config=z$1.extend({},this.config);config.container="#curator-feed",window.widget=Curator.loadWidget(config),window.widget&&this.styles&&window.widget.setStyles(this.styles)},DevPanel.prototype.resetWidget=function(){this.destroyWidget(),this.createConfig(this.config.type,this.config.widgetTheme,!0),this.createWidget()},DevPanel.prototype.updateThemesOptions=function(widgetType){z$1("#theme").empty();var widgetThemes=themes.widgetThemes(widgetType);if(widgetThemes)for(var id in widgetThemes){var theme=widgetThemes[id];z$1("#theme").append("<option>"+theme+"</option>")}},DevPanel.prototype.updateOptions=function(){z$1("#type").val(this.config.type),z$1("#theme").val(this.config.theme),z$1("#feedId").val(this.config.feed.id),z$1("#api").val(this.config.feed.apiEndpoint);var options=JSON.stringify(this.config);try{window.localStorage.setItem("config",options)}catch(e){console.log(e)}var json=this.prettifyJSON(options);z$1("#options").val(json)},DevPanel.prototype.updateStyles=function(){var options=JSON.stringify(this.styles);try{window.localStorage.setItem("styles",options)}catch(e){console.log(e)}var json=this.prettifyJSON(options);z$1("#styles").val(json)},DevPanel.prototype.prettifyJSON=function(options){return options?(options=options.replace(/([e0-9"]),/g,"$1,\n"),options=options.replace(/}/g,"\n}"),options=options.replace(/{/g,"{\n"),options=options.replace(/\}\,/g,"},\n"),options=options.replace(/\}\,/g,"},\n"),options=options.replace(/\{\n\n\}\,/g,"{},"),options=options.replace(/\}\,\n\n/g,"},\n")):""},DevPanel}(Control),findContainer=function(config){var feedId="",containerId=config.container;config.feed&&config.feed.id?feedId=config.feed.id:config.feedId&&(feedId=config.feedId);var container=z$1('[data-crt-feed-id="'+feedId+'"]');return container.length>0?container.get(0):(container=z$1(".crt-feed-"+feedId),container.length>0?container.get(0):(container=z$1("#curator-"+feedId),container.length>0?container.get(0):(container=z$1(containerId),!!container.length&&container.get(0))))},loadWidget=function(config,colors,styles){"function"==typeof window.onCuratorBeforeBootstrap&&window.onCuratorBeforeBootstrap(),window.jQuery&&window.jQuery(window).trigger("curatorCssLoaded");var container=findContainer(config);if(container){config.container=container;var ConstructorClass=Crt.Widgets[config.type],widget=new ConstructorClass(config);return colors&&(styles=themes.themeStyles(config.type,config.theme,colors)),styles&&widget.setStyles(styles),widget}return Logger.error("Curator - could not find container"),!1},Crt={loadWidget:loadWidget,loadCSS:function(){},z:z$1,_t:function(s,n,lang){return mod.t(s,n,lang)},Templates:Templates,Templating:Templating,EventBus:EventBus,Events:Events,Logger:Logger,Globals:Globals,Ui:{Post:BasePost,Control:Control,DevPanel:DevPanel},Widgets:{Waterfall:Waterfall,Grid:Grid,Carousel:Carousel,GridCarousel:GridCarousel,Panel:Panel,List:List},Themes:themes,Utils:{Html:HtmlUtils,String:StringUtils}};return Crt}();return Curator});